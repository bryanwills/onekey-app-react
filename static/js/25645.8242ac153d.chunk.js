"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[25645],{461483:(e,t,n)=>{n.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var r=n(586330),s=n(514041),i=n(908867),o=n(490343),a=n(310955),l=n(509388),c=n(831085);const __WEBPACK_DEFAULT_EXPORT__=function({oldEncodedPassword:e,onUpdateRes:t}){var n,[u,d]=(0,s.useState)(!1),p=(0,i.A)(),f=(0,s.useCallback)((n=(0,r.A)((function*(n){d(!0);try{if(n.confirmPassword!==n.password)return void o.Toast.error({title:"password not match"});var r=yield a.A.servicePassword.encodeSensitiveText({text:n.password}),s=yield a.A.servicePassword.updatePassword(e,r);t(s),o.Toast.success({title:"password update success"})}catch(e){console.error(e),o.Toast.error({title:"password set failed"})}d(!1)})),function(e){return n.apply(this,arguments)}),[t,e]);return(0,c.jsx)(l.A,{loading:u,onSetupPassword:f,confirmBtnText:p.formatMessage({id:"form__change_password"})})}},536612:(e,t,n)=>{n.d(t,{S:()=>useAppUpdateInfo,x:()=>useAppChangeLog});var r=n(324586),s=n(514041),i=n(734809),o=n(713132),a=n(639451),l=n(730223),c=n(310955),u=n(498356),d=n(911998);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var useAppChangeLog=function(e){var t=(0,d.yk)((function(){return e?c.A.serviceAppUpdate.fetchChangeLog():Promise.resolve(null)}),[e]);return(0,s.useMemo)((function(){return t.result}),[t.result])},useAppUpdateInfo=function(e=!1){var[t]=(0,i.useAppUpdatePersistAtom)(),n=(0,u.A)(),r=(0,s.useCallback)((function(){setTimeout((function(){(e?n.pushFullModal:n.pushModal)(l.ry.AppUpdateModal,{screen:l.mk.WhatsNew})}))}),[e,n.pushFullModal,n.pushModal]),d=(0,s.useCallback)((function(e=!1,r){(e?n.pushFullModal:n.pushModal)(l.ry.AppUpdateModal,{screen:l.mk.UpdatePreview,params:_objectSpread({latestVersion:t.latestVersion,isForceUpdate:t.isForceUpdate,autoClose:e},r)})}),[t.isForceUpdate,t.latestVersion,n.pushFullModal,n.pushModal]);(0,s.useEffect)((function(){(0,o.fK)(t)&&r(),t.status===o.ue.downloading&&(0,a.Xo)(t).then((function(){c.A.serviceAppUpdate.readyToInstall()})).catch((function(e){c.A.serviceAppUpdate.notifyFailed(e)})),c.A.serviceAppUpdate.fetchAppUpdateInfo().then((function(e){e?.isForceUpdate&&(0,o._q)(e.latestVersion,e.status)&&d(!0,e)}))}),[]);var p=(0,s.useCallback)((function(){switch(t.status){case o.ue.notify:case o.ue.downloading:d(e);break;case o.ue.ready:(0,a.Ed)(t).catch((function(e){return c.A.serviceAppUpdate.notifyFailed(e)}));break;case o.ue.failed:c.A.serviceAppUpdate.startDownloading(),(0,a.Xo)(t).then((function(){c.A.serviceAppUpdate.readyToInstall()})).catch((function(e){c.A.serviceAppUpdate.notifyFailed(e)}))}}),[t,e,d]);return(0,s.useMemo)((function(){return{isNeedUpdate:(0,o._q)(t.latestVersion,t.status),data:t,onUpdateAction:p,toUpdatePreviewPage:d,onViewReleaseInfo:r}}),[t,p,r,d])}},390334:(e,t,n)=>{n.d(t,{P:()=>useHelpLink});var r=n(726130),s=n(886738),i=n(12730);function normalizePath(e){return e?e.replace(/^\/|\/$/g,""):""}function useHelpLink({path:e=""}){var t=(0,i.z)(),n=(0,s.L)(),o=("system"===n?t:n).replace(/_/g,"-").toLowerCase(),a=normalizePath(e);return normalizePath(`${r.mE}/${o}/${a}`)}},447479:(e,t,n)=>{n.d(t,{I:()=>useOptions});var r=n(514041),s=n(908867),i=n(507026);function useOptions(){var e=(0,s.A)();return(0,r.useMemo)((function(){return[{title:e.formatMessage({id:"form__always"}),value:i.J.Always},{title:e.formatMessage({id:"form__str_minute"},{0:1}),value:i.J.Minute},{title:e.formatMessage({id:"form__str_minute"},{0:5}),value:i.J.Minute5},{title:e.formatMessage({id:"form__str_minute"},{0:30}),value:i.J.Minute30},{title:e.formatMessage({id:"form__str_hour"},{0:1}),value:i.J.Hour},{title:e.formatMessage({id:"form__str_hour"},{0:4}),value:i.J.Hour4},{title:"Never",value:i.J.Never}]}),[e])}},415902:(e,t,n)=>{n.d(t,{_:()=>StartTimePanel});var r=n(490343),s=n(318003),i=n(831085);function StartTimePanel(){var{jsBundleLoadedTime:e,fpTime:t}=(0,s.useMeasureTime)();return(0,i.jsxs)(r.YStack,{children:[(0,i.jsxs)(r.SizableText,{children:["Load Time: ",e]}),(0,i.jsxs)(r.SizableText,{children:["Render time: ",t-e]}),(0,i.jsxs)(r.SizableText,{children:["Startup Time: ",t]})]})}},460627:(e,t,n)=>{n.d(t,{u:()=>l});var r,s=n(586330),i=n(310955),o=n(321775),a=n(520202),l=(r=(0,s.A)((function*(e){var t=`${e}.txt`;o.U.setting.device.logDeviceInfo(),yield(0,a.of)(1e3);var n=yield i.A.serviceLogger.getAllMsg(),r=document.createElement("a"),s=new Blob(n,{type:"text/plain",endings:"native"});r.href=URL.createObjectURL(s),r.download=t,document.body.appendChild(r),r.click()})),function exportLogs(e){return r.apply(this,arguments)})},125645:(e,t,n)=>{n.r(t),n.d(t,{default:()=>SettingListModal});var r,s=n(514041),i=n(490343),o=n(726130),a=n(663522),l=n(117746),c=n(310955),u=0,handleOpenDevMode=function(){var e=new Date;void 0===r||Math.round(e.getTime()-r.getTime())>5e3?(r=e,u=0):u+=1,u>=9&&c.A.serviceDevSetting.switchDevMode(!0)},d=n(908867),p=n(791088),f=n(498356),m=n(734809),h=n(730223),g=n(324586),j=n(831085);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,g.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Section=function({title:e,titleProps:t,children:n}){return(0,j.jsxs)(i.Stack,{children:[(0,j.jsx)(i.SizableText,_objectSpread(_objectSpread({size:"$headingSm",paddingHorizontal:"$4",paddingBottom:"$2",paddingTop:"$5",color:"$textSubdued"},t),{},{children:e})),(0,j.jsx)(i.Stack,{children:n})]})},HardwareBridgeListItems=function(){var e=(0,f.A)(),t=(0,s.useCallback)((function(){e.push(h.Pj.SettingHardwareSdkUrlModal)}),[e]),n=(0,s.useCallback)((function(){(0,l.Dr)(o.By)}),[]),r=(0,d.A)(),[i]=(0,m.useSettingsPersistAtom)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.c,{onPress:t,icon:"CodeOutline",title:r.formatMessage({id:"form__hardware_bridge_sdk_url"}),drillIn:!0,children:(0,j.jsx)(p.c.Text,{primary:i.hardwareConnectSrc,align:"right"})}),(0,j.jsx)(p.c,{onPress:n,icon:"ApiConnectionOutline",title:r.formatMessage({id:"form__hardware_bridge_status"}),children:(0,j.jsx)(p.c.IconButton,{disabled:!0,icon:"ArrowTopRightOutline",iconProps:{color:"$iconActive"}})})]})},AdvancedSection=function(){var e=(0,f.A)(),t=(0,s.useCallback)((function(){e.push(h.Pj.SettingAccountDerivationModal)}),[e]);return(0,j.jsxs)(Section,{title:"Advanced",children:[(0,j.jsx)(p.c,{onPress:t,icon:"OrganisationOutline",title:"Account Derivation Path",drillIn:!0}),(0,j.jsx)(HardwareBridgeListItems,{})]})},y=n(586330),v=(n(911998),n(318822),function(){var e=(0,d.A)(),t=(0,f.A)(),n=(0,s.useCallback)((0,y.A)((function*(){yield c.A.servicePassword.promptPasswordVerify(),t.push(h.sv.ListItemModal)})),[t]),[{updateTimestamp:r}]=(0,m.useAddressBookPersistAtom)(),o=(0,s.useCallback)((0,y.A)((function*(){var e;r?yield n():i.Dialog.show({title:"Encrypted storage",icon:"PlaceholderOutline",description:"All your address book data is encrypted with your login password. ",tone:"default",showConfirmButton:!0,showCancelButton:!0,onConfirm:(e=(0,y.A)((function*(e){yield e.close(),yield n()})),function onConfirm(t){return e.apply(this,arguments)}),confirmButtonProps:{testID:"encrypted-storage-confirm"}})})),[n,r]);return(0,j.jsx)(p.c,{icon:"BookOpenOutline",title:e.formatMessage({id:"title__address_book"}),drillIn:!0,onPress:o,testID:"setting-address-book"})}),LockNowButton=function(){var e=(0,d.A)(),t=(0,f.A)(),[n]=(0,m.usePasswordPersistAtom)(),r=(0,s.useCallback)((0,y.A)((function*(){n.isPasswordSet||(yield c.A.servicePassword.promptPasswordVerify()),yield c.A.servicePassword.lockApp(),t.popStack()})),[n.isPasswordSet,t]);return(0,j.jsx)(p.c,{icon:"LockOutline",title:e.formatMessage({id:"action__lock_now"}),onPress:r})},DefaultSection=function(){(0,d.A)();var e=(0,f.A)();return(0,j.jsxs)(i.YStack,{children:[(0,j.jsx)(LockNowButton,{}),null,(0,j.jsx)(v,{}),null,null,(0,j.jsx)(p.c,{icon:"OnekeyKeytagOutline",title:"OneKey KeyTag",drillIn:!0,onPress:function(){e.pushModal(h.ry.KeyTagModal,{screen:h.ex.UserOptions})}})]})},x=n(265767),P=n(839850),b=["title","onPress","copyable"];function SectionPressItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SectionPressItem(e){var{title:t,onPress:n,copyable:r}=e,o=(0,P.A)(e,b),{copyText:a}=(0,i.useClipboard)(),l=(0,s.useCallback)((function(){a(t)}),[a,t]);return(0,j.jsx)(p.c,function SectionPressItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SectionPressItem_ownKeys(Object(n),!0).forEach((function(t){(0,g.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SectionPressItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({drillIn:!0,onPress:r?l:n,title:t,titleProps:{color:"$textCritical"}},o))}var AddressBookDevSetting=function(){var e=(0,s.useCallback)((0,y.A)((function*(){i.Dialog.show({title:"Tamper Address Book",description:"This is a feature specific to development environments. Function used to simulate address data being tampered with",confirmButtonProps:{variant:"destructive"},onConfirm:function(){c.A.serviceAddressBook.__dangerTamperVerifyHashForTest()}})})),[]);return(0,j.jsx)(SectionPressItem,{title:"Hack Address Book",testID:"temper-address-book",onPress:e})};function SectionFieldItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SectionFieldItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SectionFieldItem_ownKeys(Object(n),!0).forEach((function(t){(0,g.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SectionFieldItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SectionFieldItem({name:e,title:t,children:n,onValueChange:r,titleProps:i={color:"$textCritical"},testID:o=""}){var a,[l]=(0,m.useDevSettingsPersistAtom)(),u=s.Children.only(n),d=e?l?.settings?.[e]:"",f=(0,s.useCallback)((a=(0,y.A)((function*(t){e&&(yield c.A.serviceDevSetting.updateDevSetting(e,t),r?.(t))})),function(e){return a.apply(this,arguments)}),[e,r]),h=u?(0,s.cloneElement)(u,SectionFieldItem_objectSpread(SectionFieldItem_objectSpread({},u.props),{},{value:d,onChange:f})):null;return(0,j.jsx)(p.c,{title:t,titleProps:i,testID:o,children:h})}var A=n(415902),DevSettingsSection=function(){var[e]=(0,x.LA)(),t=(0,d.A)(),n=(0,f.A)(),r=(0,s.useCallback)((function(){i.Dialog.show({title:"Disable the dev mode",onConfirm:function(){c.A.serviceDevSetting.switchDevMode(!1)}})}),[]);return e.enabled?(0,j.jsxs)(Section,{title:t.formatMessage({id:"form__dev_mode"}),titleProps:{color:"$textCritical"},children:[(0,j.jsx)(SectionPressItem,{title:"Disable the dev mode",onPress:r}),a.Ay.githubSHA?(0,j.jsx)(SectionPressItem,{copyable:!0,title:`BuildHash: ${a.Ay.githubSHA}`}):null,(0,j.jsx)(SectionFieldItem,{name:"enableTestEndpoint",title:t.formatMessage({id:"action__test_onekey_service"}),onValueChange:void 0,children:(0,j.jsx)(i.Switch,{size:i.ESwitchSize.small})}),(0,j.jsx)(SectionFieldItem,{name:"showDevOverlayWindow",title:"show dev overlay window",testID:"show-dev-overlay",children:(0,j.jsx)(i.Switch,{size:i.ESwitchSize.small})}),(0,j.jsx)(SectionPressItem,{title:"FirmwareUpdateDevSettings",testID:"firmware-update-dev-settings-menu",onPress:function(){n.push(h.Pj.SettingDevFirmwareUpdateModal)}}),(0,j.jsx)(SectionPressItem,{title:"Clear App Data",testID:"clear-data-menu",onPress:function(){var e=i.Dialog.cancel({title:"Clear App Data",renderContent:(0,j.jsxs)(i.YStack,{children:[(0,j.jsx)(SectionPressItem,{title:"Clear Dapp Data",testID:"clear-dapp-data",onPress:(0,y.A)((function*(){yield c.A.serviceE2E.clearDiscoveryPageData(),yield e.close()}))}),(0,j.jsx)(SectionPressItem,{title:"Clear Contacts Data",testID:"clear-contacts-data",onPress:(0,y.A)((function*(){yield c.A.serviceE2E.dangerClearDataForE2E(),yield e.close()}))}),(0,j.jsx)(SectionPressItem,{title:"Clear Wallets Data",testID:"clear-wallets-data",onPress:(0,y.A)((function*(){yield c.A.serviceE2E.clearWalletsAndAccounts(),yield e.close()}))}),(0,j.jsx)(SectionPressItem,{title:"Clear Password",testID:"clear-password",onPress:function(){c.A.serviceE2E.resetPasswordSetStatus(),e.close()}})]})})}}),(0,j.jsx)(SectionPressItem,{title:"Startup Time",onPress:function(){i.Dialog.cancel({title:"Startup Time(ms)",renderContent:(0,j.jsx)(A._,{})})}}),(0,j.jsx)(SectionPressItem,{title:"Reset App Update Status",onPress:function(){c.A.serviceAppUpdate.reset()}}),(0,j.jsx)(SectionPressItem,{title:"Reset App Update Status to Failed",onPress:function(){c.A.serviceAppUpdate.notifyFailed()}}),a.Ay.isNativeAndroid?(0,j.jsx)(SectionPressItem,{copyable:!0,title:"Android Channel: "}):null,null,(0,j.jsx)(AddressBookDevSetting,{})]}):null},w=n(603465),S=n(788316),ThemeListItem=function(){var e,[{theme:t}]=(0,m.useSettingsPersistAtom)(),{setFreezeOnBlur:n}=(0,s.useContext)(w.k),r=(0,d.A)(),o=(0,s.useMemo)((function(){return[{label:r.formatMessage({id:"form__auto"}),description:"Follow the system",value:"system"},{label:r.formatMessage({id:"form__light"}),value:"light"},{label:r.formatMessage({id:"form__dark"}),value:"dark"}]}),[r]),a=(0,s.useCallback)((e=(0,y.A)((function*(e){n(!1),yield c.A.serviceSetting.setTheme(e),n(!0)})),function(t){return e.apply(this,arguments)}),[n]);return(0,j.jsx)(i.Select,{title:r.formatMessage({id:"form__theme"}),items:o,value:t,onChange:a,placement:"bottom-end",renderTrigger:function({label:e}){return(0,j.jsx)(p.c,{icon:"PaletteOutline",title:r.formatMessage({id:"form__theme"}),children:(0,j.jsxs)(i.XStack,{children:[(0,j.jsx)(p.c.Text,{primary:e,align:"right"}),(0,j.jsx)(p.c.DrillIn,{ml:"$1.5",name:"ChevronDownSmallSolid"})]})})}})},LanguageListItem=function(){var e,t=(0,S._)(),n=(0,d.A)(),[{locale:r}]=(0,m.useSettingsPersistAtom)(),o=(0,s.useCallback)((e=(0,y.A)((function*(e){yield c.A.serviceSetting.setLocale(e)})),function(t){return e.apply(this,arguments)}),[]);return(0,j.jsx)(i.Select,{title:n.formatMessage({id:"form__language"}),items:t,value:r,onChange:o,placement:"bottom-end",floatingPanelProps:{maxHeight:300},sheetProps:{snapPoints:[80],snapPointsMode:"percent"},renderTrigger:function({label:e}){return(0,j.jsx)(p.c,{icon:"GlobusOutline",title:n.formatMessage({id:"form__language"}),children:(0,j.jsxs)(i.XStack,{children:[(0,j.jsx)(p.c.Text,{primary:e,align:"right"}),(0,j.jsx)(p.c.DrillIn,{ml:"$1.5",name:"ChevronDownSmallSolid"})]})})}})},CurrencyListItem=function(){var e,t=(0,f.A)(),n=(0,s.useCallback)((function(){t.push(h.Pj.SettingCurrencyModal)}),[t]),r=(0,d.A)(),[i]=(0,m.useSettingsPersistAtom)(),o=null!=(e=i.currencyInfo?.id)?e:"";return(0,j.jsx)(p.c,{icon:"DollarOutline",title:r.formatMessage({id:"form__default_currency"}),drillIn:!0,onPress:n,children:(0,j.jsx)(p.c.Text,{primary:o.toUpperCase(),align:"right"})})},PreferenceSection=function(){return(0,j.jsxs)(Section,{title:"Preferences",children:[(0,j.jsx)(CurrencyListItem,{}),(0,j.jsx)(LanguageListItem,{}),(0,j.jsx)(ThemeListItem,{})]})},O=n(536612),_=n(390334),UrlExternalListItem=function({icon:e,title:t,url:n,drillIn:r}){var i=(0,s.useCallback)((function(){(0,l.Dr)(n)}),[n]);return(0,j.jsx)(p.c,{onPress:i,icon:e,title:t,drillIn:r})},C=a.Ay.isNativeAndroidGooglePlay||a.Ay.isNativeIOS,RateAppItem=function(){var e=(0,d.A)(),t=(0,s.useCallback)((function(){a.Ay.isNativeAndroidGooglePlay?(0,l.Dr)(o.M6):a.Ay.isNativeIOS&&(0,l.Dr)(o.nw)}),[e]);return C?(0,j.jsx)(p.c,{onPress:t,icon:"StarOutline",title:e.formatMessage({id:"form__rate_our_app"})}):null},k=n(460627),StateLogsItem=function(){var e=(0,d.A)(),t=(0,s.useCallback)((function(){i.Dialog.show({title:"Export State Logs",description:"This will help OneKey support debug any issue you might encounter. Please send to hi@onekey.so or OneKey support only.",confirmButtonProps:{variant:"primary"},onConfirmText:"Export",onConfirm:function(){var e=(new Date).toISOString().replace(/[-:.]/g,"");(0,k.u)(`OneKeyLogs-${e}`)}})}),[]);return(0,j.jsx)(p.c,{icon:"FileDownloadOutline",onPress:t,title:e.formatMessage({id:"content__state_logs"})})};function ListVersionItem(){var e=(0,O.S)();return e.isNeedUpdate?(0,j.jsx)(p.c,{onPress:e.toUpdatePreviewPage,icon:"InfoCircleOutline",iconProps:{color:"$textInfo"},title:"App Update Available",titleProps:{color:"$textInfo"},drillIn:!0,children:(0,j.jsx)(p.c.Text,{primary:(0,j.jsx)(i.Badge,{badgeType:"info",badgeSize:"lg",children:e.data.latestVersion}),align:"right"})}):(0,j.jsx)(p.c,{onPress:e.onViewReleaseInfo,icon:"InfoCircleOutline",title:"What’s New",drillIn:!0,children:(0,j.jsx)(p.c.Text,{primary:a.Ay.version,align:"right"})})}var ResourceSection=function(){var e=(0,_.P)({path:"articles/360002014776"}),t=(0,_.P)({path:"articles/360002003315"}),n=(0,_.P)({path:"requests/new"}),r=(0,_.P)({path:""}),s=(0,d.A)();return(0,j.jsxs)(Section,{title:"Resources",children:[(0,j.jsx)(ListVersionItem,{}),(0,j.jsx)(UrlExternalListItem,{icon:"HelpSupportOutline",title:"Help Center",url:r}),(0,j.jsx)(UrlExternalListItem,{icon:"EditOutline",title:"Submit a Request",url:n}),(0,j.jsx)(RateAppItem,{}),(0,j.jsx)(UrlExternalListItem,{icon:"PeopleOutline",title:s.formatMessage({id:"form__user_agreement"}),url:e}),(0,j.jsx)(UrlExternalListItem,{icon:"FileTextOutline",title:s.formatMessage({id:"terms__privacy_policy"}),url:t}),(0,j.jsx)(StateLogsItem,{})]})},D=n(247424),I=n(215189),M=n(461483),T=n(456628),F=n(15159),U=n(447479),ClearCacheOnAppContent=function(){return(0,j.jsx)(i.Dialog.Form,{formProps:{defaultValues:{tokenAndNFT:!0,transactionHistory:!0,swapHistory:!0,browserCache:!0,browserHistory:!1,connectSites:!1}},children:(0,j.jsxs)(i.Stack,{children:[(0,j.jsx)(i.Dialog.FormField,{name:"tokenAndNFT",children:(0,j.jsx)(i.Checkbox,{label:"Token & NFT Data"})}),(0,j.jsx)(i.Dialog.FormField,{name:"transactionHistory",children:(0,j.jsx)(i.Checkbox,{label:"Transaction History"})}),(0,j.jsx)(i.Dialog.FormField,{name:"swapHistory",children:(0,j.jsx)(i.Checkbox,{label:"Swap History"})}),(0,j.jsx)(i.Dialog.FormField,{name:"browserCache",children:(0,j.jsx)(i.Checkbox,{label:"Browser Cache"})}),(0,j.jsx)(i.Dialog.FormField,{name:"browserHistory",children:(0,j.jsx)(i.Checkbox,{label:"Browser History, Bookmarks, Pins"})}),(0,j.jsx)(i.Dialog.FormField,{name:"connectSites",children:(0,j.jsx)(i.Checkbox,{label:"Connected Sites"})})]})})},CleanDataItem=function(){var{copyText:e}=(0,i.useClipboard)(),t=(0,S.Q)();return(0,j.jsx)(i.ActionList,{title:"Clear Data",renderTrigger:(0,j.jsx)(p.c,{title:"Clear Data",icon:"FolderDeleteOutline",testID:"setting-clear-data",children:(0,j.jsx)(p.c.DrillIn,{name:"ChevronDownSmallOutline"})}),items:[{label:"Clear Cache on App",onPress:function(){var t;i.Dialog.show({title:"Clear cache on App",renderContent:(0,j.jsx)(ClearCacheOnAppContent,{}),tone:"destructive",confirmButtonProps:{disabledOn:function({getForm:e}){var{getValues:t}=e()||{};if(t){var n=t();return!Object.values(n).some((function(e){return Boolean(e)}))}return!0}},onConfirm:(t=(0,y.A)((function*(t){var n=t.getForm()?.getValues();n&&(yield c.A.serviceSetting.clearCacheOnApp(n),n?.browserCache&&i.Dialog.show({title:"Clear Browser Cache",description:"Open this link in the browser to continue clearing.\n                    chrome://settings/clearBrowserData",onConfirm:function(){e("chrome://settings/clearBrowserData")},showCancelButton:!1,confirmButtonProps:{variant:"primary",size:"large",icon:"Copy1Outline"}}))})),function onConfirm(e){return t.apply(this,arguments)})})}},{label:"Clear Pending Transactions",onPress:function(){i.Dialog.show({title:"Clear Pending Transactions",description:"Clear the pending data in the local history record.",tone:"destructive",onConfirmText:"Clear",onConfirm:function(){c.A.serviceSetting.clearPendingTransaction()}})}},{label:"Reset App",destructive:!0,onPress:t,testID:"setting-erase-data"}]})},AppAutoLockItem=function(){var[{isPasswordSet:e,appLockDuration:t}]=(0,T.MW)(),n=(0,f.A)(),r=(0,s.useCallback)((function(){n.push(h.Pj.SettingAppAutoLockModal)}),[n]),i=(0,d.A)(),o=(0,U.I)(),a=(0,s.useMemo)((function(){var e,n=o.find((function(e){return e.value===String(t)}));return null!=(e=n?.title)?e:""}),[o,t]);return e?(0,j.jsx)(p.c,{onPress:r,icon:"ClockTimeHistoryOutline",title:i.formatMessage({id:"form__app_lock"}),drillIn:!0,children:(0,j.jsx)(p.c.Text,{primary:a,align:"right"})}):null},SetPasswordItem=function(){var e=(0,d.A)();return(0,j.jsx)(p.c,{onPress:function(){c.A.servicePassword.promptPasswordVerify()},icon:"KeyOutline",title:e.formatMessage({id:"title__set_password"}),drillIn:!0})},ChangePasswordItem=function(){var e=(0,d.A)(),t=(0,s.useCallback)((0,y.A)((function*(){var t,n=yield c.A.servicePassword.promptPasswordVerify({reason:F.a.Security}),r=i.Dialog.show({title:e.formatMessage({id:"form__change_password"}),renderContent:(0,j.jsx)(M.A,{oldEncodedPassword:n.password,onUpdateRes:(t=(0,y.A)((function*(e){e&&(yield r.close())})),function(e){return t.apply(this,arguments)})}),showFooter:!1})})),[e]);return(0,j.jsx)(p.c,{onPress:t,icon:"KeyOutline",title:e.formatMessage({id:"form__change_password"}),drillIn:!0})},PasswordItem=function(){var[{isPasswordSet:e}]=(0,T.MW)();return e?(0,j.jsx)(ChangePasswordItem,{}):(0,j.jsx)(SetPasswordItem,{})},FaceIdItem=function(){var e=(0,d.A)(),[{isPasswordSet:t}]=(0,T.MW)(),[{isSupport:n,authType:r}]=(0,T.Bd)(),[{isSupport:s}]=(0,T.GZ)(),i=e.formatMessage({id:"form__touch_id"}),o="TouchIdSolid";return n&&(r.includes(D.h.FACIAL_RECOGNITION)||r.includes(D.h.IRIS))&&(i=e.formatMessage({id:"content__face_id"}),o="FaceIdSolid"),t&&(n||s)?(0,j.jsx)(p.c,{icon:o,title:i,children:(0,j.jsx)(I.V,{})}):null},ProtectionItem=function(){var e=(0,d.A)(),[{isPasswordSet:t}]=(0,T.MW)(),n=(0,f.A)(),r=(0,s.useCallback)((function(){n.push(h.Pj.SettingProtectModal)}),[n]);return t?(0,j.jsx)(p.c,{onPress:r,icon:"ShieldCheckDoneOutline",title:e.formatMessage({id:"action__protection"}),drillIn:!0}):null},ConnectedSitesItem=function(){var e=(0,f.A)(),t=(0,s.useCallback)((function(){e.pushModal(h.ry.DAppConnectionModal,{screen:h.EB.ConnectionList})}),[e]);return(0,j.jsx)(p.c,{title:"Connected Sites",icon:"LinkOutline",drillIn:!0,onPress:t})},SignatureRecordItem=function(){var e=(0,f.A)(),t=(0,s.useCallback)((function(){e.push(h.Pj.SettingSignatureRecordModal)}),[e]);return(0,j.jsx)(p.c,{onPress:t,icon:"NoteOutline",title:"Signature Record",drillIn:!0})},SecuritySection=function(){var e=(0,d.A)();return(0,j.jsxs)(Section,{title:e.formatMessage({id:"form__security_uppercase"}),children:[(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(FaceIdItem,{})}),(0,j.jsx)(AppAutoLockItem,{}),(0,j.jsx)(PasswordItem,{}),(0,j.jsx)(ConnectedSitesItem,{}),(0,j.jsx)(SignatureRecordItem,{}),(0,j.jsx)(ProtectionItem,{}),(0,j.jsx)(CleanDataItem,{})]})},SocialButton=function({icon:e,url:t}){var n=(0,s.useCallback)((function(){(0,l.Dr)(t)}),[t]);return(0,j.jsx)(i.IconButton,{bg:"$bgSubdued",width:"$14",height:"$14",icon:e,borderRadius:"$full",onPress:n})},SocialButtonGroup=function(){var e;return(0,j.jsxs)(i.YStack,{children:[(0,j.jsx)(i.XStack,{justifyContent:"center",children:(0,j.jsxs)(i.XStack,{space:"$3",paddingVertical:"$3",my:"$3",children:[(0,j.jsx)(SocialButton,{icon:"OnekeyBrand",url:o.eG}),(0,j.jsx)(SocialButton,{icon:"DiscordBrand",url:o.zp}),(0,j.jsx)(SocialButton,{icon:"Xbrand",url:o.Gz}),(0,j.jsx)(SocialButton,{icon:"GithubBrand",url:o.Oe})]})}),(0,j.jsx)(i.XStack,{justifyContent:"center",py:"$4",children:(0,j.jsxs)(i.SizableText,{selectable:!1,color:"$textSubdued",onPress:handleOpenDevMode,testID:"setting-version",children:["Version: ",null!=(e=a.Ay.version)?e:"Unknown"," - ",a.Ay.buildNumber]})})]})};function SettingListModal(){return(0,j.jsx)(i.Page,{children:(0,j.jsx)(i.ScrollView,{children:(0,j.jsxs)(i.Stack,{pb:"$2",children:[(0,j.jsx)(DefaultSection,{}),(0,j.jsx)(PreferenceSection,{}),(0,j.jsx)(SecuritySection,{}),(0,j.jsx)(AdvancedSection,{}),(0,j.jsx)(ResourceSection,{}),(0,j.jsx)(DevSettingsSection,{}),(0,j.jsx)(SocialButtonGroup,{})]})})})}},639451:(e,t,n)=>{n.d(t,{Ed:()=>a,Xo:()=>o,xf:()=>useDownloadProgress});var r,s,i=n(586330),o=(r=(0,i.A)((function*(){})),function downloadPackage(){return r.apply(this,arguments)}),a=(s=(0,i.A)((function*(){})),function installPackage(){return s.apply(this,arguments)}),useDownloadProgress=function(){return 0}}}]);