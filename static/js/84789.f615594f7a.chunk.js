"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[84789],{484789:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var l=n(503668),i=n.n(l),a=n(586330),u=n(514041),s=n(490343),o=n(318822),r=(n(663522),n(310955)),c=n(791088),d=n(911998),f=n(831085);function EmptyGuide(){return(0,f.jsx)(s.Stack,{w:"100%",px:22,py:"$2.5",alignItems:"center",justifyContent:"center",children:(0,f.jsx)(s.Image,{w:"$80",h:341,source:n(111340)})})}const p=function DefaultWalletSettingsModal(){var e,{result:t,run:n}=(0,d.yk)((0,a.A)((function*(){return r.A.serviceContextMenu.getDefaultWalletSettingsWithIcon()})),[]),l=(0,u.useRef)(null);(0,u.useEffect)((function(){t&&(l.current=t)}),[t]),(0,u.useEffect)((function(){return o.iL.addListener(o.Tu.ExtensionContextMenuUpdate,n),function(){o.iL.removeListener(o.Tu.ExtensionContextMenuUpdate,n)}}),[n]);var p,h,x,y=(0,u.useCallback)((p=(0,a.A)((function*(e){yield r.A.serviceContextMenu.setIsDefaultWallet(e)})),function(e){return p.apply(this,arguments)}),[]),g=(0,u.useCallback)((function(){return new Promise((function(e,t){var n;chrome.tabs.query({active:!0,currentWindow:!0},(n=(0,a.A)((function*(n){if(n[0])try{var l,i=new URL(null!=(l=n[0]?.url)?l:"").origin;e(i)}catch(e){t(e)}})),function(e){return n.apply(this,arguments)}))}))}),[]),w=(0,u.useCallback)((h=(0,a.A)((function*(e){})),function(e){return h.apply(this,arguments)}),[g]),m=(0,u.useCallback)((0,a.A)((function*(){var e=!t?.isDefaultWallet;yield y(e),s.Toast.success({title:e?"Default Changed to OneKey":"OneKey Default Canceled",message:e?"OneKey is now your default wallet for this dApp.":"Refresh the page to retry with a different wallet."}),yield w(),setTimeout((function(){n()}),200)})),[w,t?.isDefaultWallet,n,y]),D=(0,u.useCallback)((x=(0,a.A)((function*(e){yield r.A.serviceContextMenu.removeExcludedDApp(e),t?.isDefaultWallet&&s.Toast.success({title:"Default Changed to OneKey",message:"OneKey is now your default wallet for this dApp."}),yield w(e),n()})),function(e){return x.apply(this,arguments)}),[n,t?.isDefaultWallet,w]),b=(0,u.useMemo)((function(){return!("boolean"==typeof t?.isDefaultWallet&&!t.isDefaultWallet)}),[t?.isDefaultWallet]),k=(0,u.useCallback)((function({item:e}){return(0,f.jsx)(c.c,{title:new URL(e.origin).hostname,titleProps:{style:{wordBreak:"break-all"}},avatarProps:{src:e.logo,fallbackProps:{children:(0,f.jsx)(s.Skeleton,{w:"$10",h:"$10"})}},onPress:function(){return D(e.origin)},children:(0,f.jsx)(c.c.IconButton,{icon:"DeleteOutline",iconProps:{color:"$iconSubdued"}})},e.origin)}),[D]),C=(0,u.useCallback)((function(){return i()(t?.excludedDappListWithLogo)?null:0===t.excludedDappListWithLogo.length?(0,f.jsx)(EmptyGuide,{}):(0,f.jsx)(s.ListView,{keyExtractor:function(e){return e.origin},data:t.excludedDappListWithLogo,estimatedItemSize:"$10",renderItem:k})}),[t?.excludedDappListWithLogo,k]);return(0,f.jsxs)(s.Page,{children:[(0,f.jsx)(s.Page.Header,{title:"Default Wallet Settings"}),(0,f.jsxs)(s.Page.Body,{children:[(0,f.jsx)(c.c,{title:"Set OneKey as default wallet",subtitle:"Use OneKey as the default wallet to connect to dApps.",children:(0,f.jsx)(s.Switch,{size:s.ESwitchSize.small,value:null==(e=t?.isDefaultWallet)||e,onChange:m})}),b?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s.Divider,{my:"$2.5"}),(0,f.jsx)(c.c,{title:"Excluded dApps",subtitle:"Right-click blank space, select the option below to exclude."}),C()]}):null]})]})}},111340:(e,t,n)=>{e.exports=n.p+"static/media/extension_menu.7018d4b728ea0e4d4540.png"}}]);