(self.webpackChunkweb=self.webpackChunkweb||[]).push([[44775],{940916:(e,t,r)=>{"use strict";r.d(t,{G:()=>b});var n=r(482451),o=r.n(n),i=r(324586),s=r(586330),c=r(230414),a=r(507140),u=r(606777),f=r(554902),l=r(180556),y=r(929296),p=r(195309),d=r(972715),h=r(901048).Buffer;function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,d.A)(e);if(t){var o=(0,d.A)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var v=function(e){(0,y.A)(ChainSigner,e);var t=_createSuper(ChainSigner);function ChainSigner(e,r,n){var o,i=(0,f.N)(n,{key:e,chainCode:h.alloc(32)},r).key.toString("hex");return(o=t.call(this,i,n)).encryptedPrivateKey=e,o.password=r,o.curve=n,o}var r,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,f.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(r=(0,s.A)((function*(){return u.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return r.apply(this,arguments)}),n.sign=function sign(e){var t=(0,f._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([t.slice(0,-1),t[t.length-1]]):Promise.resolve([t,0])},(0,c.A)(ChainSigner)}(function(){function Verifier(e,t){this.curve=t,this.compressedPublicKey=h.from(e,"hex"),this.uncompressedPublicKey=(0,f.sA)(t,this.compressedPublicKey)}var e,t=Verifier.prototype;return t.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},t.getPubkeyHex=(e=(0,s.A)((function*(e){return u.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(t){return e.apply(this,arguments)}),t.verify=function verify(){return Promise.resolve(h.from([]))},t.verifySignature=function verifySignature({publicKey:e,digest:t,signature:r}){var n=u.A.toBuffer(e),o=u.A.toBuffer(t),i=u.A.toBuffer(r),{curve:s}=this,c=(0,f.MX)(s,n,o,i);return Promise.resolve(c)},(0,c.A)(Verifier)}());function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,i.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(){function CoreChainApiBase(){}var e,t,r,n,i,y=CoreChainApiBase.prototype;return y.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return f.ev;case"secp256k1":return f.bI;case"nistp256":return f.OX;default:throw new a.He("Unsupported curve")}},y.baseCreateSigner=(e=(0,s.A)((function*({curve:e,privateKey:t,password:r}){if(void 0===r)throw new a.He("Software signing requires a password.");var n=u.A.toBuffer(t);return Promise.resolve(new v(n,r,e))})),function baseCreateSigner(t){return e.apply(this,arguments)}),y.baseGetSingleSigner=(t=(0,s.A)((function*({payload:e,curve:t}){var r=yield this.getPrivateKeys(e),n=e.account.path,o=r[n],i=e.account.relPaths?.[0];if(!o&&i&&(o=r[[n,i].join("/")]),!o)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:t,privateKey:o,password:e.password})})),function baseGetSingleSigner(e){return t.apply(this,arguments)}),y.baseGetPrivateKeys=(r=(0,s.A)((function*({payload:e,curve:t}){var{credentials:r,account:n,password:o}=e,i={};if(r.hd&&r.imported)throw new a.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(r.hd){var{relPaths:s}=n;i=yield this.baseGetPrivateKeysHd({curve:t,account:n,hdCredential:r.hd,password:o,relPaths:s})}if(r.imported){var{privateKey:c}=(0,f.VV)({password:o,credential:r.imported}),l=u.A.bytesToHex((0,f.w)(o,c));i[n.path]=l,i[""]=l}if(!Object.keys(i).length)throw new Error("No private keys found");return i})),function baseGetPrivateKeys(e){return r.apply(this,arguments)}),y.baseGetPrivateKeysHd=(n=(0,s.A)((function*({curve:e,password:t,account:r,relPaths:n,hdCredential:o}){var{path:i}=r,s=i.split("/"),c=n||[s.pop()],l=s.join("/");if(0===c.length)throw new a.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,f.Wu)(e,o,t,l,c).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:u.A.bytesToHex(t.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),y.baseGetAddressesFromHd=(i=(0,s.A)((function*(e,t){var r=this,{curve:n,generateFrom:i}=t,{template:c,hdCredential:y,password:p,indexes:d}=e,{pathPrefix:h,pathSuffix:v}=(0,l.Ah)(c),b=d.map((function(e){return v.replace("{index}",e.toString())})),g="privateKey"===i,m=[],w=[];g?w=(0,f.Wu)(n,y,p,h,b):m=(0,f.W6)(n,y,p,h,b);var P=g?w:m;if(P.length!==d.length)throw new a.He("Unable to get publick key.");var A,S=yield Promise.all(P.map((A=(0,s.A)((function*(t){var n,i,{path:s,extendedKey:{key:c}}=t;if(g){var a=u.A.bytesToHex((0,f.Yc)(p,c));i=yield r.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:a,privateKeyInfo:t})}else n=c.toString("hex"),i=yield r.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:t});return o()({publicKey:n,path:s},i)})),function(e){return A.apply(this,arguments)})));return{addresses:S}})),function baseGetAddressesFromHd(e,t){return i.apply(this,arguments)}),(0,c.A)(CoreChainApiBase)}()},452237:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(230414),o=r(929296),i=r(195309),s=r(972715);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var o=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,i.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,o.A)(CoreChainImported,e);var t=_createSuper(CoreChainImported);function CoreChainImported(){return t.apply(this,arguments)}return(0,n.A)(CoreChainImported)}(r(11635).A)},11635:(e,t,r)=>{"use strict";r.d(t,{A:()=>q});var n=r(586330),o=r(230414),i=r(929296),s=r(195309),c=r(972715),a=r(89729),u=r(554902),f=r(825145),l=r(606777),y=r(940916),p=r(324586),d=r(271326),h=r.n(d),v=r(705372),b=r(36223),g=r.n(b)(),m=r(901048).Buffer;function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,p.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var{Transaction:w}=g;function _signTransactionWithSigner(){return(_signTransactionWithSigner=(0,n.A)((function*(e,t){var r=new w(e.encodedTx),n=(0,a.S)(r.encode(!1)),[o,i]=yield t.sign(m.from(n.slice(2),"hex")),[s,c]=[o.slice(0,32),o.slice(32)],u=new w(_objectSpread(_objectSpread({},e.encodedTx),{},{r:(0,v.bj)(`0x${s.toString("hex")}`,32),s:(0,v.bj)(`0x${c.toString("hex")}`,32),v:i}));return{encodedTx:e.encodedTx,digest:n,txid:u.hash,rawTx:u.serialize()}}))).apply(this,arguments)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function index_es_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?index_es_ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):index_es_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n,o=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function*toFailures(e,t){!0===e||(!1===e?yield t.fail():yield*e)}function iteratorShift(e){const{done:t,value:r}=e.next();return t?void 0:r}class Struct{constructor(e){const{type:t,schema:r,coercer:n=(e=>e),validator:o=(()=>[]),refiner:i=(()=>[])}=e;this.type=t,this.schema=r,this.coercer=n,this.validator=o,this.refiner=i}}class StructError extends TypeError{constructor(e,t){const{path:r,value:n,type:o,branch:i}=e,s=_objectWithoutProperties(e,["path","value","type","branch"]);let c;super(`Expected a value of type \`${o}\`${r.length?` for \`${r.join(".")}\``:""} but received \`${JSON.stringify(n)}\`.`),this.value=n,Object.assign(this,s),this.type=o,this.path=r,this.branch=i,this.failures=function failures(){return c||(c=[e,...t]),c},this.stack=(new Error).stack,this.__proto__=StructError.prototype}}function coerce(e,t){const r=t.coercer(e);return function assert(e,t){const r=validate(e,t);if(r[0])throw r[0]}(r,t),r}function is(e,t){return!validate(e,t)[0]}function validate(e,t,r=!1){r&&(e=t.coercer(e));const n=check(e,t),o=iteratorShift(n);if(o){return[new StructError(o,n),void 0]}return[void 0,e]}function*check(e,t,r=[],n=[]){const{type:o}=t,i={value:e,type:o,branch:n,path:r,fail:(t={})=>_objectSpread2({value:e,type:o,path:r,branch:[...n,e]},t),check:(e,t,o,i)=>check(e,t,void 0!==o?[...r,i]:r,void 0!==o?[...n,o]:n)},s=toFailures(t.validator(e,i),i),c=iteratorShift(s);c?(yield c,yield*s):yield*toFailures(t.refiner(e,i),i)}function pattern(e,t){return refinement(e,`${e.type} & Pattern<${t.source}>`,(e=>t.test(e)))}function refinement(e,t,r){const n=e.refiner;return new Struct(_objectSpread2(_objectSpread2({},e),{},{type:t,*refiner(e,t){yield*toFailures(n(e,t),t),yield*toFailures(r(e,t),t)}}))}function array(e){return new Struct({type:`Array<${e?e.type:"unknown"}>`,schema:e,coercer:t=>e&&Array.isArray(t)?t.map((t=>coerce(t,e))):t,*validator(t,r){if(Array.isArray(t)){if(e)for(const[n,o]of t.entries())yield*r.check(o,e,t,n)}else yield r.fail()}})}function intersection(e){return struct(e.map((e=>e.type)).join(" & "),(function*(t,r){for(const n of e)yield*r.check(t,n)}))}function never(){return struct("never",(()=>!1))}function number(){return struct("number",(e=>"number"==typeof e&&!isNaN(e)))}function object(e){const t=e?Object.keys(e):[],r=never();return new Struct({type:e?`Object<{${t.join(",")}}>`:"Object",schema:e||null,coercer:e?createObjectCoercer(e):e=>e,*validator(n,o){if("object"==typeof n&&null!=n){if(e){const i=new Set(Object.keys(n));for(const r of t){i.delete(r);const t=e[r],s=n[r];yield*o.check(s,t,n,r)}for(const e of i){const t=n[e];yield*o.check(t,r,n,e)}}}else yield o.fail()}})}function optional(e){return new Struct({type:`${e.type}?`,schema:e.schema,validator:(t,r)=>void 0===t||r.check(t,e)})}function record(e,t){return struct(`Record<${e.type},${t.type}>`,(function*(r,n){if("object"==typeof r&&null!=r)for(const o in r){const i=r[o];yield*n.check(o,e,r,o),yield*n.check(i,t,r,o)}else yield n.fail()}))}function string(){return struct("string",(e=>"string"==typeof e))}function struct(e,t){return new Struct({type:e,validator:t,schema:null})}function type(e){const t=Object.keys(e);return struct(`Type<{${t.join(",")}}>`,(function*(r,n){if("object"==typeof r&&null!=r)for(const o of t){const t=e[o],i=r[o];yield*n.check(i,t,r,o)}else yield n.fail()}))}function union(e){return struct(`${e.map((e=>e.type)).join(" | ")}`,(function*(t,r){for(const n of e){const[...e]=r.check(t,n);if(0===e.length)return}yield r.fail()}))}function createObjectCoercer(e){const t=Object.keys(e);return r=>{if("object"!=typeof r||null==r)return r;const n={},o=new Set(Object.keys(r));for(const i of t){o.delete(i);const t=e[i],s=r[i];n[i]=coerce(s,t)}for(const e of o)n[e]=r[e];return n}}const P=/^\w+/,A=/^(.*)\[([0-9]*?)]$/,S=/^bytes([0-9]{1,2})$/,j=/^u?int([0-9]{0,3})$/,O=["address","bool","bytes","string"],x=refinement(string(),"Type",((e,t)=>isValidType(t.branch[0].types,e))),k=object({name:string(),type:x}),C=object({name:optional(string()),version:optional(string()),chainId:optional(union([string(),number()])),verifyingContract:optional(pattern(string(),/^0x[0-9a-z]{40}$/i)),salt:optional(union([array(number()),pattern(string(),/^0x[0-9a-z]{64}$/i)]))}),_=object({types:intersection([type({CIP23Domain:array(k)}),record(string(),array(k))]),primaryType:string(),domain:C,message:object()}),B=object({types:intersection([type({EIP712Domain:array(k)}),record(string(),array(k))]),primaryType:string(),domain:C,message:object()}),isValidType=(e,t)=>{if(O.includes(t))return!0;if(e[t])return!0;if(t.match(A)){const r=t.match(P);if(r){const t=r[0];return isValidType(e,t)}}const r=t.match(S);if(r){const e=Number(r[1]);if(e>=1&&e<=32)return!0}const n=t.match(j);if(n){const e=Number(n[1]);if(e>=8&&e<=256&&e%8==0)return!0}return!1};var K=r(663793),$=r.n(K),I=r(901048).Buffer;const keccak256=(e,t)=>$()("keccak256").update(e,t).digest(),toBuffer=(e,t)=>t?I.from(e,t):e.startsWith("0x")?I.from(e.substring(2),"hex"):I.from(e,"hex");var T=r(901048).Buffer;const buffer_concat=(e,t,r)=>new Uint8Array([...e.subarray(0,null!=r?r:e.length),...t,...e.subarray(null!=r?r:e.length)]),concatMultiple=e=>e.reduce(((e,t)=>{const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}),new Uint8Array(0)),addPadding=(e,t=32)=>{const r=T.alloc(Math.max(t-e.length,0),0);return buffer_concat(e,r)},buffer_toBuffer=e=>{if(T.isBuffer(e)||e instanceof Uint8Array)return e;if("string"==typeof e){const t=e.startsWith("0x")?e.substring(2):e;return T.from(t,"hex")}const t=e.toString(16);return T.from(t.padStart(64,"0").slice(0,64),"hex")},toNumber=e=>{const t=toHex(e);return 0===t.length?BigInt(0):BigInt(`0x${t}`)},numberToHex=e=>("0"+e.toString(16)).slice(-2),toHex=e=>Array.from(e).map(numberToHex).join("");var E=r(901048).Buffer;var N=r(901048).Buffer;const encodeBytes=(e,t)=>{const r=buffer_toBuffer(t),n=32*Math.ceil(r.byteLength/32);return buffer_concat(e,N.concat([buffer_toBuffer(r.byteLength),addPadding(r,n)]))},decodeBytes=(e,t)=>{const r=Number(toNumber(e.subarray(0,32))),n=toNumber(e.subarray(r,r+32));return t.subarray(32,32+Number(n))},H=/^bytes([0-9]{1,2})$/,getByteLength=e=>{var t;const r=null===(t=e.match(H))||void 0===t?void 0:t[1];if(r){const e=Number(r);if(e<=0||e>32)throw new Error("Invalid type: length is out of range");return e}throw new Error("Invalid type: no length")},R=/^u?int([0-9]*)?$/,isSigned=e=>e.startsWith("i"),inRange=(e,t)=>{const r=BigInt((e=>{var t,r;const n=null!==(t=null===(r=e.match(R))||void 0===r?void 0:r[1])&&void 0!==t?t:"256";return Number(n)})(t));if(isSigned(t)){const t=2n**(r-1n)-1n;return e>=-t-1n&&e<=t}return e>=0n&&e<=2n**r-1n};var F=r(901048).Buffer;var D=r(901048).Buffer;const G=/^(.*)\[]$/,isArray=e=>G.test(e),getType=e=>e.match(G)[1],W={address:{encode:(e,t)=>{if(42!==t.length)throw new Error("Invalid address length");const r=E.alloc(32);return r.write(t.substring(2),12,"hex"),buffer_concat(e,r)},decode:e=>{const t=e.subarray(-20);return`0x${toHex(t)}`}},array:{dynamic:!0,encode:(e,t,r)=>{if(!isArray(r))throw new Error("Invalid type: type is not array");const n=getType(r),o=buffer_toBuffer(t.length),i=buffer_concat(e,o);return pack(i,t,new Array(t.length).fill(n))},decode:(e,t,r)=>{if(!isArray(r))throw new Error("Invalid type: type is not array");const n=getType(r),o=Number(toNumber(e)),i=Number(toNumber(t.subarray(o,o+32))),s=o+32,c=t.subarray(s);return array_unpack(c,new Array(i).fill(n))}},bytes:{dynamic:!0,encode:encodeBytes,decode:decodeBytes},fixedBytes:{encode:(e,t,r)=>{const n=getByteLength(r),o=buffer_toBuffer(t);if(o.length>n)throw new Error(`Buffer is too long, expected ${n}, got ${o.length}`);return buffer_concat(e,addPadding(o))},decode:(e,t,r)=>{const n=getByteLength(r);return e.subarray(0,n)}},number:{encode:(e,t,r)=>{const n=(e=>"bigint"==typeof e?e:BigInt(e))(t);if(!inRange(n,r))throw new Error(`Cannot encode number: value is out of range for type ${r}`);return isSigned(r)?buffer_concat(e,((e,t)=>{const r=new Uint8Array(t);for(let t=0;t<r.length;t++)r[t]=Number(BigInt.asUintN(8,e)),e>>=8n;return r.reverse()})(n,32)):buffer_concat(e,buffer_toBuffer(n))},decode:(e,t,r)=>isSigned(r)?(e=>{const t=buffer_toBuffer(e);let r=0n;for(const e of t)r=(r<<8n)+BigInt(e);return BigInt.asIntN(8*t.length,r)})(e):toNumber(e)},string:{dynamic:!0,encode:(e,t)=>{const r=F.from(t,"utf8");return encodeBytes(e,r)},decode:(e,t)=>(e=>"undefined"!=typeof window&&window.TextDecoder?new TextDecoder("utf-8").decode(e):new(r(749208).TextDecoder)("utf-8").decode(e))(decodeBytes(e,t))}},getParser=e=>{if(W[e])return W[e];if((e=>H.test(e))(e))return W.fixedBytes;if((e=>R.test(e))(e)||"bool"===e)return W.number;if(isArray(e))return W.array;throw new Error(`type "${e}" is not supported`)},pack=(e,t,r)=>{const{staticBuffer:n,dynamicBuffer:o,updateFunctions:i}=r.reduce((({staticBuffer:e,dynamicBuffer:r,updateFunctions:n},o,i)=>{const s=getParser(o),c=t[i];if(s.dynamic){const t=r.length,i=e.length,update=e=>concatMultiple([e.subarray(0,i),buffer_toBuffer(e.length+t),e.subarray(i+32)]);return{staticBuffer:buffer_concat(e,D.alloc(32,0)),dynamicBuffer:s.encode(r,c,o),updateFunctions:[...n,update]}}return{staticBuffer:s.encode(e,c,o),dynamicBuffer:r,updateFunctions:n}}),{staticBuffer:new Uint8Array(0),dynamicBuffer:new Uint8Array(0),updateFunctions:[]}),s=i.reduce(((e,t)=>t(e)),n);return concatMultiple([e,s,o])};const array_unpack=(e,t)=>{const r=function*iterate(e,t){for(let r=0;r<e.length;r+=t)yield e.slice(r,r+t);return e}(e,32);return t.map((t=>{const{value:n,done:o}=r.next();if(o)throw new Error("input data has an invalid length");return getParser(t).decode(n,e,t)}))};var M=r(901048).Buffer;const encode=(e,t)=>{const r=e.map((e=>"string"==typeof e?e:e.type));return pack(M.alloc(0),t,r)};var U=r(901048).Buffer;const abi_encode=(e,t)=>(t.map((function(t,r,n){"address"===e[r]&&(n[r]=function normalizeAddress(e){if(!h().hasNetworkPrefix(e))return e;return"0x"+h().decode(e).hexAddress.toString("hex")}(t))})),U.from(encode(e,t)));var V=r(901048).Buffer;const L=V.from("1901","hex"),getDependencies=(e,t,r=[])=>{if(!is(n=e,_)&&!is(n,B))throw new Error("Typed data does not match JSON schema");var n;const o=t.match(P)[0];return r.includes(o)?r:e.types[o]?[o,...e.types[o].reduce(((t,r)=>{const n=o===r.type?[]:getDependencies(e,r.type,t).filter((e=>!t.includes(e)));return[...t,...n]}),[])]:r},getTypeHash=(e,t)=>keccak256(((e,t)=>{const[r,...n]=getDependencies(e,t);return[r,...n.sort()].map((t=>`${t}(${e.types[t].map((e=>`${e.type} ${e.name}`))})`)).join("")})(e,t),"utf8"),encodeValue=(e,t,r)=>{const n=t.match(A);if(n){const t=n[1],o=Number(n[2])||void 0;if(!Array.isArray(r))throw new Error("Cannot encode data: value is not of array type");if(o&&r.length!==o)throw new Error(`Cannot encode data: expected length of ${o}, but got ${r.length}`);const i=r.map((r=>encodeValue(e,t,r))),s=i.map((e=>e[0])),c=i.map((e=>e[1]));return["bytes32",keccak256(abi_encode(s,c))]}return e.types[t]?["bytes32",getStructHash(e,t,r)]:"string"===t?["bytes32",keccak256(r,"utf8")]:"bytes"===t?["bytes32",keccak256(V.isBuffer(r)?r:toBuffer(r),"hex")]:[t,r]},getStructHash=(e,t,r)=>keccak256(((e,t,r)=>{const[n,o]=e.types[t].reduce((([t,n],o)=>{if(void 0===r[o.name]||null===r[o.name])return[[...t,"bytes32"],[...n,"0x0000000000000000000000000000000000000000000000000000000000000000"]];const i=r[o.name],[s,c]=encodeValue(e,o.type,i);return[[...t,s],[...n,c]]}),[["bytes32"],[getTypeHash(e,t)]]);return abi_encode(n,o)})(e,t,r));var z=r(161024);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,c.A)(e);if(t){var o=(0,c.A)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,s.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var Y="secp256k1",{Message:J,PersonalMessage:X}=g;function hashCfxMessage(e){var{type:t,message:r}=e;switch(t){case void 0:case z.$.ETH_SIGN:return new J(r).hash;case z.$.PERSONAL_SIGN:return new X(r).hash;case z.$.TYPED_DATA_V3:case z.$.TYPED_DATA_V4:return(0,a.S)(((e,t,r="CIP23Domain")=>{const n=V.concat([L,getStructHash(e,r,e.domain),getStructHash(e,e.primaryType,e.message)]);return t?keccak256(n):n})(JSON.parse(r)));default:throw new Error(`Invalid messageType: ${t}`)}}var q=function(e){(0,i.A)(CoreChainSoftware,e);var t=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return t.apply(this,arguments)}var r,s,c,y,p,h,v=CoreChainSoftware.prototype;return v.getPrivateKeys=(r=(0,n.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:Y})})),function getPrivateKeys(e){return r.apply(this,arguments)}),v.signTransaction=(s=(0,n.A)((function*(e){var{unsignedTx:t}=e;return function signTransactionWithSigner(e,t){return _signTransactionWithSigner.apply(this,arguments)}(t,yield this.baseGetSingleSigner({payload:e,curve:Y}))})),function signTransaction(e){return s.apply(this,arguments)}),v.signMessage=(c=(0,n.A)((function*(e){var t=e.unsignedMsg,r=yield this.baseGetSingleSigner({payload:e,curve:Y});return J.sign(`0x${(yield r.getPrvkey()).toString("hex")}`,hashCfxMessage(t))})),function signMessage(e){return c.apply(this,arguments)}),v.getAddressFromPrivate=(y=(0,n.A)((function*(e){var{privateKeyRaw:t}=e,r=l.A.toBuffer(t),n=u.bI.publicFromPrivate(r);return this.getAddressFromPublic({publicKey:l.A.bytesToHex(n),networkInfo:e.networkInfo})})),function getAddressFromPrivate(e){return y.apply(this,arguments)}),v.getAddressFromPublic=(p=(0,n.A)((function*(e){var{publicKey:t}=e,r=l.A.toBuffer(t),n=(0,u.sA)(Y,r),{chainId:o,networkId:i}=(0,f.wT)(e.networkInfo),s=yield function pubkeyToCfxAddress(e,t){var r=e.slice(1),n=function ethAddressToCfxAddress(e){return`0x1${e.toLowerCase().slice(1)}`}((0,a.S)(r).slice(-40)),o=parseInt(t);return Promise.resolve((0,d.encode)(n,o))}(n,(0,f.wT)(o));return Promise.resolve({address:"",addresses:{[(0,f.wT)(i)]:s},publicKey:t})})),function getAddressFromPublic(e){return p.apply(this,arguments)}),v.getAddressesFromHd=(h=(0,n.A)((function*(e){return this.baseGetAddressesFromHd(e,{curve:Y})})),function getAddressesFromHd(e){return h.apply(this,arguments)}),(0,o.A)(CoreChainSoftware)}(y.G)},969459:()=>{}}]);