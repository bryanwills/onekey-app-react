"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13749],{313749:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var r=t(324586),a=t(586330),i=t(514041),o=t(490343),s=t(325809),c=t(162616),u=t(351574),d=t(147882),l=t(714191),p=t(654004),f=t(831085);function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ScanQrCameraDemo=function(){var e,[n,t]=(0,i.useState)(!1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Button,{onPress:function(){return t(!n)},children:n?"关闭":"打开"}),n?(0,f.jsx)(o.Stack,{mt:20,w:360,h:600,children:(0,f.jsx)(u.g,{handleBarCodeScanned:(e=(0,a.A)((function*(e){return alert(e),{}})),function(n){return e.apply(this,arguments)})})}):null]})},ScanQRCodeGallery=function(){var e,n=(0,d.A)(),{activeAccount:{account:t}}=(0,c.LH)({num:0}),r=(0,i.useCallback)((e=(0,a.A)((function*(e){try{var r=yield n.start(_objectSpread(_objectSpread({handlers:n.PARSE_HANDLER_NAMES.all},e),{},{accountId:t?.id}));console.log(r)}catch(e){console.log("用户取消扫描")}})),function(n){return e.apply(this,arguments)}),[n,t?.id]);return(0,f.jsx)(p.P,{description:"..",suggestions:["..."],boundaryConditions:["..."],elements:[{title:"命令式弹出 Modal(自动处理)",element:(0,f.jsx)(o.Button,{onPress:function(){return r({autoHandleResult:!0})},children:"打开"})},{title:"命令式弹出 Modal(不自动处理，qrWalletScene = true & showProTutorial = false)",element:(0,f.jsx)(o.Button,{onPress:function(){return r({autoHandleResult:!1,qrWalletScene:!0,showProTutorial:!1})},children:"打开"})},{title:"命令式弹出 Modal(不自动处理，qrWalletScene = true & showProTutorial = true)",element:(0,f.jsx)(o.Button,{onPress:function(){return r({autoHandleResult:!1,qrWalletScene:!0,showProTutorial:!0})},children:"打开"})},{title:"单独测试 Camera 权限等",element:(0,f.jsx)(ScanQrCameraDemo,{})}]})};const y=function ScanQRCodeGalleryContainer(){return(0,f.jsx)(s.b8,{config:{sceneName:l.Zs.home},enabledNum:[0],children:(0,f.jsx)(ScanQRCodeGallery,{})})}},654004:(e,n,t)=>{t.d(n,{P:()=>Layout});var r=t(586330),a=t(728234),i=t(490343),o=t(795871),s=t(310955),c=t(498356),u=t(730223),d=t(831085),FormattedText=function({text:e}){return"string"==typeof e?(0,d.jsx)(i.Stack,{children:(0,d.jsxs)(i.SizableText,{children:[e,"。 "]})}):Array.isArray(e)&&0===e.length?null:(0,d.jsx)(i.Stack,{children:(0,d.jsx)(i.Stack,{space:"$1",children:e.map((function(n,t){return(0,d.jsx)(i.Stack,{children:(0,d.jsxs)(i.SizableText,{children:[t+1,". ",n,t===e.length-1?"。":"；"]})},t.toString())}))})})};function Layout({description:e="",suggestions:n=[],boundaryConditions:t=[],elements:l=[],scrollEnabled:p=!0,contentInsetAdjustmentBehavior:f="never",skipLoading:y=!1,children:m}){var v=(0,o.U6)(),g=(0,c.A)();return(0,d.jsx)(i.Page,{skipLoading:y,children:(0,d.jsx)(i.ScrollView,{maxWidth:"100%",scrollEnabled:p,flex:1,marginBottom:v,paddingHorizontal:"$5",contentContainerStyle:{paddingTop:20,paddingBottom:280},keyboardDismissMode:"on-drag",contentInsetAdjustmentBehavior:f,children:(0,d.jsxs)(i.Stack,{marginHorizontal:"auto",maxWidth:"100%",width:576,space:"$6",children:[(0,d.jsxs)(i.XStack,{children:[(0,d.jsx)(i.IconButton,{icon:"HomeLineOutline",onPress:function(){g.dispatch(a.y9.replace(u.WP.Main,{screen:u.V4.Developer,params:{screen:u.f$.TabDeveloper}}))}}),(0,d.jsx)(i.Button,{ml:"$4",onPress:(0,r.A)((function*(){yield s.A.serviceSetting.setTheme("light")})),children:"Light Theme"}),(0,d.jsx)(i.Button,{ml:"$4",variant:"primary",onPress:(0,r.A)((function*(){yield s.A.serviceSetting.setTheme("dark")})),children:"Dark Theme"})]}),e?(0,d.jsxs)(i.Stack,{space:"$2",children:[(0,d.jsx)(i.Stack,{children:(0,d.jsx)(i.SizableText,{size:"$headingXl",children:"使用说明"})}),(0,d.jsx)(i.Stack,{children:(0,d.jsx)(FormattedText,{text:e})})]}):null,n?(0,d.jsxs)(i.Stack,{space:"$2",children:[(0,d.jsx)(i.Stack,{children:(0,d.jsx)(i.SizableText,{size:"$headingXl",children:"使用建议"})}),(0,d.jsx)(FormattedText,{text:n})]}):null,t?.length>0?(0,d.jsxs)(i.Stack,{space:"$2",children:[(0,d.jsx)(i.Stack,{children:(0,d.jsx)(i.SizableText,{size:"$headingXl",children:"注意事项"})}),(0,d.jsx)(FormattedText,{text:t})]}):null,(0,d.jsxs)(i.Stack,{space:"$2",children:[(0,d.jsx)(i.Stack,{children:(0,d.jsx)(i.SizableText,{size:"$headingXl",children:"组件案例"})}),(0,d.jsx)(i.Stack,{children:l?.map((function(e,n){return(0,d.jsxs)(i.Stack,{space:"$2",pb:"$8",mb:"$8",borderBottomWidth:"$px",borderBottomColor:"$borderSubdued",children:[(0,d.jsxs)(i.Stack,{flexDirection:"column",children:[(0,d.jsx)(i.SizableText,{size:"$headingLg",children:e.title}),e.description?(0,d.jsx)(i.Stack,{paddingTop:1,children:(0,d.jsxs)(i.SizableText,{children:[e.description,"。"]})}):null]}),(0,d.jsx)(i.Stack,{children:"function"==typeof e.element?(0,d.jsx)(e.element,{}):e.element})]},`elements-${n}`)}))}),(0,d.jsx)(i.Stack,{children:m?(0,d.jsx)(i.Stack,{space:"$3",children:m}):null})]})]})})})}},351574:(e,n,t)=>{t.d(n,{g:()=>ScanQrCode});var r=t(586330),a=t(514041),i=t(728234),o=t(324586),s=t(230414),c=t(929296),u=t(195309),d=t(972715),l=t(72631),p=t(719102),f=t(16706);function _handleRequestPermissionsAsync(){return _handleRequestPermissionsAsync=(0,r.A)((function*(){try{return yield function getUserMedia(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(t,r){n.call(navigator,e,t,r)}))}({video:!0}),{status:f.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return function handleGetUserMediaError({message:e}){return"Permission dismissed"===e?{status:f.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:f.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}({message:e})}})),_handleRequestPermissionsAsync.apply(this,arguments)}function _handlePermissionsQueryAsync(){return(_handlePermissionsQueryAsync=(0,r.A)((function*(){if(!navigator?.permissions?.query)throw new l.V("expo-barcode-scanner","navigator.permissions API is not available");var{state:e}=yield navigator.permissions.query({name:"camera"});switch(e){case"prompt":return{status:f.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:f.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:f.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}))).apply(this,arguments)}const y={get name(){return"ExpoBarCodeScannerModule"},get BarCodeType(){return{code39mod43:"code39mod43",code138:"code138",interleaved2of5:"interleaved2of5",aztec:"aztec",ean13:"ean13",ean8:"ean8",qr:"qr",pdf417:"pdf417",upc_e:"upc_e",datamatrix:"datamatrix",code39:"code39",code93:"code93",itf14:"itf14",codabar:"codabar",code128:"code128",upc_a:"upc_a"}},get Type(){return{front:"front",back:"back"}},requestPermissionsAsync:()=>(0,r.A)((function*(){return function handleRequestPermissionsAsync(){return _handleRequestPermissionsAsync.apply(this,arguments)}()}))(),getPermissionsAsync:()=>(0,r.A)((function*(){return function handlePermissionsQueryAsync(){return _handlePermissionsQueryAsync.apply(this,arguments)}()}))()};var m=t(722844),v=t(230690);function _createSuper(e){var n=_isNativeReflectConstruct();return function _createSuperInternal(){var t,r=(0,d.A)(e);if(n){var a=(0,d.A)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,u.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var g,h=function(e){(0,c.A)(ExpoBarCodeScannerView,e);var n=_createSuper(ExpoBarCodeScannerView);function ExpoBarCodeScannerView(){return n.apply(this,arguments)}return ExpoBarCodeScannerView.prototype.render=function render(){return a.createElement(v.A,null,a.createElement(m.A,null,"BarCodeScanner Component not supported on the web"))},(0,s.A)(ExpoBarCodeScannerView)}(a.Component);function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function BarCodeScanner_createSuper(e){var n=BarCodeScanner_isNativeReflectConstruct();return function _createSuperInternal(){var t,r=(0,d.A)(e);if(n){var a=(0,d.A)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,u.A)(this,t)}}function BarCodeScanner_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(BarCodeScanner_isNativeReflectConstruct=function(){return!!e})()}var{BarCodeType:A,Type:b}=y,C=function(e){(0,c.A)(BarCodeScanner,e);var n,t,i,o=BarCodeScanner_createSuper(BarCodeScanner);function BarCodeScanner(...e){var n;return(n=o.call(this,...e)).lastEvents={},n.lastEventsTimes={},n.onObjectDetected=function(e){return function({nativeEvent:t}){var{type:r}=t;n.lastEvents[r]&&n.lastEventsTimes[r]&&JSON.stringify(t)===n.lastEvents[r]&&Date.now()-n.lastEventsTimes[r]<500||e&&(e(t),n.lastEventsTimes[r]=new Date,n.lastEvents[r]=JSON.stringify(t))}},n}BarCodeScanner.getPermissionsAsync=(n=(0,r.A)((function*(){return y.getPermissionsAsync()})),function getPermissionsAsync(){return n.apply(this,arguments)}),BarCodeScanner.requestPermissionsAsync=(t=(0,r.A)((function*(){return y.requestPermissionsAsync()})),function requestPermissionsAsync(){return t.apply(this,arguments)}),BarCodeScanner.scanFromURLAsync=(i=(0,r.A)((function*(e,n=Object.values(A)){if(!y.scanFromURLAsync)throw new l.V("expo-barcode-scanner","scanFromURLAsync");if(Array.isArray(n)&&!n.length)throw new Error("No barCodeTypes specified; provide at least one barCodeType for scanner");return yield y.scanFromURLAsync(e,n)})),function scanFromURLAsync(e){return i.apply(this,arguments)});var u=BarCodeScanner.prototype;return u.render=function render(){var e=this.convertNativeProps(this.props),{onBarCodeScanned:n}=this.props;return a.createElement(h,_objectSpread(_objectSpread({},e),{},{onBarCodeScanned:this.onObjectDetected(n)}))},u.convertNativeProps=function convertNativeProps(e){var n={};for(var[t,r]of Object.entries(e))"string"==typeof r&&BarCodeScanner.ConversionTables[t]?n[t]=BarCodeScanner.ConversionTables[t][r]:n[t]=r;return n},(0,s.A)(BarCodeScanner)}(a.Component);g=C,C.Constants={BarCodeType:A,Type:b},C.ConversionTables={type:b},C.defaultProps={type:b.back,barCodeTypes:Object.values(A)},C.usePermissions=(0,p.V)({getMethod:g.getPermissionsAsync,requestMethod:g.requestPermissionsAsync});var S,w,_,P,j,M,E,O,x,{Constants:R,getPermissionsAsync:D,requestPermissionsAsync:k,scanFromURLAsync:T}=C,U=t(908867),B=t(490343),q=t(663522),N=t(596020),V=t(117746),W=t(839850),I=t(34546),z=t(17617),F=t(867597);!function(e){e.front="front",e.back="back"}(S||(S={})),function(e){e.on="on",e.off="off",e.auto="auto",e.torch="torch"}(w||(w={})),function(e){e.on="on",e.off="off",e.auto="auto",e.singleShot="singleShot"}(_||(_={})),function(e){e.auto="auto",e.sunny="sunny",e.cloudy="cloudy",e.shadow="shadow",e.incandescent="incandescent",e.fluorescent="fluorescent",e.continuous="continuous",e.manual="manual"}(P||(P={})),function(e){e.png="png",e.jpg="jpg"}(j||(j={})),function(e){e.H264="avc1",e.HEVC="hvc1",e.JPEG="jpeg",e.AppleProRes422="apcn",e.AppleProRes4444="ap4h"}(M||(M={})),function(e){e.off="off",e.standard="standard",e.cinematic="cinematic",e.auto="auto"}(E||(E={})),function(e){e["2160p"]="2160p",e["1080p"]="1080p",e["720p"]="720p",e["480p"]="480p",e["4:3"]="4:3"}(O||(O={})),function(e){e[e.portrait=1]="portrait",e[e.portraitUpsideDown=2]="portraitUpsideDown",e[e.landscapeLeft=3]="landscapeLeft",e[e.landscapeRight=4]="landscapeRight"}(x||(x={}));var L=t(683180);function WebUserMediaManager_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function WebUserMediaManager_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?WebUserMediaManager_ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WebUserMediaManager_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _requestLegacyUserMediaAsync(){return(_requestLegacyUserMediaAsync=(0,r.A)((function*(e){var optionalSource=function(e){return{optional:[{sourceId:e}]}},constraintToSourceId=function(e){var{deviceId:n}=e;return"string"==typeof n?n:Array.isArray(n)&&n.length>0?n[0]:"object"==typeof n&&n.ideal?n.ideal:null},n=yield new Promise((function(e){return MediaStreamTrack.getSources((function(n){return e(n)}))})),t=null,r=null;n.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(r=e.id)}));var a=constraintToSourceId(e.audioConstraints);a&&(t=a);var i=constraintToSourceId(e.videoConstraints);return i&&(r=i),[optionalSource(t),optionalSource(r)]}))).apply(this,arguments)}function sourceSelectedAsync(e,n,t){return _sourceSelectedAsync.apply(this,arguments)}function _sourceSelectedAsync(){return(_sourceSelectedAsync=(0,r.A)((function*(e,n,t){var r={video:void 0===t||t};return e||(r.audio=void 0===n||n),yield getAnyUserMediaAsync(r)}))).apply(this,arguments)}function _requestUserMediaAsync(){return _requestUserMediaAsync=(0,r.A)((function*(e,n=!0){if(canGetUserMedia())return yield sourceSelectedAsync(n,e.audio,e.video);var[t,r]=yield function requestLegacyUserMediaAsync(e){return _requestLegacyUserMediaAsync.apply(this,arguments)}(e);return yield sourceSelectedAsync(n,t,r)})),_requestUserMediaAsync.apply(this,arguments)}function getAnyUserMediaAsync(e){return _getAnyUserMediaAsync.apply(this,arguments)}function _getAnyUserMediaAsync(){return _getAnyUserMediaAsync=(0,r.A)((function*(e,n=!1){try{return yield function getUserMediaAsync(e){return _getUserMediaAsync.apply(this,arguments)}(WebUserMediaManager_objectSpread(WebUserMediaManager_objectSpread({},e),{},{video:n||e.video}))}catch(t){if(!n&&"ConstraintNotSatisfiedError"===t.name)return yield getAnyUserMediaAsync(e,!0);throw t}})),_getAnyUserMediaAsync.apply(this,arguments)}function _getUserMediaAsync(){return(_getUserMediaAsync=(0,r.A)((function*(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var n=navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia;return new Promise((function(t,r){return n.call(navigator,e,t,r)}))}))).apply(this,arguments)}function canGetUserMedia(){return L.A.isDOMAvailable&&!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia)}function isFrontCameraAvailableAsync(e){return _isFrontCameraAvailableAsync.apply(this,arguments)}function _isFrontCameraAvailableAsync(){return(_isFrontCameraAvailableAsync=(0,r.A)((function*(e){return yield supportsCameraType(["front","user","facetime"],"user",e)}))).apply(this,arguments)}function isBackCameraAvailableAsync(e){return _isBackCameraAvailableAsync.apply(this,arguments)}function _isBackCameraAvailableAsync(){return(_isBackCameraAvailableAsync=(0,r.A)((function*(e){return yield supportsCameraType(["back","rear"],"environment",e)}))).apply(this,arguments)}function supportsCameraType(e,n,t){return _supportsCameraType.apply(this,arguments)}function _supportsCameraType(){return(_supportsCameraType=(0,r.A)((function*(e,n,t){if(!t){if(!navigator.mediaDevices.enumerateDevices)return null;t=yield navigator.mediaDevices.enumerateDevices()}var r=t.filter((function(e){return"videoinput"===e.kind})),[a]=r.filter((function(n){return e.some((function(e){return n.label.toLowerCase().includes(e)}))})),[i]=r.filter((function(e){if(!("getCapabilities"in e))return null;var t=e.getCapabilities();return t.facingMode?t.facingMode.find((function(e){return n})):null}));return i?.deviceId||a?.deviceId||null}))).apply(this,arguments)}function ExpoCameraManager_web_getUserMedia(e){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices.getUserMedia(e);var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||function(){var e=new Error("Permission unimplemented");throw e.code=0,e.name="NotAllowedError",e};return new Promise((function(t,r){n.call(navigator,e,t,r)}))}function ExpoCameraManager_web_handleGetUserMediaError({message:e}){return"Permission dismissed"===e?{status:f.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1}:{status:f.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}function ExpoCameraManager_web_handleRequestPermissionsAsync(){return build_ExpoCameraManager_web_handleRequestPermissionsAsync.apply(this,arguments)}function build_ExpoCameraManager_web_handleRequestPermissionsAsync(){return(build_ExpoCameraManager_web_handleRequestPermissionsAsync=(0,r.A)((function*(){try{return yield ExpoCameraManager_web_getUserMedia({video:!0}),{status:f.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return ExpoCameraManager_web_handleGetUserMediaError({message:e})}}))).apply(this,arguments)}function ExpoCameraManager_web_handlePermissionsQueryAsync(e){return build_ExpoCameraManager_web_handlePermissionsQueryAsync.apply(this,arguments)}function build_ExpoCameraManager_web_handlePermissionsQueryAsync(){return(build_ExpoCameraManager_web_handlePermissionsQueryAsync=(0,r.A)((function*(e){if(!navigator?.permissions?.query)throw new l.V("expo-camera","navigator.permissions API is not available");try{var{state:n}=yield navigator.permissions.query({name:e});switch(n){case"prompt":return{status:f.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};case"granted":return{status:f.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0};case"denied":return{status:f.W.DENIED,expires:"never",canAskAgain:!0,granted:!1}}}catch(e){if(e instanceof TypeError)return{status:f.W.UNDETERMINED,expires:"never",canAskAgain:!0,granted:!1};throw e}}))).apply(this,arguments)}const $={get name(){return"ExponentCameraManager"},get Type(){return{back:"back",front:"front"}},get FlashMode(){return{on:"on",off:"off",auto:"auto",torch:"torch"}},get AutoFocus(){return{on:"on",off:"off",auto:"auto",singleShot:"singleShot"}},get WhiteBalance(){return{auto:"auto",continuous:"continuous",manual:"manual"}},get VideoQuality(){return{}},get VideoStabilization(){return{}},isAvailableAsync:()=>(0,r.A)((function*(){return canGetUserMedia()}))(),takePicture:(e,n)=>(0,r.A)((function*(){return yield n.takePicture(e)}))(),pausePreview:e=>(0,r.A)((function*(){yield e.pausePreview()}))(),resumePreview:e=>(0,r.A)((function*(){return yield e.resumePreview()}))(),getAvailableCameraTypesAsync:()=>(0,r.A)((function*(){if(!canGetUserMedia()||!navigator.mediaDevices.enumerateDevices)return[];var e=yield navigator.mediaDevices.enumerateDevices();return(yield Promise.all([(yield isFrontCameraAvailableAsync(e))&&S.front,(yield isBackCameraAvailableAsync())&&S.back])).filter(Boolean)}))(),getAvailablePictureSizes:(e,n)=>(0,r.A)((function*(){return yield n.getAvailablePictureSizes(e)}))(),getPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("camera")}))(),requestPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handleRequestPermissionsAsync()}))(),getCameraPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("camera")}))(),requestCameraPermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handleRequestPermissionsAsync()}))(),getMicrophonePermissionsAsync:()=>(0,r.A)((function*(){return ExpoCameraManager_web_handlePermissionsQueryAsync("microphone")}))(),requestMicrophonePermissionsAsync:()=>(0,r.A)((function*(){try{return yield ExpoCameraManager_web_getUserMedia({audio:!0}),{status:f.W.GRANTED,expires:"never",canAskAgain:!0,granted:!0}}catch({message:e}){return ExpoCameraManager_web_handleGetUserMediaError({message:e})}}))()};var G=t(78958),H=t.n(G);function convertFlashModeJSONToNative(e){return"torch"===e}function convertWhiteBalanceJSONToNative(e){switch(e){case"on":case"auto":return"continuous";case"off":return"none";case"singleShot":return"single-shot";default:return}}function convertAutoFocusJSONToNative(e){switch(e){case"on":case"auto":return"continuous";case"off":return"manual";case"singleShot":return"single-shot";default:return}}var K=Object.keys({"3840x2160":3840/2160,"1920x1080":1920/1080,"1280x720":1280/720,"640x480":640/480,"352x288":352/288}),Q={[j.jpg]:"image/jpeg",[j.png]:"image/png"},J={audio:!1,video:!0},X={[S.front]:"user",[S.back]:"environment"},Y={user:S.front,environment:S.back};var Z=.92;function captureImageContext(e,{scale:n=1,isImageMirror:t=!1}){var{videoWidth:r,videoHeight:a}=e,{width:i,height:o}=function getImageSize(e,n,t){var r=e*t;return{width:r,height:n/(e/r)}}(r,a,n),s=document.createElement("canvas");s.width=i,s.height=o;var c=s.getContext("2d",{alpha:!1});if(!c)throw new Error("Context is not defined");return t&&c.setTransform(-1,0,0,1,s.width,0),c.drawImage(e,0,0,i,o),s}function captureImage(e,n){var t=function ensureCameraPictureOptions(e){var n={scale:1,imageType:j.png,isImageMirror:!1};for(var t in e)t in e&&void 0!==e[t]&&t in n&&(n[t]=e[t]);return n}(n),r=captureImageContext(e,t),{imageType:a,quality:i=Z}=t;return function toDataURL(e,n,t){H()(Object.values(j).includes(n),`expo-camera: ${n} is not a valid ImageType. Expected a string from: ${Object.values(j).join(", ")}`);var r=Q[n];return n===j.jpg?(H()(t<=1&&t>=0,`expo-camera: ${t} is not a valid image quality. Expected a number from 0...1`),e.toDataURL(r,t)):e.toDataURL(r)}(r,a,i)}function getIdealConstraints(e,n,t){var r={audio:!1,video:{}};if(function hasValidConstraints(e,n,t){return void 0!==e&&void 0!==n&&void 0!==t}(e,n,t))return J;var a=function getSupportedConstraints(){return navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():null}();if(!(a&&a.facingMode&&a.width&&a.height))return J;if(e&&Object.values(S).includes(e)){var i=X[e];if(function isWebKit(){return/WebKit/.test(navigator.userAgent)&&!/Edg/.test(navigator.userAgent)}()){var o="user"===i?"exact":"ideal";r.video.facingMode={[o]:i}}else r.video.facingMode={ideal:X[e]}}return function isMediaTrackConstraints(e){return e&&"boolean"!=typeof e.video}(r.video)&&(r.video.width=n,r.video.height=t),r}function _getPreferredStreamDevice(){return(_getPreferredStreamDevice=(0,r.A)((function*(e,n,t){try{return yield getStreamDevice(e,n,t)}catch(a){if(a instanceof OverconstrainedError&&"facingMode"===a.constraint){var r=e===S.back?S.front:S.back;return yield getStreamDevice(r,n,t)}throw a}}))).apply(this,arguments)}function getStreamDevice(e,n,t){return _getStreamDevice.apply(this,arguments)}function _getStreamDevice(){return _getStreamDevice=(0,r.A)((function*(e,n,t){var r=getIdealConstraints(e,n,t),a=yield function requestUserMediaAsync(e){return _requestUserMediaAsync.apply(this,arguments)}(r);return a})),_getStreamDevice.apply(this,arguments)}function syncTrackCapabilities(e,n){return _syncTrackCapabilities.apply(this,arguments)}function _syncTrackCapabilities(){return _syncTrackCapabilities=(0,r.A)((function*(e,n,t={}){n?.getVideoTracks&&(yield Promise.all(n.getVideoTracks().map((function(n){return function onCapabilitiesReady(e,n){return _onCapabilitiesReady.apply(this,arguments)}(e,n,t)}))))})),_syncTrackCapabilities.apply(this,arguments)}function _onCapabilitiesReady(){return(_onCapabilitiesReady=(0,r.A)((function*(e,n,t={}){var r=n.getCapabilities(),a={};for(var i of["exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","zoom"])r[i]&&(a[i]=convertNormalizedSetting(r[i],t[i]));function validatedInternalConstrainedValue(n,a,i){return function validatedConstrainedValue(e){var{constraintKey:n,settingsKey:t,convertedSetting:r,capabilities:a,settings:i,cameraType:o}=e;i[t];if(Array.isArray(a[n])&&r&&!a[n].includes(r))return void 0;return r}({constraintKey:n,settingsKey:a,convertedSetting:i(t[a]),capabilities:r,settings:t,cameraType:e})}r.focusMode&&void 0!==t.autoFocus&&(a.focusMode=validatedInternalConstrainedValue("focusMode","autoFocus",convertAutoFocusJSONToNative)),r.torch&&void 0!==t.flashMode&&(a.torch=validatedInternalConstrainedValue("torch","flashMode",convertFlashModeJSONToNative)),r.whiteBalanceMode&&void 0!==t.whiteBalance&&(a.whiteBalanceMode=validatedInternalConstrainedValue("whiteBalanceMode","whiteBalance",convertWhiteBalanceJSONToNative));try{yield n.applyConstraints({advanced:[a]})}catch(e){0}}))).apply(this,arguments)}function stopMediaStream(e){e&&(e.getAudioTracks&&e.getAudioTracks().forEach((function(e){return e.stop()})),e.getVideoTracks&&e.getVideoTracks().forEach((function(e){return e.stop()})),function isMediaStreamTrack(e){return"function"==typeof e.stop}(e)&&e.stop())}function setVideoSource(e,n){var t,r=null!=(t=window.URL.createObjectURL)?t:window.webkitURL.createObjectURL;if(void 0!==e.srcObject?e.srcObject=n:void 0!==e.mozSrcObject?e.mozSrcObject=n:n&&r&&(e.src=r(n)),!n){var a,i,o,s=null!=(a=window.URL.revokeObjectURL)?a:window.webkitURL.revokeObjectURL,c=null!=(i=null!=(o=e.src)?o:e.srcObject)?i:e.mozSrcObject;s&&"string"==typeof c&&s(c)}}function convertNormalizedSetting(e,n){if(n){var t=function convertRange(e,n,t=[0,1]){return(e-t[0])*(n[1]-n[0])/(t[1]-t[0])+n[0]}(n,[e.min,e.max]);return Math.min(e.max,Math.max(e.min,t))}}function useWebCameraStream_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function useWebCameraStream_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?useWebCameraStream_ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useWebCameraStream_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ee=["autoFocus","flashMode","exposureCompensation","colorTemperature","iso","brightness","contrast","saturation","sharpness","focusDistance","whiteBalance","zoom"];function useWebCameraStream(e,n,t,{onCameraReady:i,onMountError:o}){var s=a.useRef(!1),c=a.useRef([]),u=a.useRef({autoFocus:"continuous",flashMode:"off",whiteBalance:"continuous",zoom:1}),[d,l]=a.useState(null),p=a.useMemo((function(){return d?d.getTracks()[0].getSettings():null}),[d]),f=a.useMemo((function(){if(!p)return null;var{facingMode:e="user"}=p;return Y[e]}),[p]),y=a.useCallback((0,r.A)((function*(){try{return yield function getPreferredStreamDevice(e,n,t){return _getPreferredStreamDevice.apply(this,arguments)}(n)}catch(e){return o&&o({nativeEvent:e}),null}})),[n,o]),m=a.useCallback((0,r.A)((function*(){var e=yield y();return function compareStreams(e,n){if(!e||!n)return!1;var t=e.getTracks()[0].getSettings(),r=n.getTracks()[0].getSettings();return t.deviceId===r.deviceId}(e,d)||(c.current.some((function(n){return n.id===e?.id}))||c.current.push(e),l(e),i&&i()),!1})),[y,l,i,d,c.current]);return a.useEffect((function(){s.current||(s.current=!0,m().then((function(e){s.current=e})).catch((function(){s.current=!1})))}),[n]),a.useEffect((function(){var e={};for(var r of Object.keys(t))if(ee.includes(r)){var a=t[r];a!==u.current[r]&&(e[r]=a)}var i=!!Object.keys(e).length,o=useWebCameraStream_objectSpread(useWebCameraStream_objectSpread({},u.current),e);i&&syncTrackCapabilities(n,d,e),u.current=o}),[t.autoFocus,t.flashMode,t.exposureCompensation,t.colorTemperature,t.iso,t.brightness,t.contrast,t.saturation,t.sharpness,t.focusDistance,t.whiteBalance,t.zoom]),a.useEffect((function(){e.current&&setVideoSource(e.current,d)}),[e.current,d]),a.useEffect((function(){return function(){for(var n of c.current)stopMediaStream(n);e.current&&setVideoSource(e.current,d)}}),[]),function useLoadedVideo(e,n){a.useEffect((function(){e&&e.addEventListener("loadedmetadata",(function(){requestAnimationFrame((function(){n()}))}))}),[e])}(e.current,(function(){syncTrackCapabilities(n,d,u.current)})),{type:f,mediaTrackSettings:p}}var ne=function(e,n){var t=[`self.func = ${e.toString()};`,"self.onmessage = (e) => {","  const result = self.func(e.data);","  self.postMessage(result);","};"];n.length>0&&t.unshift(`importScripts(${n.map((function(e){return`'${e}'`})).join(", ")});`);var r=new Blob(t,{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r)),i=[];return a.onmessage=function(e){return i.shift()?.resolve(e.data)},function(e){return new Promise((function(n,t){i.push({resolve:n,reject:t}),a.postMessage(e)}))}}((function({data:e,width:n,height:t}){var r,a=self.jsQR(e,n,t,{inversionAttempts:"attemptBoth"});try{r=JSON.parse(a)}catch{r=a}if(r?.data){var i={type:"qr",data:r.data,cornerPoints:[],bounds:{origin:{x:0,y:0},size:{width:0,height:0}}};return r.location&&(i.cornerPoints=[r.location.topLeftCorner,r.location.bottomLeftCorner,r.location.topRightCorner,r.location.bottomRightCorner]),i}return r}),["https://cdn.jsdelivr.net/npm/jsqr@1.2.0/dist/jsQR.min.js"]);function useWebQRScanner(e,{isEnabled:n,captureOptions:t,interval:i,onScanned:o,onError:s}){var c=a.useRef(!1),u=a.useRef(void 0);function scanAsync(){return _scanAsync.apply(this,arguments)}function _scanAsync(){return _scanAsync=(0,r.A)((function*(){if(c.current&&o)try{var n=function captureImageData(e,n={}){if(!e||e.readyState!==e.HAVE_ENOUGH_DATA)return null;var t=captureImageContext(e,n),r=t.getContext("2d",{alpha:!1});return r&&t.width&&t.height?r.getImageData(0,0,t.width,t.height):null}(e.current,t);if(n){var r=yield ne(n);r?.data&&o({nativeEvent:r})}}catch(e){s&&s({nativeEvent:e})}finally{if(0===i)return void stop();var a=!i||i<0?16:i;u.current=setTimeout((function(){scanAsync()}),a)}else stop()})),_scanAsync.apply(this,arguments)}function stop(){c.current=!1,clearTimeout(u.current)}a.useEffect((function(){return n&&(c.current=!0,scanAsync()),function(){n&&stop()}}),[n])}var te=t(831085),re=["type","pictureSize","poster"];function ExpoCamera_web_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ExpoCamera_web_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ExpoCamera_web_ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ExpoCamera_web_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const ae=a.forwardRef((function(e,n){var{type:t,pictureSize:i,poster:o}=e,s=(0,W.A)(e,re),c=a.useRef(null),u=useWebCameraStream(c,t,s,{onCameraReady(){s.onCameraReady&&s.onCameraReady()},onMountError:s.onMountError}),d=a.useMemo((function(){return!(!s.barCodeScannerSettings?.barCodeTypes?.includes("qr")||!s.onBarCodeScanned)}),[s.barCodeScannerSettings?.barCodeTypes,s.onBarCodeScanned]);useWebQRScanner(c,{interval:s.barCodeScannerSettings?.interval,isEnabled:d,captureOptions:{scale:1,isImageMirror:u.type===S.front},onScanned(e){s.onBarCodeScanned&&s.onBarCodeScanned(e)}}),a.useImperativeHandle(n,(function(){return{getAvailablePictureSizes:e=>(0,r.A)((function*(){return K}))(),takePicture:e=>(0,r.A)((function*(){if(!c.current||c.current?.readyState!==c.current?.HAVE_ENOUGH_DATA)throw new I.A("ERR_CAMERA_NOT_READY","HTMLVideoElement does not have enough camera data to construct an image yet.");var n=u.mediaTrackSettings;if(!n)throw new I.A("ERR_CAMERA_NOT_READY","MediaStream is not ready yet.");return function capture(e,n,t){var r=captureImage(e,t),a={uri:r,base64:r,width:0,height:0};if(n){var{width:i=0,height:o=0}=n;a.width=i,a.height=o,a.exif=n}return t.onPictureSaved&&t.onPictureSaved(a),a}(c.current,n,ExpoCamera_web_objectSpread(ExpoCamera_web_objectSpread({},e),{},{onPictureSaved(n){e.onPictureSaved&&e.onPictureSaved(n),s.onPictureSaved&&s.onPictureSaved({nativeEvent:{data:n,id:-1}})}}))}))(),resumePreview:()=>(0,r.A)((function*(){c.current&&c.current.play()}))(),pausePreview:()=>(0,r.A)((function*(){c.current&&c.current.pause()}))()}}),[u.mediaTrackSettings,s.onPictureSaved]);var l=a.useMemo((function(){var e=u.type===$.Type.front;return[z.A.absoluteFill,se.video,{pointerEvents:s.pointerEvents,transform:e?[{scaleX:-1}]:void 0}]}),[s.pointerEvents,u.type]);return(0,te.jsxs)(v.A,{style:[se.videoWrapper,s.style],children:[(0,te.jsx)(oe,{autoPlay:!0,playsInline:!0,muted:!0,poster:o,ref:c,style:l}),s.children]})}));var ie,oe=a.forwardRef((function(e,n){return(0,F.A)("video",ExpoCamera_web_objectSpread(ExpoCamera_web_objectSpread({},e),{},{ref:n}))})),se=z.A.create({videoWrapper:{flex:1,alignItems:"stretch",pointerEvents:"box-none"},video:{width:"100%",height:"100%",objectFit:"cover"}}),ce={type:$.Type,flashMode:$.FlashMode,autoFocus:$.AutoFocus,whiteBalance:$.WhiteBalance};function ensureNativeProps(e){var n=function convertNativeProps(e){if(!e||"object"!=typeof e)return{};var n={};for(var[t,r]of Object.entries(e))"string"==typeof r&&ce[t]?n[t]=ce[t][r]:n[t]=r;return n}(e);return n.onBarCodeScanned&&(n.barCodeScannerEnabled=!0),n.onFacesDetected&&(n.faceDetectorEnabled=!0),delete n.ratio,delete n.useCamera2Api,n}function Camera_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Camera_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Camera_ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Camera_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Camera_createSuper(e){var n=Camera_isNativeReflectConstruct();return function _createSuperInternal(){var t,r=(0,d.A)(e);if(n){var a=(0,d.A)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,u.A)(this,t)}}function Camera_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Camera_isNativeReflectConstruct=function(){return!!e})()}var ue={},de=1;function ensureRecordingOptions(e){var n=e||{};return n&&"object"==typeof n?"string"==typeof n.quality&&(n.quality=le.Constants.VideoQuality[n.quality]):n={},n}function _onPictureSaved({nativeEvent:e}){var{id:n,data:t}=e,r=ue[n];r&&(r(t),delete ue[n])}var le=function(e){(0,c.A)(Camera,e);var n,t,a,i,o,u,d,p,f,y=Camera_createSuper(Camera);function Camera(...e){var n;return(n=y.call(this,...e))._lastEvents={},n._lastEventsTimes={},n._onCameraReady=function(){n.props.onCameraReady&&n.props.onCameraReady()},n._onMountError=function({nativeEvent:e}){n.props.onMountError&&n.props.onMountError(e)},n._onResponsiveOrientationChanged=function({nativeEvent:e}){n.props.onResponsiveOrientationChanged&&n.props.onResponsiveOrientationChanged(e)},n._onObjectDetected=function(e){return function({nativeEvent:t}){var{type:r}=t;n._lastEvents[r]&&n._lastEventsTimes[r]&&JSON.stringify(t)===n._lastEvents[r]&&(new Date).getTime()-n._lastEventsTimes[r].getTime()<500||e&&(e(t),n._lastEventsTimes[r]=new Date,n._lastEvents[r]=JSON.stringify(t))}},n._setReference=function(e){e?(n._cameraRef=e,n._cameraHandle=e):(n._cameraRef=null,n._cameraHandle=null)},n}Camera.isAvailableAsync=(n=(0,r.A)((function*(){if(!$.isAvailableAsync)throw new l.V("expo-camera","isAvailableAsync");return yield $.isAvailableAsync()})),function isAvailableAsync(){return n.apply(this,arguments)}),Camera.getAvailableCameraTypesAsync=(t=(0,r.A)((function*(){if(!$.getAvailableCameraTypesAsync)throw new l.V("expo-camera","getAvailableCameraTypesAsync");return yield $.getAvailableCameraTypesAsync()})),function getAvailableCameraTypesAsync(){return t.apply(this,arguments)}),Camera.getAvailableVideoCodecsAsync=(a=(0,r.A)((function*(){if(!$.getAvailableVideoCodecsAsync)throw new l.V("Camera","getAvailableVideoCodecsAsync");return yield $.getAvailableVideoCodecsAsync()})),function getAvailableVideoCodecsAsync(){return a.apply(this,arguments)}),Camera.getPermissionsAsync=(i=(0,r.A)((function*(){return console.warn('"getPermissionsAsync()" is now deprecated. Please use "getCameraPermissionsAsync()" or "getMicrophonePermissionsAsync()" instead.'),$.getPermissionsAsync()})),function getPermissionsAsync(){return i.apply(this,arguments)}),Camera.requestPermissionsAsync=(o=(0,r.A)((function*(){return console.warn('"requestPermissionsAsync()" is now deprecated. Please use "requestCameraPermissionsAsync()" or "requestMicrophonePermissionsAsync()" instead.'),$.requestPermissionsAsync()})),function requestPermissionsAsync(){return o.apply(this,arguments)}),Camera.getCameraPermissionsAsync=(u=(0,r.A)((function*(){return $.getCameraPermissionsAsync()})),function getCameraPermissionsAsync(){return u.apply(this,arguments)}),Camera.requestCameraPermissionsAsync=(d=(0,r.A)((function*(){return $.requestCameraPermissionsAsync()})),function requestCameraPermissionsAsync(){return d.apply(this,arguments)}),Camera.getMicrophonePermissionsAsync=(p=(0,r.A)((function*(){return $.getMicrophonePermissionsAsync()})),function getMicrophonePermissionsAsync(){return p.apply(this,arguments)}),Camera.requestMicrophonePermissionsAsync=(f=(0,r.A)((function*(){return $.requestMicrophonePermissionsAsync()})),function requestMicrophonePermissionsAsync(){return f.apply(this,arguments)});var m,v,g,h,A,b,C,S=Camera.prototype;return S.takePictureAsync=(m=(0,r.A)((function*(e){var n=function ensurePictureOptions(e){var n=e&&"object"==typeof e?e:{};if(n.quality||(n.quality=1),n.onPictureSaved){var t=de++;ue[t]=n.onPictureSaved,n.id=t,n.fastMode=!0}return n}(e);return yield $.takePicture(n,this._cameraHandle)})),function takePictureAsync(e){return m.apply(this,arguments)}),S.getSupportedRatiosAsync=(v=(0,r.A)((function*(){if(!$.getSupportedRatios)throw new l.V("Camera","getSupportedRatiosAsync");return yield $.getSupportedRatios(this._cameraHandle)})),function getSupportedRatiosAsync(){return v.apply(this,arguments)}),S.getAvailablePictureSizesAsync=(g=(0,r.A)((function*(e){if(!$.getAvailablePictureSizes)throw new l.V("Camera","getAvailablePictureSizesAsync");return yield $.getAvailablePictureSizes(e,this._cameraHandle)})),function getAvailablePictureSizesAsync(e){return g.apply(this,arguments)}),S.recordAsync=(h=(0,r.A)((function*(e){if(!$.record)throw new l.V("Camera","recordAsync");var n=ensureRecordingOptions(e);return yield $.record(n,this._cameraHandle)})),function recordAsync(e){return h.apply(this,arguments)}),S.stopRecording=(A=(0,r.A)((function*(){if(!$.stopRecording)throw new l.V("Camera","stopRecording");return yield $.stopRecording(this._cameraHandle)})),function stopRecording(){return A.apply(this,arguments)}),S.pausePreview=(b=(0,r.A)((function*(){if(!$.pausePreview)throw new l.V("Camera","pausePreview");return yield $.pausePreview(this._cameraHandle)})),function pausePreview(){return b.apply(this,arguments)}),S.resumePreview=(C=(0,r.A)((function*(){if(!$.resumePreview)throw new l.V("Camera","resumePreview");return yield $.resumePreview(this._cameraHandle)})),function resumePreview(){return C.apply(this,arguments)}),S.render=function render(){var e=ensureNativeProps(this.props),n=this.props.onBarCodeScanned?this._onObjectDetected(this.props.onBarCodeScanned):void 0,t=this._onObjectDetected(this.props.onFacesDetected);return(0,te.jsx)(ae,Camera_objectSpread(Camera_objectSpread({},e),{},{ref:this._setReference,onCameraReady:this._onCameraReady,onMountError:this._onMountError,onBarCodeScanned:n,onFacesDetected:t,onPictureSaved:_onPictureSaved,onResponsiveOrientationChanged:this._onResponsiveOrientationChanged}))},(0,s.A)(Camera)}(a.Component);ie=le,le.Constants={Type:$.Type,FlashMode:$.FlashMode,AutoFocus:$.AutoFocus,WhiteBalance:$.WhiteBalance,VideoQuality:$.VideoQuality,VideoStabilization:$.VideoStabilization||{},VideoCodec:$.VideoCodec},le.ConversionTables=ce,le.defaultProps={zoom:0,ratio:"4:3",focusDepth:0,faceDetectorSettings:{},type:$.Type.back,autoFocus:$.AutoFocus.on,flashMode:$.FlashMode.off,whiteBalance:$.WhiteBalance.auto},le.useCameraPermissions=(0,p.V)({getMethod:ie.getCameraPermissionsAsync,requestMethod:ie.requestCameraPermissionsAsync}),le.useMicrophonePermissions=(0,p.V)({getMethod:ie.getMicrophonePermissionsAsync,requestMethod:ie.requestMicrophonePermissionsAsync});var{Constants:pe,getPermissionsAsync:fe,requestPermissionsAsync:ye,getCameraPermissionsAsync:me,requestCameraPermissionsAsync:ve,getMicrophonePermissionsAsync:ge,requestMicrophonePermissionsAsync:he}=le,Ae=["style","isActive","children","handleScanResult"];function ScanCamera_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ScanCamera_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ScanCamera_ownKeys(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ScanCamera_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ScanCamera(e){var{style:n,isActive:t,children:r,handleScanResult:a}=e,i=(0,W.A)(e,Ae);return t?(0,te.jsx)(le,ScanCamera_objectSpread(ScanCamera_objectSpread({style:n,onBarCodeScanned:function({data:e}){return a?.(e)},barCodeScannerSettings:{barCodeTypes:[C.Constants.BarCodeType.qr]}},i),{},{children:r})):null}function ScanQrCode({handleBarCodeScanned:e,qrWalletScene:n}){var t=(0,U.A)(),o=(0,a.useRef)(void 0),[s,c]=(0,a.useState)(f.W.UNDETERMINED),u=(0,i.jH)(),[d,l]=(0,a.useState)();u&&(o.current=void 0);var p,y=(0,a.useCallback)((p=(0,r.A)((function*(n){if(n&&o.current!==n&&(o.current=n,e)){var{progress:t}=yield e(n);t&&l(t)}})),function(e){return p.apply(this,arguments)}),[e]);return(0,a.useEffect)((function(){return function(){o.current||e?.("")}}),[e]),(0,a.useEffect)((function(){k().then((function({status:e}){if(e!==f.W.GRANTED){var{isExtensionUiPopup:n}=q.Ay;B.Dialog.show({tone:"warning",icon:"ErrorOutline",title:t.formatMessage({id:"modal__camera_access_not_granted"}),description:t.formatMessage({id:n?"msg__approving_camera_permission_needs_to_be_turned_on_in_expand_view":"modal__camera_access_not_granted_desc"}),onConfirmText:t.formatMessage({id:n?"form__expand_view":"action__go_to_settings"}),showCancelButton:!0,showConfirmButton:!0,onConfirm:function(){n?N.Ay.openUrlInTab(N.oz.uiExpandTab).catch(console.error):(0,V.Ow)("camera")}})}c(e)}))}),[t]),s===f.W.GRANTED?(0,te.jsxs)(ScanCamera,{style:{flex:1},isActive:u,handleScanResult:y,children:[n?(0,te.jsx)(B.YStack,{fullscreen:!0,children:(0,te.jsx)(B.BlurView,{flex:1,borderRadius:"$5",contentStyle:{flex:1,borderRadius:"$5"}})}):null,d?(0,te.jsx)(B.YStack,{fullscreen:!0,justifyContent:"flex-end",alignItems:"flex-end",children:(0,te.jsx)(B.Stack,{bg:"$blackA9",borderRadius:"$2",mr:"$3",mb:"$3",px:"$2",py:"$1",children:(0,te.jsx)(B.SizableText,{size:"$bodySmMedium",color:"$whiteA12",children:`Scanning ${(100*d).toFixed(0)}%`})})}):null]}):null}},719102:(e,n,t)=>{t.d(n,{V:()=>createPermissionHook});var r=t(586330),a=t(839850),i=t(514041),o=["get","request"];function createPermissionHook(e){return function(n){return function usePermission(e,n){var t=(0,i.useRef)(!0),[s,c]=(0,i.useState)(null),u=n||{},{get:d=!0,request:l=!1}=u,p=(0,a.A)(u,o),f=(0,i.useCallback)((0,r.A)((function*(){var n=yield e.getMethod(Object.keys(p).length>0?p:void 0);return t.current&&c(n),n})),[e.getMethod]),y=(0,i.useCallback)((0,r.A)((function*(){var n=yield e.requestMethod(Object.keys(p).length>0?p:void 0);return t.current&&c(n),n})),[e.requestMethod]);return(0,i.useEffect)((function runMethods(){l&&y(),!l&&d&&f()}),[d,l,y,f]),(0,i.useEffect)((function didMount(){return t.current=!0,function(){t.current=!1}}),[]),[s,y,f]}(e,n)}}},16706:(e,n,t)=>{var r;t.d(n,{W:()=>r}),function(e){e.GRANTED="granted",e.UNDETERMINED="undetermined",e.DENIED="denied"}(r||(r={}))}}]);