"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[27970],{27970:(e,n,a)=>{a.r(n),a.d(n,{default:()=>f});var t=a(586330),r=a(514041),i=a(728234),o=a(241440),s=a(908867),c=a(490343),l=a(730223),d=a(310955),m=a(498356),u=a(911998),p=a(831085);const f=function CreateInvoice(){var e,n=(0,s.A)(),a=(0,c.useForm)(),f=(0,i.lq)(),g=(0,m.A)(),{accountId:h,networkId:_}=f.params,{serviceLightning:v}=d.A,{result:x}=(0,u.yk)((function(){return v.getInvoiceConfig({networkId:_})}),[_,v]),I=(0,r.useCallback)((e=(0,t.A)((function*(e){var n=yield v.createInvoice({accountId:h,networkId:_,amount:e.amount,description:e.description});g.pushModal(l.ry.ReceiveModal,{screen:l.MD.ReceiveInvoice,params:{networkId:_,accountId:h,paymentHash:n.payment_hash,paymentRequest:n.payment_request}})})),function(n){return e.apply(this,arguments)}),[h,_,v,g]);return(0,p.jsxs)(c.Page,{children:[(0,p.jsx)(c.Page.Header,{title:"Lightning Invoice"}),(0,p.jsx)(c.Page.Body,{children:(0,p.jsx)(c.YStack,{p:"$5",children:(0,p.jsxs)(c.Form,{form:a,children:[(0,p.jsx)(c.Form.Field,{label:"Amount",name:"amount",description:"$0.00",rules:{min:{value:0,message:n.formatMessage({id:"form__field_too_small"},{0:0})},pattern:{value:/^[0-9]*$/,message:n.formatMessage({id:"form__field_only_integer"})},validate:function(e){if(e){var a=new o.A(e);return a.isInteger()?x?.maxReceiveAmount&&a.isGreaterThan(x?.maxReceiveAmount)?n.formatMessage({id:"msg_receipt_amount_should_be_less_than_int_sats"},{0:x?.maxReceiveAmount}):void 0:n.formatMessage({id:"form__field_only_integer"})}}},children:(0,p.jsx)(c.Input,{placeholder:"Enter amount",size:"large",keyboardType:"number-pad",addOns:[{label:"sats"}]})}),(0,p.jsx)(c.Form.Field,{label:"Description",name:"description",children:(0,p.jsx)(c.TextArea,{size:"large",placeholder:"OneKey invoice"})})]})})}),(0,p.jsx)(c.Page.Footer,{onConfirmText:"Create Invoice",onConfirm:function(){return a.handleSubmit(I)()}})]})}}}]);