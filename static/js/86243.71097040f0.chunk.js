"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[86243],{686243:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var o=n(586330),s=n(514041),r=n(728234),a=n(908867),c=n(578104),i=n(490343),l=n(310955),d=n(291877),k=n(498356),u=n(384013),f=n(831085);const h=(0,s.memo)((0,u.dR)((function TokenSelector(){var e=(0,a.A)(),{refreshTokenList:t,refreshTokenListMap:n,updateSearchKey:h,updateTokenListState:g}=(0,u.WE)().current,[p]=(0,u.Cg)(),A=(0,r.lq)(),m=(0,k.A)(),{networkId:T,accountId:w,tokens:v,networkName:y,closeAfterSelect:S=!0,onSelect:b}=A.params,x=(0,s.useCallback)((function(e){S&&m.pop(),b?.(e)}),[S,m,b]),C=(0,s.useCallback)((0,o.A)((function*(){g({initialized:!1,isRefreshing:!0});var e=yield l.A.serviceAccount.getAccountAddressForApi({accountId:w,networkId:T}),o=yield l.A.serviceToken.fetchAccountTokens({networkId:T,accountAddress:e,mergeTokens:!0,flag:"token-selector"}),{allTokens:s}=o;if(!s)throw g({isRefreshing:!1}),new Error("allTokens not found from fetchAccountTokensWithMemo ");t({keys:s.keys,tokens:s.data}),n(s.map),g({initialized:!0,isRefreshing:!1})})),[w,T,t,n,g]);(0,s.useEffect)((function(){v&&v.data.length?(t({tokens:v.data,keys:v.keys}),n(v.map),g({initialized:!0,isRefreshing:!1})):C()}),[C,t,n,v,g]);var j=(0,c.YQ)(h,200),E=p.tokens.length,I=(0,s.useMemo)((function(){return E>10?{placeholder:"Search symbol or contract address",onChangeText:function({nativeEvent:e}){j(e.text)}}:void 0}),[j,E]);return(0,f.jsxs)(i.Page,{scrollEnabled:!0,children:[(0,f.jsx)(i.Page.Header,{title:e.formatMessage({id:"action__select_token"}),headerSearchBarOptions:I}),(0,f.jsxs)(i.Page.Body,{children:[y?(0,f.jsx)(i.SectionList.SectionHeader,{title:y}):null,(0,f.jsx)(d.x,{onPressToken:x})]})]})})))}}]);