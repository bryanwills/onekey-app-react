/*! For license information please see 53871.e45b47409c.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[53871,77563],{24993:(e,t,r)=>{"use strict";r.d(t,{F:()=>decodeAddress,j:()=>encodeAddress});var n=r(335344);function decodeAddress(e){if(!(0,n.isValidAddress)(e)||(0,n.isCashAddress)(e)&&!e.startsWith("bitcoincash:"))throw new Error(`Invalid address: ${e}`);return(0,n.isCashAddress)(e)?(0,n.toLegacyAddress)(e):e}function encodeAddress(e){if(!(0,n.isValidAddress)(e))throw new Error(`Invalid address: ${e}`);return(0,n.isCashAddress)(e)?e:(0,n.toCashAddress)(e)}},953871:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),u=r(24993),c=r(824116),l=r(877563),d=r(750918);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var p=function(e){(0,a.A)(KeyringHardware,e);var t=_createSuper(KeyringHardware);function KeyringHardware(...e){var r;return(r=t.call(this,...e)).coreApi=d.A.bch.hd,r}return(0,i.A)(KeyringHardware)}(r(339330).G);function KeyringHd_createSuper(e){var t=KeyringHd_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function KeyringHd_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringHd_isNativeReflectConstruct=function(){return!!e})()}var f=function(e){(0,a.A)(KeyringHd,e);var t=KeyringHd_createSuper(KeyringHd);function KeyringHd(...e){var r;return(r=t.call(this,...e)).coreApi=d.A.bch.hd,r}return(0,i.A)(KeyringHd)}(r(368390).M);function KeyringImported_createSuper(e){var t=KeyringImported_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function KeyringImported_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringImported_isNativeReflectConstruct=function(){return!!e})()}var g=function(e){(0,a.A)(KeyringImported,e);var t=KeyringImported_createSuper(KeyringImported);function KeyringImported(...e){var r;return(r=t.call(this,...e)).coreApi=d.A.bch.imported,r}return(0,i.A)(KeyringImported)}(r(884882).e),h=r(507140);function KeyringQr_createSuper(e){var t=KeyringQr_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function KeyringQr_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringQr_isNativeReflectConstruct=function(){return!!e})()}var v=function(e){(0,a.A)(KeyringQr,e);var t=KeyringQr_createSuper(KeyringQr);function KeyringQr(...e){var r;return(r=t.call(this,...e)).coreApi=void 0,r}var r,o=KeyringQr.prototype;return o.signTransaction=function signTransaction(e){throw new h.MS},o.signMessage=function signMessage(e){throw new h.MS},o.prepareAccounts=(r=(0,n.A)((function*(e){throw new h.MS})),function prepareAccounts(e){return r.apply(this,arguments)}),(0,i.A)(KeyringQr)}(r(832818).W);function KeyringWatching_createSuper(e){var t=KeyringWatching_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function KeyringWatching_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(KeyringWatching_isNativeReflectConstruct=function(){return!!e})()}var y=function(e){(0,a.A)(KeyringWatching,e);var t=KeyringWatching_createSuper(KeyringWatching);function KeyringWatching(){return t.apply(this,arguments)}return(0,i.A)(KeyringWatching)}(r(887895).r);function Vault_createSuper(e){var t=Vault_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function Vault_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vault_isNativeReflectConstruct=function(){return!!e})()}var m=function(e){(0,a.A)(Vault,e);var t,r=Vault_createSuper(Vault);function Vault(...e){var t;return(t=r.call(this,...e)).keyringMap={hd:f,qr:v,hw:p,imported:g,watching:y,external:y},t}return Vault.prototype.validateAddress=(t=(0,n.A)((function*(e){return(0,c.validateBtcAddress)({address:(0,u.F)(e),network:yield this.getBtcForkNetwork()})})),function validateAddress(e){return t.apply(this,arguments)}),(0,i.A)(Vault)}(l.default)},339330:(e,t,r)=>{"use strict";r.d(t,{G:()=>w});var n=r(324586),i=r(586330),a=r(230414),o=r(929296),s=r(195309),u=r(972715),c=r(241440),l=r(167612),d=r(824116),p=r(750918),f=r(507140),g=r(514527),h=r(272615),v=r(491180),y=r(825145),m=r(606777),A=r(64238),I=r(901048).Buffer;function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,u.A)(e);if(t){var i=(0,u.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var w=function(e){(0,o.A)(KeyringHardware,e);var t=_createSuper(KeyringHardware);function KeyringHardware(...e){var r,n,a;return(r=t.call(this,...e)).coreApi=p.A.btc.hd,r.buildHardwareInput=(n=(0,i.A)((function*(e,t){var{getHDPath:r,getScriptType:n}=yield(0,h.hc)(),i=r(t),a=n(i);return{prev_index:e.vout,prev_hash:e.txid,amount:new c.A(e.value).toFixed(),address_n:i,script_type:a}})),function(e,t){return n.apply(this,arguments)}),r.buildHardwareOutput=(a=(0,i.A)((function*(e){var{isCharge:t,bip44Path:r,opReturn:n}=e.payload||{};if(n&&"string"==typeof n&&n.length>0)return{script_type:"PAYTOOPRETURN",amount:"0",op_return_data:m.A.bytesToHex(I.from(n))};if(t&&r){var{getHDPath:i,getOutputScriptType:a}=yield(0,h.hc)(),o=i(r);return{script_type:a(o),address_n:o,amount:new c.A(e.value).toFixed()}}return{script_type:"PAYTOADDRESS",address:e.address,amount:new c.A(e.value).toFixed()}})),function(e){return a.apply(this,arguments)}),r.buildPrevTx=function(e){var t=l.ZX.fromHex(e);return{hash:t.getId(),version:t.version,inputs:t.ins.map((function(e){return{prev_hash:e.hash.reverse().toString("hex"),prev_index:e.index,script_sig:e.script.toString("hex"),sequence:e.sequence}})),bin_outputs:t.outs.map((function(e){return{amount:e.value,script_pubkey:e.script.toString("hex")}})),lock_time:t.locktime}},r}var r,n,s,u=KeyringHardware.prototype;return u.signTransaction=(r=(0,i.A)((function*(e){var t=this,{unsignedTx:r}=e,{inputs:n,outputs:a}=r.encodedTx,{dbDevice:o,deviceCommonParams:s}=(0,y.wT)(e.deviceParams),u=yield this.getNetwork(),c=this.vault,d=yield this.coreApi.getCoinName({network:u}),p=n.map((function(e){return e.address})),f=yield c._collectUTXOsInfoByApi(),h={};for(var v of f){var{address:m,path:A}=v;p.includes(m)&&(h[m]=A)}var I,w,b=Array.from(new Set(n.map((function(e){return e.txid})))).filter(Boolean),S=yield c.collectTxs(b),B=yield this.getHardwareSDKInstance(),{connectId:x,deviceId:P}=o,T=yield B.btcSignTransaction(x,P,_objectSpread({coin:d.toLowerCase(),inputs:yield Promise.all(n.map((w=(0,i.A)((function*(e){return t.buildHardwareInput(e,h[e.address])})),function(e){return w.apply(this,arguments)}))),outputs:yield Promise.all(a.map((I=(0,i.A)((function*(e){return t.buildHardwareOutput(e)})),function(e){return I.apply(this,arguments)}))),refTxs:Object.values(S).map((function(e){return t.buildPrevTx(e)}))},s));if(T.success){var{serializedTx:_}=T.payload;return{txid:l.ZX.fromHex(_).getId(),rawTx:_,encodedTx:r.encodedTx}}throw(0,g.MP)(T.payload)})),function signTransaction(e){return r.apply(this,arguments)}),u.signMessage=(n=(0,i.A)((function*(){throw new f.MS})),function signMessage(){return n.apply(this,arguments)}),u.prepareAccounts=(s=(0,i.A)((function*(e){var t,r=this,n=yield this.getCoreApiNetworkInfo(),a=(0,d.getBtcForkNetwork)(n.networkChainCode),o=e.deriveInfo?.addressEncoding;return this.basePrepareHdUtxoAccounts(e,{checkIsAccountUsed:d.checkBtcAddressIsUsed,buildAddressesInfo:(t=(0,i.A)((function*({usedIndexes:t}){for(var n,s=yield r.baseGetDeviceAccountPublicKeys({params:e,usedIndexes:t,sdkGetPublicKeysFn:(n=(0,i.A)((function*({connectId:n,deviceId:i,pathPrefix:a,coinName:o,showOnOnekeyFn:s}){var u=yield r.getHardwareSDKInstance();return yield u.btcGetPublicKey(n,i,_objectSpread(_objectSpread({},e.deviceParams.deviceCommonParams),{},{bundle:t.map((function(e,t){return{path:`${a}/${e}'`,coin:o?.toLowerCase(),showOnOneKey:s(t)}}))}))})),function sdkGetPublicKeysFn(e){return n.apply(this,arguments)})}),u=[],c=0;c<s.length;c+=1){var l=s[c],{path:d,xpub:p,xpubSegwit:f}=l,g=v.A.buildUtxoAddressRelPath(),{addresses:h}=yield r.coreApi.getAddressFromXpub({network:a,xpub:p,relativePaths:[g],addressEncoding:o}),{[g]:y}=h,m={address:y,publicKey:"",path:d,relPath:g,xpub:p,xpubSegwit:f,addresses:{[g]:y}};u.push(m)}return u})),function buildAddressesInfo(e){return t.apply(this,arguments)})})})),function prepareAccounts(e){return s.apply(this,arguments)}),(0,a.A)(KeyringHardware)}(A.V)},368390:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),u=r(824116),c=r(750918);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var l=function(e){(0,a.A)(KeyringHd,e);var t=_createSuper(KeyringHd);function KeyringHd(...e){var r;return(r=t.call(this,...e)).coreApi=c.A.btc.hd,r}var o,s,l,d,p=KeyringHd.prototype;return p.getPrivateKeys=(o=(0,n.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return o.apply(this,arguments)}),p.prepareAccounts=(s=(0,n.A)((function*(e){return(yield Promise.resolve().then(r.bind(r,824116))).initBitcoinEcc(),this.basePrepareAccountsHdUtxo(e,{checkIsAccountUsed:u.checkBtcAddressIsUsed})})),function prepareAccounts(e){return s.apply(this,arguments)}),p.signTransaction=(l=(0,n.A)((function*(e){return this.baseSignTransactionBtc(e)})),function signTransaction(e){return l.apply(this,arguments)}),p.signMessage=(d=(0,n.A)((function*(e){return this.baseSignMessageBtc(e)})),function signMessage(e){return d.apply(this,arguments)}),(0,i.A)(KeyringHd)}(r(129441).R)},884882:(e,t,r)=>{"use strict";r.d(t,{e:()=>c});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),u=r(750918);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var c=function(e){(0,a.A)(KeyringImported,e);var t=_createSuper(KeyringImported);function KeyringImported(...e){var r;return(r=t.call(this,...e)).coreApi=u.A.btc.imported,r}var r,o,s,c,l=KeyringImported.prototype;return l.getPrivateKeys=(r=(0,n.A)((function*(e){return this.baseGetPrivateKeys(e)})),function getPrivateKeys(e){return r.apply(this,arguments)}),l.prepareAccounts=(o=(0,n.A)((function*(e){return this.basePrepareAccountsImportedUtxo(e)})),function prepareAccounts(e){return o.apply(this,arguments)}),l.signTransaction=(s=(0,n.A)((function*(e){return this.baseSignTransactionBtc(e)})),function signTransaction(e){return s.apply(this,arguments)}),l.signMessage=(c=(0,n.A)((function*(e){return this.baseSignMessage(e)})),function signMessage(e){return c.apply(this,arguments)}),(0,i.A)(KeyringImported)}(r(275061).V)},304589:(e,t,r)=>{"use strict";r.d(t,{v:()=>f});var n=r(586330),i=r(230414),a=r(929296),o=r(195309),s=r(972715),u=r(824116),c=r(750918),l=r(507140),d=r(491180),p=r(330189);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,s.A)(e);if(t){var i=(0,s.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,o.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var f=function(e){(0,a.A)(KeyringQr,e);var t=_createSuper(KeyringQr);function KeyringQr(...e){var r;return(r=t.call(this,...e)).coreApi=c.A.btc.hd,r}var r,o=KeyringQr.prototype;return o.buildAirGapAccountChildPathTemplate=function buildAirGapAccountChildPathTemplate(e){return d.A.buildUtxoAddressRelPath()},o.signTransaction=function signTransaction(e){throw new l.MS},o.signMessage=function signMessage(e){throw new l.MS},o.prepareAccounts=(r=(0,n.A)((function*(e){var t,r=this,i=yield p.A.getWallet({walletId:this.walletId}),a=yield this.getCoreApiNetworkInfo(),o=(0,u.getBtcForkNetwork)(a.networkChainCode),s=e.deriveInfo?.addressEncoding;return this.basePrepareHdUtxoAccounts(e,{buildAddressesInfo:(t=(0,n.A)((function*({usedIndexes:t}){var n=[];for(var a of t){var{fullPath:u,airGapAccount:c,childPathTemplate:p}=yield r.findQrWalletAirGapAccount(e,{index:a,wallet:i});if(!c)throw new l.a2;var f="",g=void 0;if(p){g=d.A.buildPathFromTemplate({template:p,index:a});var h=c?.extendedPublicKey;if(!h)throw new Error("xpub not found");f=h}if(!f)throw new Error("publicKey not found");if(!g)throw new Error("addressRelPath not found");var v=yield r.coreApi.getAddressFromXpub({network:o,xpub:f,relativePaths:[g],addressEncoding:s}),{[g]:y}=v.addresses,m={address:y,publicKey:"",path:c.path,relPath:g,xpub:f,xpubSegwit:v.xpubSegwit,addresses:{[g]:y}};n.push(m),console.log("KeyringQr prepareAccounts",{params:e,wallet:i,fullPath:u,airGapAccount:c,addressInfo:m})}return n})),function buildAddressesInfo(e){return t.apply(this,arguments)})})})),function prepareAccounts(e){return r.apply(this,arguments)}),(0,i.A)(KeyringQr)}(r(832818).W)},887895:(e,t,r)=>{"use strict";r.d(t,{r:()=>l});var n=r(586330),i=r(230414),a=r(85018),o=r(929296),s=r(195309),u=r(972715),c=r(750918);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,u.A)(e);if(t){var i=(0,u.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var l=function(e){(0,o.A)(KeyringWatching,e);var t,r=_createSuper(KeyringWatching);function KeyringWatching(...e){var t;return(t=r.call(this,...e)).coreApi=c.A.btc.hd,t}return KeyringWatching.prototype.prepareAccounts=(t=(0,n.A)((function*(e){return(0,a.A)((0,u.A)(KeyringWatching.prototype),"basePrepareUtxoWatchingAccounts",this).call(this,e)})),function prepareAccounts(e){return t.apply(this,arguments)}),(0,i.A)(KeyringWatching)}(r(7440).w)},877563:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(324586),i=r(839850),a=r(503668),o=r.n(a),s=r(603514),u=r.n(s),c=r(586330),l=r(230414),d=r(929296),p=r(195309),f=r(972715),g=r(241440),h=r(824116),v=r(554902),y=r(404727),m=r(180556),A=r(814878),I=r(507140),w=r(825145),b=r(657355),S=r(584186),B=r(369387),x=r(232471),P=r(34344),T=r(339330),_=r(368390),E=r(884882),K=r(304589),R=r(887895),M=["txId","value"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,f.A)(e);if(t){var i=(0,f.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,p.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var k=function(e){(0,d.A)(VaultBtc,e);var t=_createSuper(VaultBtc);function VaultBtc(...e){var r;return(r=t.call(this,...e)).keyringMap={hd:_.M,qr:K.v,hw:T.G,imported:E.e,watching:R.r,external:R.r},r._getFeeRate=(0,b.E)((0,c.A)((function*(){try{var e=yield r.backgroundApi.serviceGas.estimateFee({networkId:r.networkId,accountAddress:yield r.getAccountAddress()}),{feeUTXO:t}=e;if(!t||u()(t))throw new I.He("Failed to get fee rates.");for(var n=t.map((function(e){var t;return new g.A(null!=(t=e.feeRate)?t:0).toFixed(0)})),i=n.findIndex((function(e){return new g.A(e).lt(0)}));i>=0;){for(var a=i-1,o=i+1;;){if(a>=0&&new g.A(n[a]).gte(0)){n[i]=n[a];break}if(o<n.length&&new g.A(n[o]).gte(0)){n[i]=n[o];break}if(o+=1,(a-=1)<0&&o>=n.length)break}i=n.findIndex((function(e){return new g.A(e).lt(0)}))}return n.sort((function(e,t){return new g.A(e).comparedTo(new g.A(t))}))}catch(e){throw console.error(e),new I.He("Failed to get fee rates.")}})),{promise:!0,max:1,maxAge:3e4}),r._collectUTXOsInfoByApi=(0,b.E)((0,c.A)((function*(){try{var{utxoList:e}=yield r.backgroundApi.serviceAccountProfile.fetchAccountDetails({networkId:r.networkId,accountAddress:yield r.getAccountAddress(),xpub:yield r.getAccountXpub(),withUTXOList:!0});if(!e)throw new I.He("Failed to get UTXO list.");return e}catch(e){throw new I.He("Failed to get UTXO list.")}})),{promise:!0,max:1,maxAge:S.A.getTimeDurationMs({seconds:30})}),r}var r,n,a,s,p,f,P,k,O,C,N,H,F,V,U,L,q,j,X,D,W,z=VaultBtc.prototype;return z.buildAccountAddressDetail=(r=(0,c.A)((function*(e){var{account:t,networkId:r}=e,{address:n}=t;return{networkId:r,normalizedAddress:n,displayAddress:n,address:n,baseAddress:n,isValid:!0,allowEmptyAddress:!1}})),function buildAccountAddressDetail(e){return r.apply(this,arguments)}),z.buildDecodedTx=(n=(0,c.A)((function*(e){var{unsignedTx:t}=e,r=t.encodedTx,{inputs:n,outputs:i,psbtHex:a,inputsToSign:o}=r,s=yield this.getNetwork(),u=yield this.getAccount(),c=yield this.backgroundApi.serviceToken.getToken({networkId:this.networkId,tokenIdOnNetwork:"",accountAddress:u.address});if(!c)throw new I.He("Native token not found");var l,d=n.map((function(e){return{address:e.address,balance:new g.A(e.value).shiftedBy(-s.decimals).toFixed(),balanceValue:e.value,symbol:s.symbol,isMine:!0}})),p=i.filter((function(e){return!e.payload?.isCharge})).map((function(e){return{address:e.address,balance:new g.A(e.value).shiftedBy(-s.decimals).toFixed(),balanceValue:e.value,symbol:s.symbol,isMine:e.address===u.address}})),f=new g.A(0),h=new g.A(0);l=[{type:x.kF.ASSET_TRANSFER,assetTransfer:{from:u.address,to:p[0].address,sends:p.map((function(e){var t;return f=f.plus(e.balance),h=h.plus(e.balanceValue),{from:u.address,to:e.address,isNative:!0,tokenIdOnNetwork:"",name:c.name,icon:null!=(t=c.logoURI)?t:"",amount:e.balance,amountValue:e.balanceValue,symbol:s.symbol}})),receives:[],utxoFrom:d,utxoTo:p}}];var v=new g.A(r.fee).shiftedBy(-1*s.feeMeta.decimals).toFixed();return{txid:"",owner:u.address,signer:u.address,nonce:0,actions:l,status:x.Y1.Pending,networkId:this.networkId,accountId:this.accountId,extraInfo:null,payload:{type:B.mz.Send},encodedTx:r,totalFeeInNative:v,nativeAmount:f.toFixed(),nativeAmountValue:h.toFixed()}})),function buildDecodedTx(e){return n.apply(this,arguments)}),z.buildEncodedTx=(a=(0,c.A)((function*(e){var{transfersInfo:t,specifiedFeeRate:r}=e;if(!t||u()(t))throw new I.He("transfersInfo is required");return this._buildEncodedTxFromTransfer({transfersInfo:t,specifiedFeeRate:r})})),function buildEncodedTx(e){return a.apply(this,arguments)}),z.buildUnsignedTx=(s=(0,c.A)((function*(e){var t,r,n=null!=(t=e.encodedTx)?t:yield this.buildEncodedTx(e);if(n)return this._buildUnsignedTxFromEncodedTx({encodedTx:n,transfersInfo:null!=(r=e.transfersInfo)?r:[]});throw new I.He})),function buildUnsignedTx(e){return s.apply(this,arguments)}),z.updateUnsignedTx=(p=(0,c.A)((function*(e){var{unsignedTx:t,feeInfo:r}=e,n=t.encodedTx,{psbtHex:i,inputsToSign:a}=n;if(r&&(!i||!a)){if(!t.transfersInfo||u()(t.transfersInfo))throw new I.He("transfersInfo is required");n=yield this._attachFeeInfoToEncodedTx({encodedTx:t.encodedTx,transfersInfo:t.transfersInfo,feeInfo:r})}return t.encodedTx=n,Promise.resolve(t)})),function updateUnsignedTx(e){return p.apply(this,arguments)}),z._attachFeeInfoToEncodedTx=(f=(0,c.A)((function*({encodedTx:e,feeInfo:t,transfersInfo:r}){var n=yield this.getNetwork();if(t.feeUTXO?.feeRate){var i=new g.A(t.feeUTXO.feeRate).shiftedBy(-n.feeMeta.decimals).toFixed();if("string"==typeof i)return this._buildEncodedTxFromTransfer({transfersInfo:r,specifiedFeeRate:i})}return Promise.resolve(e)})),function _attachFeeInfoToEncodedTx(e){return f.apply(this,arguments)}),z.getBtcForkNetwork=(P=(0,c.A)((function*(){return(0,h.getBtcForkNetwork)(yield this.getNetworkImpl())})),function getBtcForkNetwork(){return P.apply(this,arguments)}),z.validatePrivateKey=function validatePrivateKey(){return Promise.resolve({isValid:!1})},z.validateXpub=(k=(0,c.A)((function*(e){return Promise.resolve((0,h.validateBtcXpub)({xpub:e}))})),function validateXpub(e){return k.apply(this,arguments)}),z.validateXprvt=(O=(0,c.A)((function*(e){return Promise.resolve((0,h.validateBtcXprvt)({xprvt:e}))})),function validateXprvt(e){return O.apply(this,arguments)}),z.validateAddress=(C=(0,c.A)((function*(e){return(0,h.validateBtcAddress)({address:e,network:yield this.getBtcForkNetwork()})})),function validateAddress(e){return C.apply(this,arguments)}),z.validateGeneralInput=(N=(0,c.A)((function*(e){var{result:t,inputDecoded:r}=yield this.baseValidateGeneralInput(e),n="";t.xpubResult?.isValid&&(n=r);var i=yield this.getBtcForkNetwork();if(!n&&t.xprvtResult?.isValid&&({xpub:n}=(0,h.getBtcXpubFromXprvt)({network:i,privateKeyRaw:(0,h.convertBtcXprvtToHex)({xprvt:r})})),n){var{supportEncodings:a}=(0,h.getBtcXpubSupportedAddressEncodings)({xpub:n,network:i});if(a&&a.length){var o=yield this.getVaultSettings(),s=Object.values(o.accountDeriveInfo);t.deriveInfoItems=s.filter((function(e){return e.addressEncoding&&a.includes(e.addressEncoding)}))}}return t})),function validateGeneralInput(e){return N.apply(this,arguments)}),z.parseAddressEncodings=function parseAddressEncodings(e){var t=this;return Promise.all(e.map((function(e){return t.validateAddress(e)}))).then((function(e){return e.map((function(e){return e.encoding}))}))},z._buildEncodedTxFromTransfer=(H=(0,c.A)((function*(e){var{transfersInfo:t}=e;if(1===t.length&&!t[0].to)throw new Error("buildEncodedTx ERROR: transferInfo.to is missing");return this._buildEncodedTxFromBatchTransfer(e)})),function _buildEncodedTxFromTransfer(e){return H.apply(this,arguments)}),z._buildEncodedTxFromBatchTransfer=(F=(0,c.A)((function*(e){var{transfersInfo:t}=e,r=t[0],n=yield this.getAccount(),{inputs:a,outputs:s,fee:u,inputsForCoinSelect:c,outputsForCoinSelect:l}=yield this._buildTransferParamsWithCoinSelector(e);if(!a||!s||o()(u))throw new I.c4({message:"Failed to select UTXOs"});return{inputs:a.map((function(e){var{txId:t,value:r}=e,a=(0,i.A)(e,M);return _objectSpread(_objectSpread({address:n.address,path:""},a),{},{txid:t,value:r.toString()})})),outputs:s.map((function({value:e,address:t,script:i}){var a=e?.toString();if(a&&new g.A(a).eq(0)&&!t&&i===r.opReturn)return{address:"",value:a,payload:{opReturn:r.opReturn}};var o=t||n.address;if(!o)throw new Error("buildEncodedTxFromBatchTransfer ERROR: Invalid change address");if(!a||new g.A(a).lte(0))throw new Error("buildEncodedTxFromBatchTransfer ERROR: Invalid value");return{address:o,value:a,payload:t?void 0:{isCharge:!0,bip44Path:(0,m.zf)(n,n.address)}}})),inputsForCoinSelect:c,outputsForCoinSelect:l,fee:u.toString()}})),function _buildEncodedTxFromBatchTransfer(e){return F.apply(this,arguments)}),z._buildTransferParamsWithCoinSelector=(V=(0,c.A)((function*({transfersInfo:e,specifiedFeeRate:t}){var r=yield this.getNetwork();if(!e.length)throw new Error("buildTransferParamsWithCoinSelector ERROR: transferInfos is required");var n=e.length>1,i=yield this._collectUTXOsInfoByApi(),a=void 0!==t?new g.A(t).shiftedBy(r.feeMeta.decimals).toFixed():(yield this._getFeeRate())[1],o=i.map((function({txid:e,vout:t,value:r,address:n,path:i}){return{txId:e,vout:t,value:parseInt(r),address:n,path:i}})),s=[];if(n)s=e.map((function({to:e,amount:t}){return{address:e,value:parseInt(new g.A(t).shiftedBy(r.decimals).toFixed())}}));else{var u=e[0],{to:c,amount:l}=u,d=i.reduce((function(e,{value:t}){return e.plus(t)}),new g.A("0")).shiftedBy(-r.decimals);if(d.lt(l))throw new I.c4;var p=d.lte(l),f=parseInt(new g.A(l).shiftedBy(r.decimals).toFixed());s=[p?{address:c,isMax:!0}:{address:c,value:f}],u.opReturn&&"string"==typeof u.opReturn&&u.opReturn.length&&s.push({address:"",value:0,script:u.opReturn})}var h=n?void 0:e[0].coinSelectAlgorithm;if(!n&&s.length>2)throw new Error("single transfer should only have one output");var{inputs:v,outputs:y,fee:m}=(0,A.qk)({inputsForCoinSelect:o,outputsForCoinSelect:s,feeRate:a,algorithm:h});return{inputs:v,outputs:y,fee:m,inputsForCoinSelect:o,outputsForCoinSelect:s,feeRate:a}})),function _buildTransferParamsWithCoinSelector(e){return V.apply(this,arguments)}),z._buildUnsignedTxFromEncodedTx=(U=(0,c.A)((function*({encodedTx:e,transfersInfo:t}){var{inputs:r,outputs:n,inputsForCoinSelect:i}=e,a=79,o=[];for(var s of r){var u=new g.A(s.value);o.push({address:s.address,value:u,utxo:{txid:s.txid,vout:s.vout,value:u}})}var c,l=i?.filter((function(e){return o.some((function(t){return t.utxo?.txid===e.txId&&t.utxo.vout===e.vout}))}));Number(l?.length)>0&&n.length>0&&(a=(0,m.Ac)(null!=l?l:[],null!=(c=n.map((function(e){return{address:e.address,value:parseInt(e.value)}})))?c:[]));var d={txSize:a,encodedTx:e,transfersInfo:t};return Promise.resolve(d)})),function _buildUnsignedTxFromEncodedTx(e){return U.apply(this,arguments)}),z.collectTxs=(L=(0,c.A)((function*(e){try{var t={},r=yield this.backgroundApi.serviceSend.getRawTransactions({networkId:this.networkId,txids:e});return Object.keys(r).forEach((function(e){return t[e]=r[e].rawTx})),t}catch(e){throw console.error(e),new I.He("Failed to get raw transactions.")}})),function collectTxs(e){return L.apply(this,arguments)}),z._getRelPathToAddressByApi=(q=(0,c.A)((function*({addresses:e,account:t}){var r=yield this._collectUTXOsInfoByApi(),n={};for(var i of r){var{address:a,path:o}=i;if(e.includes(a)){var s=o.split("/").slice(-2).join("/");n[o]={address:a,relPath:s}}}var u="0/0",c=[t.path,u].join("/");return n[c]||(n[c]={address:t.address,relPath:u}),{relPaths:Object.values(n).map((function(e){return e.relPath})),pathToAddresses:n}})),function _getRelPathToAddressByApi(e){return q.apply(this,arguments)}),z._collectInfoForSoftwareSign=(j=(0,c.A)((function*(e){var{inputs:t}=e.encodedTx,r=yield this.parseAddressEncodings(t.map((function(e){return e.address}))),n=Array.from(new Set(r.map((function(e,r){if(e===y.EAddressEncodings.P2PKH)return(0,w.wT)(t[r]).txid})).filter((function(e){return!!e}))));return[r,yield this.collectTxs(n)]})),function _collectInfoForSoftwareSign(e){return j.apply(this,arguments)}),z.prepareBtcSignExtraInfo=(X=(0,c.A)((function*({unsignedTx:e,unsignedMessage:t}){var r=yield this.getAccount(),n=[];if(t&&(n=[r.address]),e){var{inputs:i,inputsToSign:a}=e.encodedTx;n=[].concat(null!=a?a:[],null!=i?i:[]).filter(Boolean).map((function(e){return e.address})).concat(r.address)}var{relPaths:o,pathToAddresses:s}=yield this._getRelPathToAddressByApi({addresses:n,account:r}),u={pathToAddresses:s};if(e){var[c,l]=yield this._collectInfoForSoftwareSign(e);u.inputAddressesEncodings=c,u.nonWitnessPrevTxs=l}return{btcExtraInfo:u,account:_objectSpread(_objectSpread({},r),{},{relPaths:o})}})),function prepareBtcSignExtraInfo(e){return X.apply(this,arguments)}),z.getPrivateKeyFromImported=function getPrivateKeyFromImported(e){var t=(0,v.mP)({encodedText:e.input}),r=(0,h.convertBtcXprvtToHex)({xprvt:t});return r=(0,v.uX)({text:r}),Promise.resolve({privateKey:r})},z.getAccountXpub=(D=(0,c.A)((function*(){var e,t=yield this.getAccount();return null!=(e=t.xpubSegwit)?e:t.xpub})),function getAccountXpub(){return D.apply(this,arguments)}),z.buildEstimateFeeParams=(W=(0,c.A)((function*(){return Promise.resolve(void 0)})),function buildEstimateFeeParams(){return W.apply(this,arguments)}),(0,l.A)(VaultBtc)}(P.S)},970742:(e,t,r)=>{"use strict";var n=r(939216),i=r(825636).Buffer;e.exports=function(e){function decodeRaw(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function encode(t){var r=e(t);return n.encode(i.concat([t,r],t.length+4))},decode:function decode(e){var t=decodeRaw(n.decode(e));if(!t)throw new Error("Invalid checksum");return t},decodeUnsafe:function decodeUnsafe(e){var t=n.decodeUnsafe(e);if(t)return decodeRaw(t)}}}},222747:(e,t,r)=>{"use strict";var n=r(213257),i=r(970742);e.exports=i((function sha256x2(e){var t=n("sha256").update(e).digest();return n("sha256").update(t).digest()}))},335344:(e,t,r)=>{var n=r(222747),i=r(850630),a=r(901048).Buffer,o={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},s={Mainnet:"mainnet",Testnet:"testnet"},u={};function detectAddressFormat(e){return decodeAddress(e).format}function detectAddressNetwork(e){return decodeAddress(e).network}function detectAddressType(e){return decodeAddress(e).type}u.P2PKH="p2pkh",u.P2SH="p2sh";var c={};function decodeAddress(e){try{return function decodeBase58Address(e){try{var t=n.decode(e);if(t.length!==l)throw new InvalidAddressError;var r=t[0],i=Array.prototype.slice.call(t,1);switch(r){case c[o.Legacy][s.Mainnet][u.P2PKH]:return{hash:i,format:o.Legacy,network:s.Mainnet,type:u.P2PKH};case c[o.Legacy][s.Mainnet][u.P2SH]:return{hash:i,format:o.Legacy,network:s.Mainnet,type:u.P2SH};case c[o.Legacy][s.Testnet][u.P2PKH]:return{hash:i,format:o.Legacy,network:s.Testnet,type:u.P2PKH};case c[o.Legacy][s.Testnet][u.P2SH]:return{hash:i,format:o.Legacy,network:s.Testnet,type:u.P2SH};case c[o.Bitpay][s.Mainnet][u.P2PKH]:return{hash:i,format:o.Bitpay,network:s.Mainnet,type:u.P2PKH};case c[o.Bitpay][s.Mainnet][u.P2SH]:return{hash:i,format:o.Bitpay,network:s.Mainnet,type:u.P2SH}}}catch(e){}throw new InvalidAddressError}(e)}catch(e){}try{return function decodeCashAddress(e){if(-1!==e.indexOf(":"))try{return decodeCashAddressWithPrefix(e)}catch(e){}else for(var t=["bitcoincash","bchtest","bchreg"],r=0;r<t.length;++r)try{return decodeCashAddressWithPrefix(t[r]+":"+e)}catch(e){}throw new InvalidAddressError}(e)}catch(e){}throw new InvalidAddressError}c[o.Legacy]={},c[o.Legacy][s.Mainnet]={},c[o.Legacy][s.Mainnet][u.P2PKH]=0,c[o.Legacy][s.Mainnet][u.P2SH]=5,c[o.Legacy][s.Testnet]={},c[o.Legacy][s.Testnet][u.P2PKH]=111,c[o.Legacy][s.Testnet][u.P2SH]=196,c[o.Bitpay]={},c[o.Bitpay][s.Mainnet]={},c[o.Bitpay][s.Mainnet][u.P2PKH]=28,c[o.Bitpay][s.Mainnet][u.P2SH]=40,c[o.Bitpay][s.Testnet]={},c[o.Bitpay][s.Testnet][u.P2PKH]=111,c[o.Bitpay][s.Testnet][u.P2SH]=196;var l=21;function decodeCashAddressWithPrefix(e){try{var t=i.decode(e),r=Array.prototype.slice.call(t.hash,0),n="P2PKH"===t.type?u.P2PKH:u.P2SH;switch(t.prefix){case"bitcoincash":return{hash:r,format:o.Cashaddr,network:s.Mainnet,type:n};case"bchtest":case"bchreg":return{hash:r,format:o.Cashaddr,network:s.Testnet,type:n}}}catch(e){}throw new InvalidAddressError}function InvalidAddressError(){var e=new Error;this.name=e.name="InvalidAddressError",this.message=e.message="Received an invalid Bitcoin Cash address as input.",this.stack=e.stack}InvalidAddressError.prototype=Object.create(Error.prototype),e.exports={Format:o,Network:s,Type:u,isValidAddress:function isValidAddress(e){try{return decodeAddress(e),!0}catch(e){return!1}},detectAddressFormat,detectAddressNetwork,detectAddressType,toLegacyAddress:function toLegacyAddress(e){var t=decodeAddress(e);return t.format===o.Legacy?e:function encodeAsLegacy(e){var t=c[o.Legacy][e.network][e.type],r=a.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),n.encode(r)}(t)},toBitpayAddress:function toBitpayAddress(e){var t=decodeAddress(e);return t.format===o.Bitpay?e:function encodeAsBitpay(e){var t=c[o.Bitpay][e.network][e.type],r=a.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),n.encode(r)}(t)},toCashAddress:function toCashAddress(e){return function encodeAsCashaddr(e){var t=e.network===s.Mainnet?"bitcoincash":"bchtest",r=e.type===u.P2PKH?"P2PKH":"P2SH",n=new Uint8Array(e.hash);return i.encode(t,r,n)}(decodeAddress(e))},isLegacyAddress:function isLegacyAddress(e){return detectAddressFormat(e)===o.Legacy},isBitpayAddress:function isBitpayAddress(e){return detectAddressFormat(e)===o.Bitpay},isCashAddress:function isCashAddress(e){return detectAddressFormat(e)===o.Cashaddr},isMainnetAddress:function isMainnetAddress(e){return detectAddressNetwork(e)===s.Mainnet},isTestnetAddress:function isTestnetAddress(e){return detectAddressNetwork(e)===s.Testnet},isP2PKHAddress:function isP2PKHAddress(e){return detectAddressType(e)===u.P2PKH},isP2SHAddress:function isP2SHAddress(e){return detectAddressType(e)===u.P2SH},InvalidAddressError}},664864:(e,t,r)=>{var n;e=r.nmd(e);var i=function(e){"use strict";var t=1e7,r=7,n=9007199254740992,a=smallToArray(n),o=Math.log(n);function Integer(e,t){return void 0===e?Integer[0]:void 0!==t?10==+t?parseValue(e):parseBase(e,t):parseValue(e)}function BigInteger(e,t){this.value=e,this.sign=t,this.isSmall=!1}function SmallInteger(e){this.value=e,this.sign=e<0,this.isSmall=!0}function isPrecise(e){return-n<e&&e<n}function smallToArray(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function arrayToSmall(e){trim(e);var r=e.length;if(r<4&&compareAbs(e,a)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function trim(e){for(var t=e.length;0===e[--t];);e.length=t+1}function createArray(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function truncate(e){return e>0?Math.floor(e):Math.ceil(e)}function add(e,r){var n,i,a=e.length,o=r.length,s=new Array(a),u=0,c=t;for(i=0;i<o;i++)u=(n=e[i]+r[i]+u)>=c?1:0,s[i]=n-u*c;for(;i<a;)u=(n=e[i]+u)===c?1:0,s[i++]=n-u*c;return u>0&&s.push(u),s}function addAny(e,t){return e.length>=t.length?add(e,t):add(t,e)}function addSmall(e,r){var n,i,a=e.length,o=new Array(a),s=t;for(i=0;i<a;i++)n=e[i]-s+r,r=Math.floor(n/s),o[i]=n-r*s,r+=1;for(;r>0;)o[i++]=r%s,r=Math.floor(r/s);return o}function subtract(e,r){var n,i,a=e.length,o=r.length,s=new Array(a),u=0,c=t;for(n=0;n<o;n++)(i=e[n]-u-r[n])<0?(i+=c,u=1):u=0,s[n]=i;for(n=o;n<a;n++){if(!((i=e[n]-u)<0)){s[n++]=i;break}i+=c,s[n]=i}for(;n<a;n++)s[n]=e[n];return trim(s),s}function subtractSmall(e,r,n){var i,a,o=e.length,s=new Array(o),u=-r,c=t;for(i=0;i<o;i++)a=e[i]+u,u=Math.floor(a/c),a%=c,s[i]=a<0?a+c:a;return"number"==typeof(s=arrayToSmall(s))?(n&&(s=-s),new SmallInteger(s)):new BigInteger(s,n)}function multiplyLong(e,r){var n,i,a,o,s=e.length,u=r.length,c=createArray(s+u),l=t;for(a=0;a<s;++a){o=e[a];for(var d=0;d<u;++d)n=o*r[d]+c[a+d],i=Math.floor(n/l),c[a+d]=n-i*l,c[a+d+1]+=i}return trim(c),c}function multiplySmall(e,r){var n,i,a=e.length,o=new Array(a),s=t,u=0;for(i=0;i<a;i++)n=e[i]*r+u,u=Math.floor(n/s),o[i]=n-u*s;for(;u>0;)o[i++]=u%s,u=Math.floor(u/s);return o}function shiftLeft(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function multiplyKaratsuba(e,t){var r=Math.max(e.length,t.length);if(r<=30)return multiplyLong(e,t);r=Math.ceil(r/2);var n=e.slice(r),i=e.slice(0,r),a=t.slice(r),o=t.slice(0,r),s=multiplyKaratsuba(i,o),u=multiplyKaratsuba(n,a),c=multiplyKaratsuba(addAny(i,n),addAny(o,a)),l=addAny(addAny(s,shiftLeft(subtract(subtract(c,s),u),r)),shiftLeft(u,2*r));return trim(l),l}function multiplySmallAndArray(e,r,n){return new BigInteger(e<t?multiplySmall(r,e):multiplyLong(r,smallToArray(e)),n)}function square(e){var r,n,i,a,o=e.length,s=createArray(o+o),u=t;for(i=0;i<o;i++){n=0-(a=e[i])*a;for(var c=i;c<o;c++)r=a*e[c]*2+s[i+c]+n,n=Math.floor(r/u),s[i+c]=r-n*u;s[i+o]=n}return trim(s),s}function divModSmall(e,r){var n,i,a,o,s=e.length,u=createArray(s),c=t;for(a=0,n=s-1;n>=0;--n)a=(o=a*c+e[n])-(i=truncate(o/r))*r,u[n]=0|i;return[u,0|a]}function divModAny(e,r){var n,i,a=parseValue(r),o=e.value,s=a.value;if(0===s)throw new Error("Cannot divide by zero");if(e.isSmall)return a.isSmall?[new SmallInteger(truncate(o/s)),new SmallInteger(o%s)]:[Integer[0],e];if(a.isSmall){if(1===s)return[e,Integer[0]];if(-1==s)return[e.negate(),Integer[0]];var u=Math.abs(s);if(u<t){i=arrayToSmall((n=divModSmall(o,u))[0]);var c=n[1];return e.sign&&(c=-c),"number"==typeof i?(e.sign!==a.sign&&(i=-i),[new SmallInteger(i),new SmallInteger(c)]):[new BigInteger(i,e.sign!==a.sign),new SmallInteger(c)]}s=smallToArray(u)}var l=compareAbs(o,s);if(-1===l)return[Integer[0],e];if(0===l)return[Integer[e.sign===a.sign?1:-1],Integer[0]];n=o.length+s.length<=200?function divMod1(e,r){var n,i,a,o,s,u,c,l=e.length,d=r.length,p=t,f=createArray(r.length),g=r[d-1],h=Math.ceil(p/(2*g)),v=multiplySmall(e,h),y=multiplySmall(r,h);for(v.length<=l&&v.push(0),y.push(0),g=y[d-1],i=l-d;i>=0;i--){for(n=p-1,v[i+d]!==g&&(n=Math.floor((v[i+d]*p+v[i+d-1])/g)),a=0,o=0,u=y.length,s=0;s<u;s++)a+=n*y[s],c=Math.floor(a/p),o+=v[i+s]-(a-c*p),a=c,o<0?(v[i+s]=o+p,o=-1):(v[i+s]=o,o=0);for(;0!==o;){for(n-=1,a=0,s=0;s<u;s++)(a+=v[i+s]-p+y[s])<0?(v[i+s]=a+p,a=0):(v[i+s]=a,a=1);o+=a}f[i]=n}return v=divModSmall(v,h)[0],[arrayToSmall(f),arrayToSmall(v)]}(o,s):function divMod2(e,r){for(var n,i,a,o,s,u=e.length,c=r.length,l=[],d=[],p=t;u;)if(d.unshift(e[--u]),trim(d),compareAbs(d,r)<0)l.push(0);else{a=d[(i=d.length)-1]*p+d[i-2],o=r[c-1]*p+r[c-2],i>c&&(a=(a+1)*p),n=Math.ceil(a/o);do{if(compareAbs(s=multiplySmall(r,n),d)<=0)break;n--}while(n);l.push(n),d=subtract(d,s)}return l.reverse(),[arrayToSmall(l),arrayToSmall(d)]}(o,s),i=n[0];var d=e.sign!==a.sign,p=n[1],f=e.sign;return"number"==typeof i?(d&&(i=-i),i=new SmallInteger(i)):i=new BigInteger(i,d),"number"==typeof p?(f&&(p=-p),p=new SmallInteger(p)):p=new BigInteger(p,f),[i,p]}function compareAbs(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function isBasicPrime(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function millerRabinTest(e,t){for(var r,n,a,o=e.prev(),s=o,u=0;s.isEven();)s=s.divide(2),u++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(a=i(t[n]).modPow(s,e)).equals(Integer[1])&&!a.equals(o)){for(r=u-1;0!=r;r--){if((a=a.square().mod(e)).isUnit())return!1;if(a.equals(o))continue e}return!1}return!0}BigInteger.prototype=Object.create(Integer.prototype),SmallInteger.prototype=Object.create(Integer.prototype),BigInteger.prototype.add=function(e){var t=parseValue(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new BigInteger(addSmall(r,Math.abs(n)),this.sign):new BigInteger(addAny(r,n),this.sign)},BigInteger.prototype.plus=BigInteger.prototype.add,SmallInteger.prototype.add=function(e){var t=parseValue(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(isPrecise(r+n))return new SmallInteger(r+n);n=smallToArray(Math.abs(n))}return new BigInteger(addSmall(n,Math.abs(r)),r<0)},SmallInteger.prototype.plus=SmallInteger.prototype.add,BigInteger.prototype.subtract=function(e){var t=parseValue(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?subtractSmall(r,Math.abs(n),this.sign):function subtractAny(e,t,r){var n;return compareAbs(e,t)>=0?n=subtract(e,t):(n=subtract(t,e),r=!r),"number"==typeof(n=arrayToSmall(n))?(r&&(n=-n),new SmallInteger(n)):new BigInteger(n,r)}(r,n,this.sign)},BigInteger.prototype.minus=BigInteger.prototype.subtract,SmallInteger.prototype.subtract=function(e){var t=parseValue(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new SmallInteger(r-n):subtractSmall(n,Math.abs(r),r>=0)},SmallInteger.prototype.minus=SmallInteger.prototype.subtract,BigInteger.prototype.negate=function(){return new BigInteger(this.value,!this.sign)},SmallInteger.prototype.negate=function(){var e=this.sign,t=new SmallInteger(-this.value);return t.sign=!e,t},BigInteger.prototype.abs=function(){return new BigInteger(this.value,!1)},SmallInteger.prototype.abs=function(){return new SmallInteger(Math.abs(this.value))},BigInteger.prototype.multiply=function(e){var r,n=parseValue(e),i=this.value,a=n.value,o=this.sign!==n.sign;if(n.isSmall){if(0===a)return Integer[0];if(1===a)return this;if(-1===a)return this.negate();if((r=Math.abs(a))<t)return new BigInteger(multiplySmall(i,r),o);a=smallToArray(r)}return function useKaratsuba(e,t){return-.012*e-.012*t+15e-6*e*t>0}(i.length,a.length)?new BigInteger(multiplyKaratsuba(i,a),o):new BigInteger(multiplyLong(i,a),o)},BigInteger.prototype.times=BigInteger.prototype.multiply,SmallInteger.prototype._multiplyBySmall=function(e){return isPrecise(e.value*this.value)?new SmallInteger(e.value*this.value):multiplySmallAndArray(Math.abs(e.value),smallToArray(Math.abs(this.value)),this.sign!==e.sign)},BigInteger.prototype._multiplyBySmall=function(e){return 0===e.value?Integer[0]:1===e.value?this:-1===e.value?this.negate():multiplySmallAndArray(Math.abs(e.value),this.value,this.sign!==e.sign)},SmallInteger.prototype.multiply=function(e){return parseValue(e)._multiplyBySmall(this)},SmallInteger.prototype.times=SmallInteger.prototype.multiply,BigInteger.prototype.square=function(){return new BigInteger(square(this.value),!1)},SmallInteger.prototype.square=function(){var e=this.value*this.value;return isPrecise(e)?new SmallInteger(e):new BigInteger(square(smallToArray(Math.abs(this.value))),!1)},BigInteger.prototype.divmod=function(e){var t=divModAny(this,e);return{quotient:t[0],remainder:t[1]}},SmallInteger.prototype.divmod=BigInteger.prototype.divmod,BigInteger.prototype.divide=function(e){return divModAny(this,e)[0]},SmallInteger.prototype.over=SmallInteger.prototype.divide=BigInteger.prototype.over=BigInteger.prototype.divide,BigInteger.prototype.mod=function(e){return divModAny(this,e)[1]},SmallInteger.prototype.remainder=SmallInteger.prototype.mod=BigInteger.prototype.remainder=BigInteger.prototype.mod,BigInteger.prototype.pow=function(e){var t,r,n,i=parseValue(e),a=this.value,o=i.value;if(0===o)return Integer[1];if(0===a)return Integer[0];if(1===a)return Integer[1];if(-1===a)return i.isEven()?Integer[1]:Integer[-1];if(i.sign)return Integer[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&isPrecise(t=Math.pow(a,o)))return new SmallInteger(truncate(t));for(r=this,n=Integer[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},SmallInteger.prototype.pow=BigInteger.prototype.pow,BigInteger.prototype.modPow=function(e,t){if(e=parseValue(e),(t=parseValue(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=Integer[1],n=this.mod(t);e.isPositive();){if(n.isZero())return Integer[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},SmallInteger.prototype.modPow=BigInteger.prototype.modPow,BigInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=this.value,n=t.value;return t.isSmall?1:compareAbs(r,n)},SmallInteger.prototype.compareAbs=function(e){var t=parseValue(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},BigInteger.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=parseValue(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:compareAbs(r,n)*(this.sign?-1:1)},BigInteger.prototype.compareTo=BigInteger.prototype.compare,SmallInteger.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=parseValue(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},SmallInteger.prototype.compareTo=SmallInteger.prototype.compare,BigInteger.prototype.equals=function(e){return 0===this.compare(e)},SmallInteger.prototype.eq=SmallInteger.prototype.equals=BigInteger.prototype.eq=BigInteger.prototype.equals,BigInteger.prototype.notEquals=function(e){return 0!==this.compare(e)},SmallInteger.prototype.neq=SmallInteger.prototype.notEquals=BigInteger.prototype.neq=BigInteger.prototype.notEquals,BigInteger.prototype.greater=function(e){return this.compare(e)>0},SmallInteger.prototype.gt=SmallInteger.prototype.greater=BigInteger.prototype.gt=BigInteger.prototype.greater,BigInteger.prototype.lesser=function(e){return this.compare(e)<0},SmallInteger.prototype.lt=SmallInteger.prototype.lesser=BigInteger.prototype.lt=BigInteger.prototype.lesser,BigInteger.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},SmallInteger.prototype.geq=SmallInteger.prototype.greaterOrEquals=BigInteger.prototype.geq=BigInteger.prototype.greaterOrEquals,BigInteger.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},SmallInteger.prototype.leq=SmallInteger.prototype.lesserOrEquals=BigInteger.prototype.leq=BigInteger.prototype.lesserOrEquals,BigInteger.prototype.isEven=function(){return!(1&this.value[0])},SmallInteger.prototype.isEven=function(){return!(1&this.value)},BigInteger.prototype.isOdd=function(){return!(1&~this.value[0])},SmallInteger.prototype.isOdd=function(){return!(1&~this.value)},BigInteger.prototype.isPositive=function(){return!this.sign},SmallInteger.prototype.isPositive=function(){return this.value>0},BigInteger.prototype.isNegative=function(){return this.sign},SmallInteger.prototype.isNegative=function(){return this.value<0},BigInteger.prototype.isUnit=function(){return!1},SmallInteger.prototype.isUnit=function(){return 1===Math.abs(this.value)},BigInteger.prototype.isZero=function(){return!1},SmallInteger.prototype.isZero=function(){return 0===this.value},BigInteger.prototype.isDivisibleBy=function(e){var t=parseValue(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(Integer[0])))},SmallInteger.prototype.isDivisibleBy=BigInteger.prototype.isDivisibleBy,BigInteger.prototype.isPrime=function(t){var r=isBasicPrime(this);if(r!==e)return r;var n=this.abs(),a=n.bitLength();if(a<=64)return millerRabinTest(n,[2,325,9375,28178,450775,9780504,1795265022]);for(var o=Math.log(2)*a,s=Math.ceil(!0===t?2*Math.pow(o,2):o),u=[],c=0;c<s;c++)u.push(i(c+2));return millerRabinTest(n,u)},SmallInteger.prototype.isPrime=BigInteger.prototype.isPrime,BigInteger.prototype.isProbablePrime=function(t){var r=isBasicPrime(this);if(r!==e)return r;for(var n=this.abs(),a=t===e?5:t,o=[],s=0;s<a;s++)o.push(i.randBetween(2,n.minus(2)));return millerRabinTest(n,o)},SmallInteger.prototype.isProbablePrime=BigInteger.prototype.isProbablePrime,BigInteger.prototype.modInv=function(e){for(var t,r,n,a=i.zero,o=i.one,s=parseValue(e),u=this.abs();!u.equals(i.zero);)t=s.divide(u),r=a,n=s,a=o,s=u,o=r.subtract(t.multiply(o)),u=n.subtract(t.multiply(u));if(!s.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(e)),this.isNegative()?a.negate():a},SmallInteger.prototype.modInv=BigInteger.prototype.modInv,BigInteger.prototype.next=function(){var e=this.value;return this.sign?subtractSmall(e,1,this.sign):new BigInteger(addSmall(e,1),this.sign)},SmallInteger.prototype.next=function(){var e=this.value;return e+1<n?new SmallInteger(e+1):new BigInteger(a,!1)},BigInteger.prototype.prev=function(){var e=this.value;return this.sign?new BigInteger(addSmall(e,1),!0):subtractSmall(e,1,this.sign)},SmallInteger.prototype.prev=function(){var e=this.value;return e-1>-n?new SmallInteger(e-1):new BigInteger(a,!0)};for(var s=[1];2*s[s.length-1]<=t;)s.push(2*s[s.length-1]);var u=s.length,c=s[u-1];function shift_isSmall(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof BigInteger&&e.value.length<=1}function bitwise(e,t,r){t=parseValue(t);for(var n=e.isNegative(),a=t.isNegative(),o=n?e.not():e,s=a?t.not():t,u=0,l=0,d=null,p=null,f=[];!o.isZero()||!s.isZero();)u=(d=divModAny(o,c))[1].toJSNumber(),n&&(u=c-1-u),l=(p=divModAny(s,c))[1].toJSNumber(),a&&(l=c-1-l),o=d[0],s=p[0],f.push(r(u,l));for(var g=0!==r(n?1:0,a?1:0)?i(-1):i(0),h=f.length-1;h>=0;h-=1)g=g.multiply(c).add(i(f[h]));return g}BigInteger.prototype.shiftLeft=function(e){if(!shift_isSmall(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=u;)t=t.multiply(c),e-=u-1;return t.multiply(s[e])},SmallInteger.prototype.shiftLeft=BigInteger.prototype.shiftLeft,BigInteger.prototype.shiftRight=function(e){var t;if(!shift_isSmall(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;e>=u;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=divModAny(r,c))[1].isNegative()?t[0].prev():t[0],e-=u-1}return(t=divModAny(r,s[e]))[1].isNegative()?t[0].prev():t[0]},SmallInteger.prototype.shiftRight=BigInteger.prototype.shiftRight,BigInteger.prototype.not=function(){return this.negate().prev()},SmallInteger.prototype.not=BigInteger.prototype.not,BigInteger.prototype.and=function(e){return bitwise(this,e,(function(e,t){return e&t}))},SmallInteger.prototype.and=BigInteger.prototype.and,BigInteger.prototype.or=function(e){return bitwise(this,e,(function(e,t){return e|t}))},SmallInteger.prototype.or=BigInteger.prototype.or,BigInteger.prototype.xor=function(e){return bitwise(this,e,(function(e,t){return e^t}))},SmallInteger.prototype.xor=BigInteger.prototype.xor;var l=1<<30,d=(t&-t)*(t&-t)|l;function roughLOB(e){var r=e.value,n="number"==typeof r?r|l:r[0]+r[1]*t|d;return n&-n}function integerLogarithm(e,t){if(t.compareTo(e)<=0){var r=integerLogarithm(e,t.square(t)),n=r.p,a=r.e,o=n.multiply(t);return o.compareTo(e)<=0?{p:o,e:2*a+1}:{p:n,e:2*a}}return{p:i(1),e:0}}function max(e,t){return e=parseValue(e),t=parseValue(t),e.greater(t)?e:t}function min(e,t){return e=parseValue(e),t=parseValue(t),e.lesser(t)?e:t}function gcd(e,t){if(e=parseValue(e).abs(),t=parseValue(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=Integer[1];e.isEven()&&t.isEven();)r=Math.min(roughLOB(e),roughLOB(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(roughLOB(e));do{for(;t.isEven();)t=t.divide(roughLOB(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}BigInteger.prototype.bitLength=function(){var e=this;return e.compareTo(i(0))<0&&(e=e.negate().subtract(i(1))),0===e.compareTo(i(0))?i(0):i(integerLogarithm(e,i(2)).e).add(i(1))},SmallInteger.prototype.bitLength=BigInteger.prototype.bitLength;var parseBase=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++){if("-"!==(c=e[i].toLowerCase())&&/[a-z0-9]/.test(c)){if(/[0-9]/.test(c)&&+c>=n){if("1"===c&&1===n)continue;throw new Error(c+" is not a valid digit in base "+t+".")}if(c.charCodeAt(0)-87>=n)throw new Error(c+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=o/Math.log(t)){var a=parseInt(e,t);if(isNaN(a))throw new Error(c+" is not a valid digit in base "+t+".");return new SmallInteger(parseInt(e,t))}t=parseValue(t);var s=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var c,l=(c=e[i].toLowerCase()).charCodeAt(0);if(48<=l&&l<=57)s.push(parseValue(c));else if(97<=l&&l<=122)s.push(parseValue(c.charCodeAt(0)-87));else{if("<"!==c)throw new Error(c+" is not a valid character");var d=i;do{i++}while(">"!==e[i]);s.push(parseValue(e.slice(d+1,i)))}}return parseBaseFromArray(s,t,u)};function parseBaseFromArray(e,t,r){var n,i=Integer[0],a=Integer[1];for(n=e.length-1;n>=0;n--)i=i.add(e[n].times(a)),a=a.times(t);return r?i.negate():i}function stringify(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function toBase(e,t){if((t=i(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var a,o=[],s=e;s.isNegative()||s.compareAbs(t)>=0;){a=s.divmod(t),s=a.quotient;var u=a.remainder;u.isNegative()&&(u=t.minus(u).abs(),s=s.next()),o.push(u.toJSNumber())}return o.push(s.toJSNumber()),{value:o.reverse(),isNegative:n}}function toBaseString(e,t){var r=toBase(e,t);return(r.isNegative?"-":"")+r.value.map(stringify).join("")}function parseStringValue(e){if(isPrecise(+e)){var t=+e;if(t===truncate(t))return new SmallInteger(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var i=e.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(2===i.length){var a=i[1];if("+"===a[0]&&(a=a.slice(1)),(a=+a)!==truncate(a)||!isPrecise(a))throw new Error("Invalid integer: "+a+" is not a valid exponent.");var o=i[0],s=o.indexOf(".");if(s>=0&&(a-=o.length-s-1,o=o.slice(0,s)+o.slice(s+1)),a<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(a+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var u=[],c=e.length,l=r,d=c-l;c>0;)u.push(+e.slice(d,c)),(d-=l)<0&&(d=0),c-=l;return trim(u),new BigInteger(u,n)}function parseValue(e){return"number"==typeof e?function parseNumberValue(e){if(isPrecise(e)){if(e!==truncate(e))throw new Error(e+" is not an integer.");return new SmallInteger(e)}return parseStringValue(e.toString())}(e):"string"==typeof e?parseStringValue(e):e}BigInteger.prototype.toArray=function(e){return toBase(this,e)},SmallInteger.prototype.toArray=function(e){return toBase(this,e)},BigInteger.prototype.toString=function(t){if(t===e&&(t=10),10!==t)return toBaseString(this,t);for(var r,n=this.value,i=n.length,a=String(n[--i]);--i>=0;)r=String(n[i]),a+="0000000".slice(r.length)+r;return(this.sign?"-":"")+a},SmallInteger.prototype.toString=function(t){return t===e&&(t=10),10!=t?toBaseString(this,t):String(this.value)},BigInteger.prototype.toJSON=SmallInteger.prototype.toJSON=function(){return this.toString()},BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},BigInteger.prototype.toJSNumber=BigInteger.prototype.valueOf,SmallInteger.prototype.valueOf=function(){return this.value},SmallInteger.prototype.toJSNumber=SmallInteger.prototype.valueOf;for(var p=0;p<1e3;p++)Integer[p]=new SmallInteger(p),p>0&&(Integer[-p]=new SmallInteger(-p));return Integer.one=Integer[1],Integer.zero=Integer[0],Integer.minusOne=Integer[-1],Integer.max=max,Integer.min=min,Integer.gcd=gcd,Integer.lcm=function lcm(e,t){return e=parseValue(e).abs(),t=parseValue(t).abs(),e.divide(gcd(e,t)).multiply(t)},Integer.isInstance=function(e){return e instanceof BigInteger||e instanceof SmallInteger},Integer.randBetween=function randBetween(e,r){var n=min(e=parseValue(e),r=parseValue(r)),i=max(e,r).subtract(n).add(1);if(i.isSmall)return n.add(Math.floor(Math.random()*i));for(var a=[],o=!0,s=i.value.length-1;s>=0;s--){var u=o?i.value[s]:t,c=truncate(Math.random()*u);a.unshift(c),c<u&&(o=!1)}return a=arrayToSmall(a),n.add("number"==typeof a?new SmallInteger(a):new BigInteger(a,!1))},Integer.fromArray=function(e,t,r){return parseBaseFromArray(e.map(parseValue),parseValue(t||10),r)},Integer}();e.hasOwnProperty("exports")&&(e.exports=i),void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)},296734:(e,t,r)=>{"use strict";var n=r(282825).validate,i={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};e.exports={encode:function encode(e){n(e instanceof Uint8Array,"Invalid data: "+e+".");for(var t="",r=0;r<e.length;++r){var i=e[r];n(0<=i&&i<32,"Invalid value: "+i+"."),t+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[i]}return t},decode:function decode(e){n("string"==typeof e,"Invalid base32-encoded string: "+e+".");for(var t=new Uint8Array(e.length),r=0;r<e.length;++r){var a=e[r];n(a in i,"Invalid value: "+a+"."),t[r]=i[a]}return t}}},850630:(e,t,r)=>{"use strict";var n=r(296734),i=r(664864),a=r(695179),o=r(282825),s=o.validate;var u=o.ValidationError,c=["bitcoincash","bchtest","bchreg"];function prefixToUint5Array(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=31&e[r].charCodeAt(0);return t}function concat(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function polymod(e){for(var t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=i(1),n=0;n<e.length;++n){var a=e[n],o=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(a);for(var s=0;s<t.length;++s)o.shiftRight(s).and(1).equals(1)&&(r=r.xor(t[s]))}return r.xor(1)}function hasSingleCase(e){return e===e.toLowerCase()||e===e.toUpperCase()}e.exports={encode:function encode(e,t,r){s("string"==typeof e&&function isValidPrefix(e){return hasSingleCase(e)&&-1!==c.indexOf(e.toLowerCase())}(e),"Invalid prefix: "+e+"."),s("string"==typeof t,"Invalid type: "+t+"."),s(r instanceof Uint8Array,"Invalid hash: "+r+".");var i=concat(prefixToUint5Array(e),new Uint8Array(1)),o=function getTypeBits(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new u("Invalid type: "+e+".")}}(t)+function getHashSizeBits(e){switch(8*e.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new u("Invalid hash size: "+e.length+".")}}(r),l=function toUint5Array(e){return a(e,8,5)}(concat(new Uint8Array([o]),r)),d=concat(concat(i,l),new Uint8Array(8)),p=concat(l,function checksumToUint5Array(e){for(var t=new Uint8Array(8),r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}(polymod(d)));return e+":"+n.encode(p)},decode:function decode(e){s("string"==typeof e&&hasSingleCase(e),"Invalid address: "+e+".");var t=e.toLowerCase().split(":");s(2===t.length,"Missing prefix: "+e+".");var r=t[0],i=n.decode(t[1]);s(function validChecksum(e,t){var r=concat(prefixToUint5Array(e),new Uint8Array(1)),n=concat(r,t);return polymod(n).equals(0)}(r,i),"Invalid checksum: "+e+".");var o=function fromUint5Array(e){return a(e,5,8,!0)}(i.subarray(0,-8)),c=o[0],l=o.subarray(1);s(function getHashSize(e){switch(7&e){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(c)===8*l.length,"Invalid hash size: "+e+".");var d=function getType(e){switch(120&e){case 0:return"P2PKH";case 8:return"P2SH";default:throw new u("Invalid address type in version byte: "+e+".")}}(c);return{prefix:r,type:d,hash:l}},ValidationError:u}},695179:(e,t,r)=>{"use strict";var n=r(282825).validate;e.exports=function(e,t,r,i){for(var a=i?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),o=(1<<r)-1,s=new Uint8Array(a),u=0,c=0,l=0,d=0;d<e.length;++d){var p=e[d];for(n(0<=p&&!(p>>t),"Invalid value: "+p+"."),c=c<<t|p,l+=t;l>=r;)l-=r,s[u]=c>>l&o,++u}return i?n(l<t&&!(c<<r-l&o),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):l>0&&(s[u]=c<<r-l&o,++u),s}},282825:e=>{"use strict";function ValidationError(e){var t=new Error;this.name=t.name="ValidationError",this.message=t.message=e,this.stack=t.stack}ValidationError.prototype=Object.create(Error.prototype),e.exports={ValidationError,validate:function validate(e,t){if(!e)throw new ValidationError(t)}}}}]);