"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[78951],{793437:(e,n,t)=>{t.d(n,{X:()=>OpenInAppButton});var r=t(586330),o=t(514041),i=t(17617),a=t(490343),s=t(726130),c=t(663522),l=t(117746),u=t(911998),d=t(831085);function OpenInAppButton({buildDeepLinkUrl:e,buildFullUrl:n}){var{result:t}=(0,u.yk)((0,r.A)((function*(){var n=e();return(yield l.Ay.linkingCanOpenURL(n))?n:""})),[e]),f=(0,o.useMemo)((function(){return c.Ay.isWebMobile?c.Ay.isWebMobileAndroid?"Open by OneKey Android":c.Ay.isWebMobileIOS?"Open by OneKey iOS":void 0:"Open by OneKey Desktop"}),[]),p=(0,o.useCallback)((function(){var e=n();a.Dialog.show({title:"Scan to open in OneKey",floatingPanelProps:{overflow:"hidden"},renderContent:(0,d.jsxs)(a.Stack,{children:[(0,d.jsxs)(a.Stack,{alignItems:"center",justifyContent:"center",overflow:"hidden",children:[t&&f?(0,d.jsx)(a.Button,{mb:"$4",onPress:function(){console.log("URL Account openByApp deepLinkUrl",t),l.Ay.linkingOpenURL(t)},children:f}):null,(0,d.jsx)(a.Stack,{p:"$4",borderRadius:"$6",borderCurve:"continuous",borderWidth:i.A.hairlineWidth,borderColor:"$borderSubdued",children:(0,d.jsx)(a.QRCode,{value:e,logoSvg:"OnekeyBrand",size:224})})]}),(0,d.jsxs)(a.XStack,{m:"$-5",mt:"$5",py:"$4",px:"$5",backgroundColor:"$bgSubdued",alignItems:"center",children:[(0,d.jsx)(a.SizableText,{size:"$bodyMd",color:"$textSubdued",flex:1,children:"Don’t have the app yet?"}),(0,d.jsx)(a.Button,{size:"small",onPress:function(){(0,l.Dr)(s.A8)},children:"Download"})]})]}),showFooter:!1})}),[n,t,f]);return(0,d.jsx)(a.Button,{size:"small",onPress:p,children:"Open in the app"})}},660823:(e,n,t)=>{t.d(n,{i:()=>TabPageHeader});var r=t(514041),o=t(490343),i=t(901976),a=t(162616),s=t(325809),c=t(663522),l=t(714191),u=t(831085);function HeaderLeft({sceneName:e}){var n=(0,r.useMemo)((function(){return e===l.Zs.homeUrlAccount?null:(0,u.jsx)(s.Qt,{num:0},"accountSelectorTrigger")}),[e]);return(0,u.jsx)(s.b8,{enabledNum:[0],config:{sceneName:e,sceneUrl:""},children:n})}var d=t(586330),f=t(972800),p=t(730223),h=t(310955),y=t(498356),A=t(259641),m=t(793437),v=t(211129),b=t(491180),k=t(796151),g=t(826339);function OpenInAppButtonContainer(){var{activeAccount:{account:e,network:n}}=(0,a.LH)({num:0}),t=(0,r.useCallback)((function(){return e&&n?k.Ay.buildDeepLinkUrl({path:v.oO.url_account,query:{networkCode:n.code,address:e.address}}):""}),[e,n]),o=(0,r.useCallback)((function(){return e&&n?(0,g.Hw)({account:e,network:n}):"n"}),[e,n]);return e?.address&&n?.id?(0,u.jsx)(m.X,{buildDeepLinkUrl:t,buildFullUrl:o}):null}function ShareButton(){var{activeAccount:{account:e,network:n}}=(0,a.LH)({num:0}),{copyText:t}=(0,o.useClipboard)();return e?.address&&n?.id?(0,u.jsx)(o.HeaderIconButton,{onPress:(0,d.A)((function*(){var r=(0,g.Hw)({account:e,network:n});(yield A.G())?yield A.w(r):t(r)})),icon:"ShareOutline"}):null}var w={Address:function Address(){var{activeAccount:{account:e}}=(0,a.LH)({num:0});return(0,u.jsx)(o.XStack,{alignItems:"center",children:(0,u.jsx)(o.SizableText,{size:"$headingLg",children:b.A.shortenAddress({address:e?.address})})})},OpenInApp:function OpenInApp(){return(0,u.jsx)(s.b8,{config:{sceneName:l.Zs.homeUrlAccount,sceneUrl:""},enabledNum:[0],children:(0,u.jsx)(OpenInAppButtonContainer,{})})},Share:function Share(){return(0,u.jsx)(s.b8,{config:{sceneName:l.Zs.homeUrlAccount,sceneUrl:""},enabledNum:[0],children:(0,u.jsx)(ShareButton,{})})}},j=t(147882),x=t(390574),I=t(506851);function UniversalSearchInput(){var e=(0,y.A)(),n=(0,r.useCallback)((function(){e.pushModal(p.ry.UniversalSearchModal,{screen:x.j.UniversalSearch,params:{filterType:I.j.Address}})}),[e]);return(0,u.jsxs)(o.XStack,{w:280,children:[(0,u.jsx)(o.Input,{containerProps:{w:"100%"},size:"small",placeholder:"Search address"},"searchInput"),(0,u.jsx)(o.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:n})]})}function HeaderRight({sceneName:e}){var n=(0,y.A)(),t=(0,j.A)(),{activeAccount:{account:i}}=(0,a.LH)({num:0}),s=(0,r.useCallback)((function(){n.pushModal(p.ry.SettingModal,{screen:p.Pj.SettingListModal})}),[n]),A=(0,r.useCallback)((function(){return t.start({handlers:t.PARSE_HANDLER_NAMES.all,autoHandleResult:!0,accountId:i?.id})}),[t,i?.id]),m=(0,r.useCallback)((0,d.A)((function*(){yield h.A.serviceApp.openExtensionExpandTab({routes:""})})),[]),v=(0,o.useMedia)(),b=(0,r.useMemo)((function(){var n=(0,u.jsx)(f.v$,{title:"Settings",icon:"SettingsOutline",testID:"setting",onPress:s},"setting"),t=(0,u.jsx)(f.v$,{title:"Expand View",icon:"CameraExposureSquareOutline",onPress:m},"expandExtView"),r=(0,u.jsx)(f.v$,{title:"Scan",icon:"ScanOutline",onPress:A},"scan"),o=v.gtMd?(0,u.jsx)(UniversalSearchInput,{},"searchInput"):null;return e===l.Zs.homeUrlAccount?[(0,u.jsx)(w.OpenInApp,{},"urlAccountOpenInApp"),(0,u.jsx)(w.Share,{},"urlAccountShare")].filter(Boolean):c.Ay.isExtensionUiPopup?[t,n]:[r,n,o]}),[v.gtMd,A,m,s,e]);return(0,u.jsx)(f.bE,{testID:"Wallet-Page-Header-Right",children:b})}function HeaderTitle({sceneName:e}){var n=(0,r.useMemo)((function(){if(e===l.Zs.homeUrlAccount)return(0,u.jsx)(w.Address,{},"urlAccountNavHeaderAddress")}),[e]);return(0,u.jsx)(s.b8,{enabledNum:[0],config:{sceneName:e,sceneUrl:""},children:n})}function TabPageHeader({sceneName:e,showHeaderRight:n}){(0,i.e)({name:`web TabPageHeader:${e}:${String(n)}`});var t=(0,r.useCallback)((function(){return(0,u.jsx)(HeaderLeft,{sceneName:e})}),[e]),{config:c}=(0,a.H9)(),l=(0,r.useCallback)((function(){return n&&c?(0,u.jsx)(s.b8,{enabledNum:[0],config:c,children:(0,u.jsx)(HeaderRight,{sceneName:e})}):null}),[c,e,n]),d=(0,r.useCallback)((function(){return(0,u.jsx)(HeaderTitle,{sceneName:e})}),[e]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.Page.Header,{headerTitle:d,headerLeft:t,headerRight:l})})}},536612:(e,n,t)=>{t.d(n,{S:()=>useAppUpdateInfo,x:()=>useAppChangeLog});var r=t(324586),o=t(514041),i=t(734809),a=t(713132),s=t(639451),c=t(730223),l=t(310955),u=t(498356),d=t(911998);function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var useAppChangeLog=function(e){var n=(0,d.yk)((function(){return e?l.A.serviceAppUpdate.fetchChangeLog():Promise.resolve(null)}),[e]);return(0,o.useMemo)((function(){return n.result}),[n.result])},useAppUpdateInfo=function(e=!1){var[n]=(0,i.useAppUpdatePersistAtom)(),t=(0,u.A)(),r=(0,o.useCallback)((function(){setTimeout((function(){(e?t.pushFullModal:t.pushModal)(c.ry.AppUpdateModal,{screen:c.mk.WhatsNew})}))}),[e,t.pushFullModal,t.pushModal]),d=(0,o.useCallback)((function(e=!1,r){(e?t.pushFullModal:t.pushModal)(c.ry.AppUpdateModal,{screen:c.mk.UpdatePreview,params:_objectSpread({latestVersion:n.latestVersion,isForceUpdate:n.isForceUpdate,autoClose:e},r)})}),[n.isForceUpdate,n.latestVersion,t.pushFullModal,t.pushModal]);(0,o.useEffect)((function(){(0,a.fK)(n)&&r(),n.status===a.ue.downloading&&(0,s.Xo)(n).then((function(){l.A.serviceAppUpdate.readyToInstall()})).catch((function(e){l.A.serviceAppUpdate.notifyFailed(e)})),l.A.serviceAppUpdate.fetchAppUpdateInfo().then((function(e){e?.isForceUpdate&&(0,a._q)(e.latestVersion,e.status)&&d(!0,e)}))}),[]);var f=(0,o.useCallback)((function(){switch(n.status){case a.ue.notify:case a.ue.downloading:d(e);break;case a.ue.ready:(0,s.Ed)(n).catch((function(e){return l.A.serviceAppUpdate.notifyFailed(e)}));break;case a.ue.failed:l.A.serviceAppUpdate.startDownloading(),(0,s.Xo)(n).then((function(){l.A.serviceAppUpdate.readyToInstall()})).catch((function(e){l.A.serviceAppUpdate.notifyFailed(e)}))}}),[n,e,d]);return(0,o.useMemo)((function(){return{isNeedUpdate:(0,a._q)(n.latestVersion,n.status),data:n,onUpdateAction:f,toUpdatePreviewPage:d,onViewReleaseInfo:r}}),[n,f,r,d])}},326745:(e,n,t)=>{t.d(n,{u:()=>useAppRoute});var r=t(728234);function useAppRoute(){return(0,r.lq)()}},394764:(e,n,t)=>{t.d(n,{Z:()=>usePrevious});var r=t(514041);function usePrevious(e){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=e}),[e]),n.current}},349521:(e,n,t)=>{t.d(n,{F:()=>FirmwareUpdateReminderAlert,a:()=>HomeFirmwareUpdateReminder});var r=t(586330),o=t(514041),i=t(490343),a=t(734809),s=t(714191),c=t(310955),l=t(325809),u=t(498356),d=t(911998),f=t(162616),p=t(613838),h=t(318822);function BootloaderModeUpdateReminder(){var e=(0,u.A)(),n=(0,p.B)();return(0,o.useEffect)((function(){var fn=function(e){n.showBootloaderMode({connectId:e.connectId})};return h.iL.on(h.Tu.ShowFirmwareUpdateFromBootloaderMode,fn),function(){h.iL.off(h.Tu.ShowFirmwareUpdateFromBootloaderMode,fn)}}),[n,e]),null}var y=t(728234),A=t(491180),m=t(831085);function HomeFirmwareUpdateDetectCmp(){var{activeAccount:e}=(0,f.LH)({num:0}),n=e.device?.connectId,t=(0,y.jH)(),r=(0,o.useMemo)((function(){return A.A.isHwWallet({walletId:e.wallet?.id})}),[e.wallet?.id]);return(0,o.useEffect)((function(){r&&n&&t&&c.A.serviceFirmwareUpdate.detectActiveAccountFirmwareUpdates({connectId:n})}),[r,n,t]),null}var v=(0,o.memo)((function HomeFirmwareUpdateDetectWithProvider(){return(0,m.jsx)(l.b8,{config:{sceneName:s.Zs.home},enabledNum:[0],children:(0,m.jsx)(HomeFirmwareUpdateDetectCmp,{})})}));function FirmwareUpdateReminderAlert({message:e,onPress:n}){return(0,m.jsxs)(i.XStack,{px:"$5",py:"$2",borderTopWidth:"$px",borderBottomWidth:"$px",bg:"$bgInfoSubdued",borderColor:"$borderInfoSubdued",alignItems:"center",space:"$2",flex:1,children:[(0,m.jsx)(i.Icon,{size:"$4",name:"DownloadOutline",color:"$iconInfo"}),(0,m.jsx)(i.SizableText,{flex:1,size:"$bodyMdMedium",color:"$text",numberOfLines:1,children:e}),(0,m.jsx)(i.Button,{size:"small",onPress:n,children:"View"})]})}function HomeFirmwareUpdateReminderCmp(){var{activeAccount:e}=(0,f.LH)({num:0}),n=e.device?.connectId,t=(0,p.B)(),[s]=(0,a.useFirmwareUpdatesDetectStatusAtom)(),{result:l}=((0,u.A)(),(0,d.yk)((0,r.A)((function*(){if(n){var e=s?.[n],t=e?.connectId===n&&e?.hasUpgrade;yield c.A.serviceFirmwareUpdate.getFirmwareUpdateDetectInfo({connectId:n});return{shouldUpdate:t,detectResult:e}}})),[n,s])),h=(0,o.useMemo)((function(){if(l?.shouldUpdate){var e="New firmware is available";return l?.detectResult?.toVersion?e=`Firmware ${l?.detectResult?.toVersion} is available`:l?.detectResult?.toVersionBle&&(e=`BLE Firmware ${l?.detectResult?.toVersionBle} is available`),(0,m.jsx)(FirmwareUpdateReminderAlert,{message:e,onPress:(0,r.A)((function*(){t.openChangeLogModal({connectId:n})}))})}return null}),[t,n,l]);return(0,m.jsxs)(i.XStack,{children:[(0,m.jsx)(v,{}),(0,m.jsx)(BootloaderModeUpdateReminder,{}),h]})}function HomeFirmwareUpdateReminder(){return(0,m.jsx)(l.b8,{config:{sceneName:s.Zs.home},enabledNum:[0],children:(0,m.jsx)(HomeFirmwareUpdateReminderCmp,{})})}},262424:(e,n,t)=>{t.d(n,{U:()=>HomePageView});var r=t(586330),o=t(514041),i=t(908867),a=t(546591),s=t(462723),c=t(490343),l=t(928557),u=t(310955),d=t(357829),f=t(660823),p=t(713132),h=t(663522),y=t(117746);t(536612);var A=t(831085);p.ue.notify,p.ue.downloading,p.ue.ready,p.ue.failed,p.ue.done;p.ue.notify,p.ue.downloading,p.ue.ready,h.Ay.isNativeAndroid,p.ue.failed,(0,A.jsx)((function OpenOnGithub(){var e=(0,o.useCallback)((function(){(0,y.Dr)("https://github.com/OneKeyHQ/app-monorepo/releases")}),[]);return(0,A.jsxs)(c.XStack,{space:"$2",justifyContent:"space-between",alignItems:"center",cursor:"pointer",onPress:e,children:[(0,A.jsx)(c.SizableText,{size:"$bodyMdMedium",color:"$textSubdued",children:"Download on Github"}),(0,A.jsx)(c.Icon,{name:"ArrowTopRightOutline",size:"$4.5"})]})}),{}),p.ue.done;p.ue.notify,p.ue.downloading,p.ue.ready,p.ue.failed,p.ue.done;var UpdateReminder=function(){return null},m=t(911998),v=t(162616),b=t(349521),k=t(324586),g=t(839850),w=t(325809),j=t(575995),x=t(84269),I=["createAddressDisabled"];function HomeSelector_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function HomeSelector_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?HomeSelector_ownKeys(Object(t),!0).forEach((function(n){(0,k.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HomeSelector_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const S=(0,o.memo)((function HomeSelector(e){var{createAddressDisabled:n}=e,t=(0,g.A)(e,I);return(0,A.jsx)(c.XStack,HomeSelector_objectSpread(HomeSelector_objectSpread({testID:"Wallet-Address-Generator",alignItems:"center",space:"$3"},t),{},{children:n?(0,A.jsx)(x.vO,{num:0}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(x.vO,{num:0}),(0,A.jsx)(w.Ln,{num:0}),(0,A.jsx)(j.X,{miniMode:!0,num:0})]})}))}));var O=t(812715),T=t(40651),C=t(795871);var P=t(208257),L=t(734809),M=t(227428);function HomeOverviewContainer(){var e,{activeAccount:{account:n,network:t,wallet:i}}=(0,v.LH)({num:0}),[a,s]=(0,o.useState)({initialized:!1,isRefreshing:!1}),[l]=(0,L.useSettingsPersistAtom)(),{result:d}=(0,m.yk)((0,r.A)((function*(){if(n&&t){var e=yield u.A.serviceAccount.getAccountAddressForApi({accountId:n.id,networkId:t.id}),r=yield u.A.serviceAccountProfile.fetchAccountDetails({networkId:t.id,accountAddress:e,xpub:yield u.A.serviceAccount.getAccountXpub({accountId:n.id,networkId:t.id}),withNetWorth:!0,withNonce:!1});return s({initialized:!0,isRefreshing:!1}),r}})),[n,t],{debounced:M.EI,pollingInterval:M.HU});return(0,o.useEffect)((function(){n?.id&&t?.id&&i?.id&&s({initialized:!1,isRefreshing:!0})}),[n?.id,t?.id,i?.id]),a.isRefreshing&&!a.initialized?(0,A.jsx)(c.Stack,{py:"$2.5",children:(0,A.jsx)(c.Skeleton,{w:"$40",h:"$7",my:"$2.5"})}):(0,A.jsx)(c.NumberSizeableText,{formatter:"value",formatterOptions:{currency:l.currencyInfo.symbol},size:"$heading5xl",children:null!=(e=d?.netWorth)?e:0})}function HomeHeaderContainer(){return(0,A.jsx)(P.p,{children:(0,A.jsxs)(c.Stack,{testID:"Wallet-Tab-Header",p:"$5",children:[(0,A.jsx)(S,{mb:"$2.5"}),(0,A.jsxs)(c.Stack,{$gtLg:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsx)(HomeOverviewContainer,{}),(0,A.jsx)(c.Portal.Container,{name:c.Portal.Constant.WALLET_ACTIONS})]})]})})}var H=t(230414),U=t(929296),N=t(195309),R=t(972715),F=t(657355),$=t(714178),_=t(809690),{Provider:D,withProvider:B,contextAtom:z,contextAtomMethod:E}=(0,_.f)(),{atom:W,use:K}=z("");function _createSuper(e){var n=_isNativeReflectConstruct();return function _createSuperInternal(){var t,r=(0,R.A)(e);if(n){var o=(0,R.A)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,N.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var V=function(e){(0,U.A)(ContextJotaiActionsNFTList,e);var n=_createSuper(ContextJotaiActionsNFTList);function ContextJotaiActionsNFTList(...e){var t;return(t=n.call(this,...e)).updateSearchKey=E((function(e,n,t){n(W(),t)})),t}return(0,H.A)(ContextJotaiActionsNFTList)}($.x),X=(0,F.j)((function(){return console.log("new ContextJotaiActionsNFTList()",Date.now()),new V}));function useNFTListActions(){var e=X().updateSearchKey.use();return(0,o.useRef)({updateSearchKey:e})}var Z=t(535864),q=t(498356),J=t(730223);var G=t(712784),Q=t.n(G),Y=t(327550);function NFTListHeader(e){var{nfts:n,filteredNfts:t}=e,[r]=K(),{updateSearchKey:o}=useNFTListActions().current;return(0,A.jsx)(Y.W,{searchProps:n.length>=M.hP?{onChangeText:Q()((function(e){return o(e)}),M.FV),searchResultCount:r&&r.length>=M.NZ?t.length:0}:void 0})}var ee=t(241440),ne=t(982447);function NFTListItem(e){var n,t,{nft:r,onPress:o}=e;return(0,A.jsxs)(c.Stack,{group:"nftItem",flexBasis:"50%",$gtSm:{flexBasis:"33.333333%"},$gtLg:{flexBasis:"25%"},$gtXl:{flexBasis:"16.666666%"},$gt2xl:{flexBasis:"14.2857142857%"},focusable:!0,focusStyle:{outlineColor:"$focusRing",outlineWidth:2,outlineStyle:"solid",outlineOffset:-2},p:"$2.5",borderRadius:"$4",onPress:function(){o?.(r)},userSelect:"none",children:[(0,A.jsx)(c.Stack,{pb:"100%","$group-nftItem-hover":{opacity:.8},children:(0,A.jsxs)(c.Stack,{position:"absolute",left:0,top:0,right:0,bottom:0,children:[(0,A.jsxs)(c.Image,{w:"100%",h:"100%",borderRadius:"$2.5",children:[(0,A.jsx)(c.Image.Source,{src:r.metadata?.image}),(0,A.jsx)(c.Image.Fallback,{bg:"$bgStrong",justifyContent:"center",alignItems:"center",children:(0,A.jsx)(c.Icon,{name:"ImageSquareWavesOutline",color:"$iconDisabled"})})]}),r.collectionType===ne.m.ERC1155&&new ee.A(null!=(n=r.amount)?n:1).gt(1)?(0,A.jsxs)(c.SizableText,{position:"absolute",right:"$0",bottom:"$0",size:"$bodyMdMedium",px:"$2",bg:"$bgInverse",color:"$textInverse",borderRadius:"$2.5",borderWidth:2,borderColor:"$bgApp",children:["x",r.amount]}):null]})}),(0,A.jsxs)(c.Stack,{mt:"$2",children:[(0,A.jsx)(c.SizableText,{size:"$bodyLgMedium",numberOfLines:1,children:null!=(t=r.metadata?.name)?t:"-"}),(0,A.jsx)(c.SizableText,{size:"$bodySm",color:"$textSubdued",numberOfLines:1,children:r.collectionName})]})]},r.itemId)}function NFTListView(e){var{data:n,isLoading:t,initialized:r,onContentSizeChange:i}=e,[a]=K(),s=function getFilteredNftsBySearchKey({nfts:e,searchKey:n}){return!n||n.length<M.NZ?e:(n=n.trim().toLowerCase(),e.filter((function(e){return e.collectionAddress?.toLowerCase()===n||e.collectionName?.toLowerCase().includes(n)||e.metadata?.name?.toLowerCase().includes(n)})))}({nfts:n,searchKey:a}),l=(0,q.A)(),{activeAccount:{account:u,network:f,wallet:p}}=(0,v.LH)({num:0}),y=(0,o.useCallback)((function(e){u&&f&&p&&l.pushModal(J.ry.MainModal,{screen:J.kZ.NFTDetails,params:{networkId:f.id,accountId:u.id,walletId:p.id,accountAddress:u.address,collectionAddress:e.collectionAddress,itemId:e.itemId}})}),[u,l,f,p]),m=(0,o.useCallback)((function(){return s&&0!==s.length?(0,A.jsx)(c.XStack,{flexWrap:"wrap",px:"$2.5",pb:"$6",pt:"$0.5",children:s.map((function(e){return(0,A.jsx)(NFTListItem,{nft:e,onPress:y},`${e.collectionAddress}-${e.itemId}`)}))}):a?(0,A.jsx)(d.wE,{}):(0,A.jsx)(d.eZ,{})}),[s,y,a]);return!r&&t?(0,A.jsx)(Z.yu,{onContentSizeChange:i}):(0,A.jsxs)(c.ScrollView,{h:"100%",py:"$3",scrollEnabled:h.Ay.isWebTouchable,disableScrollViewPanResponder:!0,onContentSizeChange:i,children:[(0,A.jsx)(NFTListHeader,{nfts:n,filteredNfts:s}),m()]})}var te=(0,o.memo)(B((function NFTListContainer(e){var n,{onContentSizeChange:t}=e,{isFocused:i}=(0,c.useTabIsRefreshingFocused)(),{updateSearchKey:a}=useNFTListActions().current,[s,l]=(0,o.useState)({initialized:!1,isRefreshing:!1}),{activeAccount:{account:d,network:f,wallet:p}}=(0,v.LH)({num:0}),h=(0,m.yk)((0,r.A)((function*(){if(d&&f){var e=yield u.A.serviceNFT.fetchAccountNFTs({networkId:f.id,accountAddress:d.address,xpub:yield u.A.serviceAccount.getAccountXpub({accountId:d.id,networkId:f.id})});return l({initialized:!0,isRefreshing:!1}),e.data}})),[d,f],{overrideIsFocused:function(e){return e&&i},debounced:M.EI,pollingInterval:M.Pi});return(0,o.useEffect)((function(){d?.id&&f?.id&&p?.id&&(l({initialized:!1,isRefreshing:!0}),a(""))}),[d?.id,f?.id,a,p?.id]),(0,A.jsx)(NFTListView,{data:null!=(n=h.result)?n:[],isLoading:s.isRefreshing,onContentSizeChange:t,initialized:s.initialized})}))),re=t(875669);const{Axios:oe,AxiosError:ie,CanceledError:ae,isCancel:se,CancelToken:ce,VERSION:le,all:ue,Cancel:de,isAxiosError:fe,spread:pe,toFormData:he,AxiosHeaders:ye,HttpStatusCode:Ae,formToJSON:me,getAdapter:ve,mergeConfig:be}=re.A;var ke=t(491180),ge=t(291877),we=t(69531);function useBuyToken({accountId:e,networkId:n}){var{result:t}=(0,we.yt)({networkId:n,type:"buy"}),r=(0,q.A)();return{handleOnBuy:(0,o.useCallback)((function(){r.pushModal(J.ry.FiatCryptoModal,{screen:J.Mg.BuyModal,params:{networkId:n,accountId:e}})}),[e,r,n]),isSupported:t}}var je=t(184251);function useReceiveToken({accountId:e,networkId:n,walletId:t,deriveInfo:r,deriveType:i}){var a=(0,q.A)();return{handleOnReceive:(0,o.useCallback)((function(){je.A.isLightningNetworkByNetworkId(n)?a.pushModal(J.ry.ReceiveModal,{screen:J.MD.CreateInvoice,params:{networkId:n,accountId:e}}):r&&a.pushModal(J.ry.ReceiveModal,{screen:J.MD.ReceiveToken,params:{networkId:n,accountId:e,walletId:t,deriveInfo:r,deriveType:i}})}),[e,r,i,a,n,t])}}var xe=t(384013),Ie=t(641106),Se=t(727476);function UrlAccountHomeTokenListProviderMirror_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function UrlAccountHomeTokenListProviderMirror_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?UrlAccountHomeTokenListProviderMirror_ownKeys(Object(t),!0).forEach((function(n){(0,k.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UrlAccountHomeTokenListProviderMirror_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Oe=(0,o.memo)((function(e){var n=(0,Se.y)();return(0,A.jsx)(Ie.m,UrlAccountHomeTokenListProviderMirror_objectSpread(UrlAccountHomeTokenListProviderMirror_objectSpread({},e),{},{data:n}))}));Oe.displayName="UrlAccountHomeTokenListProviderMirror";var useReviewControl=function(){var[{reviewControl:e}]=(0,L.useSettingsPersistAtom)();return!h.Ay.isAppleStoreEnv&&!h.Ay.isMas||Boolean(e)},ReviewControl=function({children:e}){return useReviewControl()?e:null},Te=t(584186),Ce=t(398509);function WalletActionBuy(e){var{networkId:n,accountId:t}=e,{isSupported:r,handleOnBuy:o}=useBuyToken({networkId:null!=n?n:"",accountId:null!=t?t:""});return(0,A.jsx)(Ce.c.Buy,{onPress:o,disabled:!r})}var Pe=t(971670),Le=t(796151);function WalletActionMore(){var e,{activeAccount:{account:n,network:t}}=(0,v.LH)({num:0}),r=(0,i.A)(),{copyText:a}=(0,c.useClipboard)(),s=(0,q.A)(),{result:l}=(0,we.yt)({networkId:null!=(e=t?.id)?e:"",type:"sell"}),u=(0,o.useCallback)((function(){var e,r;s.pushModal(J.ry.FiatCryptoModal,{screen:J.Mg.SellModal,params:{networkId:null!=(e=t?.id)?e:"",accountId:null!=(r=n?.id)?r:""}})}),[s,t,n]),d=useReviewControl(),f=[{items:[{label:r.formatMessage({id:"action__view_in_explorer"}),icon:"GlobusOutline",onPress:function(){return(0,Pe.C)((0,Le.BA)({network:t,address:n?.address}))}},{label:r.formatMessage({id:"action__copy_address"}),icon:"Copy1Outline",onPress:function(){return a(n?.address||"")}}]}];return d&&f.unshift({items:[{label:r.formatMessage({id:"action__sell_crypto"}),icon:"MinusLargeOutline",disabled:!l,onPress:u}]}),(0,A.jsx)(Ce.c.More,{sections:f})}function WalletActionReceive(e){var{accountId:n,networkId:t,walletId:r,deriveInfo:o,deriveType:i}=e,{handleOnReceive:a}=useReceiveToken({accountId:null!=n?n:"",networkId:null!=t?t:"",walletId:null!=r?r:"",deriveInfo:o,deriveType:i});return(0,A.jsx)(Ce.c.Receive,{onPress:a})}function WalletActionSend(){var e=(0,q.A)(),{activeAccount:{account:n,network:t}}=(0,v.LH)({num:0}),[i]=(0,xe.RI)(),[a]=(0,xe.D4)(),[s]=(0,xe.V3)(),c=(0,m.yk)((0,r.A)((function*(){var e;return(yield u.A.serviceNetwork.getVaultSettings({networkId:null!=(e=t?.id)?e:""})).isSingleToken})),[t?.id]).result,l=(0,o.useCallback)((0,r.A)((function*(){if(n&&t)if(c){var o=yield u.A.serviceToken.getNativeToken({networkId:t.id,accountAddress:n.address});e.pushModal(J.ry.SendModal,{screen:J.j$.SendDataInput,params:{accountId:n.id,networkId:t.id,isNFT:!1,token:o}})}else{var s;e.pushModal(J.ry.AssetSelectorModal,{screen:J.jA.TokenSelector,params:{networkId:t.id,accountId:n.id,networkName:t.name,tokens:{data:i.tokens,keys:i.keys,map:a},onSelect:(s=(0,r.A)((function*(r){yield Te.A.wait(600),e.pushModal(J.ry.SendModal,{screen:J.j$.SendDataInput,params:{accountId:n.id,networkId:t.id,isNFT:!1,token:r}})})),function onSelect(e){return s.apply(this,arguments)})}})}})),[n,i.keys,i.tokens,c,a,e,t]);return(0,A.jsx)(Ce.c.Send,{onPress:l,disabled:!s.initialized})}function WalletActionSwap({networkId:e}){var n=(0,q.A)(),t=(0,o.useCallback)((function(){n.pushModal(J.ry.SwapModal,{screen:J.uw.SwapMainLand,params:{importNetworkId:e}})}),[n,e]);return(0,A.jsx)(Ce.c.Swap,{onPress:t})}function WalletActions(){var{activeAccount:{network:e,account:n,wallet:t,deriveInfo:r,deriveType:o}}=(0,v.LH)({num:0});return(0,A.jsxs)(Ce.c,{children:[(0,A.jsx)(ReviewControl,{children:(0,A.jsx)(WalletActionBuy,{networkId:e?.id,accountId:n?.id})}),(0,A.jsx)(WalletActionSwap,{networkId:e?.id}),(0,A.jsx)(WalletActionSend,{}),(0,A.jsx)(WalletActionReceive,{accountId:n?.id,networkId:e?.id,walletId:t?.id,deriveInfo:r,deriveType:o}),(0,A.jsx)(WalletActionMore,{})]})}var Me=["showWalletActions"];function TokenListContainer_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function TokenListContainer_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?TokenListContainer_ownKeys(Object(t),!0).forEach((function(n){(0,k.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TokenListContainer_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function TokenListContainer(e){var n,t,i,a,s,{showWalletActions:l=!1}=e,d=(0,g.A)(e,Me),{onContentSizeChange:f}=d,{isFocused:p}=(0,c.useTabIsRefreshingFocused)(),{activeAccount:{account:h,network:y,wallet:b,deriveInfo:k,deriveType:w}}=(0,v.LH)({num:0}),{handleOnBuy:j,isSupported:x}=useBuyToken({accountId:null!=(n=h?.id)?n:"",networkId:null!=(t=y?.id)?t:""}),{handleOnReceive:I}=useReceiveToken({accountId:null!=(i=h?.id)?i:"",networkId:null!=(a=y?.id)?a:"",walletId:null!=(s=b?.id)?s:"",deriveInfo:k,deriveType:w}),S=(0,c.useMedia)(),O=(0,q.A)(),{refreshAllTokenList:T,refreshAllTokenListMap:C,refreshTokenList:P,refreshTokenListMap:L,refreshRiskyTokenList:H,refreshRiskyTokenListMap:U,refreshSmallBalanceTokenList:N,refreshSmallBalanceTokenListMap:R,refreshSmallBalanceTokensFiatValue:F,updateTokenListState:$,updateSearchKey:_}=(0,xe.WE)().current;(0,m.yk)((0,r.A)((function*(){try{var e;if(!h||!y)return;yield u.A.serviceToken.abortFetchAccountTokens();var n=yield u.A.serviceAccount.getAccountAddressForApi({accountId:h.id,networkId:y.id}),t=yield u.A.serviceToken.getBlockedTokens({networkId:y.id}),r=yield u.A.serviceToken.fetchAccountTokens({mergeTokens:!0,networkId:y.id,accountAddress:n,flag:"home-token-list",xpub:yield u.A.serviceAccount.getAccountXpub({accountId:h.id,networkId:y.id}),blockedTokens:Object.keys(t)});if(P({keys:r.tokens.keys,tokens:r.tokens.data}),L(r.tokens.map),H({keys:r.riskTokens.keys,riskyTokens:r.riskTokens.data}),U(r.riskTokens.map),N({keys:r.smallBalanceTokens.keys,smallBalanceTokens:r.smallBalanceTokens.data}),R(r.smallBalanceTokens.map),F(null!=(e=r.smallBalanceTokens.fiatValue)?e:"0"),r.allTokens){T({keys:r.allTokens?.keys,tokens:r.allTokens?.data}),C(r.allTokens.map);var o=r.allTokens.data;o&&o.length&&u.A.serviceToken.updateLocalTokens({networkId:y.id,tokens:o}),$({initialized:!0,isRefreshing:!1})}}catch(e){if(!(e instanceof ae))throw e;console.log("fetchAccountTokens canceled")}})),[h,y,P,L,H,U,N,R,F,T,C,$],{overrideIsFocused:function(e){return e&&p},debounced:M.EI,pollingInterval:M.iD}),(0,o.useEffect)((function(){h?.id&&y?.id&&b?.id&&($({initialized:!1,isRefreshing:!0}),_(""))}),[h?.id,y?.id,_,$,b?.id]);var D=(0,o.useCallback)((function(e){h&&y&&b&&k&&O.pushModal(J.ry.MainModal,{screen:J.kZ.TokenDetails,params:{accountId:h.id,networkId:y.id,walletId:b.id,deriveInfo:k,deriveType:w,tokenInfo:e}})}),[h,k,w,O,y,b]);return(0,A.jsxs)(A.Fragment,{children:[l?(0,A.jsx)(c.Portal.Body,{container:c.Portal.Constant.WALLET_ACTIONS,children:(0,A.jsx)(WalletActions,{})}):null,(0,A.jsx)(ge.x,TokenListContainer_objectSpread({withHeader:!0,withFooter:!0,withPrice:!0,withBuyAndReceive:!0,isBuyTokenSupported:x,onBuyToken:j,onReceiveToken:I,onPressToken:D,onContentSizeChange:f},S.gtLg&&{tableLayout:!0}))]})}var He=(0,o.memo)((function(e){var n,{activeAccount:{account:t}}=(0,v.LH)({num:0});return ke.A.isUrlAccountFn({accountId:null!=(n=t?.id)?n:""})?(0,A.jsx)(Oe,{children:(0,A.jsx)(TokenListContainer,TokenListContainer_objectSpread({},e))}):(0,A.jsx)(P.p,{children:(0,A.jsx)(TokenListContainer,TokenListContainer_objectSpread({showWalletActions:!0},e))})}));He.displayName="TokenListContainerWithProvider";var Ue=t(644047),Ne=t(616552);function TxHistoryContainer_ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var Re=(0,o.memo)((0,Ne.UK)((function TxHistoryListContainer(e){var n,{onContentSizeChange:t}=e,{isFocused:i}=(0,c.useTabIsRefreshingFocused)(),{updateSearchKey:a}=(0,Ne.n8)().current,[s,l]=(0,o.useState)({initialized:!1,isRefreshing:!1}),d=(0,c.useMedia)(),f=(0,q.A)(),{activeAccount:{account:p,network:h,wallet:y}}=(0,v.LH)({num:0}),b=(0,o.useCallback)((function(e){p&&h&&f.pushModal(J.ry.MainModal,{screen:J.kZ.HistoryDetails,params:{networkId:h.id,accountAddress:p.address,historyTx:e}})}),[p,f,h]),g=(0,m.yk)((0,r.A)((function*(){if(p&&h){var[e,n]=yield Promise.all([u.A.serviceAccount.getAccountXpub({accountId:p.id,networkId:h.id}),u.A.serviceNetwork.getVaultSettings({networkId:h.id})]),t=yield u.A.serviceHistory.fetchAccountHistory({accountId:p.id,networkId:h.id,accountAddress:p.address,xpub:e,onChainHistoryDisabled:n.onChainHistoryDisabled});return l({initialized:!0,isRefreshing:!1}),t}})),[p,h],{overrideIsFocused:function(e){return e&&i},debounced:M.EI,pollingInterval:M.fu});return(0,o.useEffect)((function(){p?.id&&h?.id&&y?.id&&(l({initialized:!1,isRefreshing:!0}),a(""))}),[p?.id,h?.id,a,y?.id]),(0,A.jsx)(Ue.q,function TxHistoryContainer_objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?TxHistoryContainer_ownKeys(Object(t),!0).forEach((function(n){(0,k.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TxHistoryContainer_ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({showIcon:!0,data:null!=(n=g.result)?n:[],onPressHistory:b,showHeader:!0,isLoading:s.isRefreshing,initialized:s.initialized,onContentSizeChange:t},d.gtLg&&{tableLayout:!0}))})));const Fe=function LNHardwareWalletAuth({children:e,accountId:n,networkId:t}){var a=(0,i.A)(),[s,l]=(0,o.useState)(!1),[d,f]=(0,o.useState)(!1),{result:p,run:h}=(0,m.yk)((0,r.A)((function*(){try{return yield u.A.serviceLightning.checkAuth({accountId:n,networkId:t}),!0}catch{return!1}finally{l(!0)}})),[t,n]),y=(0,o.useCallback)((0,r.A)((function*(){f(!0);try{yield u.A.serviceLightning.exchangeToken({networkId:t,accountId:n}),setTimeout((function(){h()}),200)}catch(e){console.error("refresh lightning network token failed: ",e),c.Toast.error({title:a.formatMessage({id:"msg__authentication_failed_verify_again"})})}finally{f(!1)}})),[t,n,a,h]);return s?p?(0,A.jsx)(A.Fragment,{children:e}):(0,A.jsx)(c.Stack,{testID:"LNHardware",w:"100%",h:"100%",justifyContent:"center",alignItems:"center",children:(0,A.jsx)(c.Empty,{icon:"PasswordOutline",title:"Authorize Access",description:"Connecting your hardware wallet to access the Lightning account",buttonProps:{children:a.formatMessage({id:"action__connect"}),onPress:function(){y()},loading:d}})}):(0,A.jsx)(c.Stack,{w:"full",h:"full",children:(0,A.jsx)(c.Spinner,{size:"large"})})};const $e=function WalletContentWithAuth({networkId:e,accountId:n,children:t}){return je.A.isLightningNetworkByNetworkId(e)&&ke.A.isHwAccount({accountId:n})?(0,A.jsx)(Fe,{networkId:e,accountId:n,children:t}):t};var _e;function HomePageView({onPressHide:e,sceneName:n}){var t,p,{screenWidth:h,pageWidth:y}=function useHomePageWidth(){var e=(0,c.useMedia)(),n=(0,O.A)().width,t=(0,C.RQ)().size.sideBarWidth.val,{leftSidebarCollapsed:r}=(0,T.A)();return{screenWidth:n,pageWidth:e.md||r?n:n-t}}();null==_e&&(_e=new a.A.Value(y)),(0,o.useEffect)((function(){_e&&a.A.timing(_e,{toValue:y,duration:400,easing:s.A.inOut(s.A.quad),useNativeDriver:!1}).start()}),[y]);var k=(0,i.A)(),{activeAccount:{account:g,accountName:w,network:j,deriveInfo:x,wallet:I,ready:P,device:L}}=(0,v.LH)({num:0}),[M,H]=(x?.labelKey?k.formatMessage({id:x?.labelKey}):t=x?.label,(0,o.useState)(!1)),U=(0,m.yk)((0,r.A)((function*(){var e;return j?u.A.serviceNetwork.getVaultSettings({networkId:null!=(e=j?.id)?e:""}):Promise.resolve(void 0)})),[j]).result,N=U?.NFTEnabled&&(0,l.cN)().includes(null!=(p=j?.id)?p:""),R=U?.validationRequired,F=U?.enabledOnClassicOnly,$=(0,o.useMemo)((function(){return[{title:k.formatMessage({id:"asset__tokens"}),page:(0,o.memo)(He,(function(){return!0}))},N?{title:k.formatMessage({id:"asset__collectibles"}),page:(0,o.memo)(te,(function(){return!0}))}:null,{title:k.formatMessage({id:"transaction__history"}),page:(0,o.memo)(Re,(function(){return!0}))}].filter(Boolean)}),[k,N]),_=(0,o.useCallback)((function(){return(0,A.jsx)(c.Tab,{data:$,ListHeaderComponent:(0,A.jsx)(HomeHeaderContainer,{}),initialScrollIndex:0,contentItemWidth:_e,contentWidth:h,showsVerticalScrollIndicator:!1})}),[$,h]),D=(0,o.useCallback)((function(){return F&&"classic"!==L?.deviceType?(0,A.jsxs)(c.YStack,{height:"100%",children:[(0,A.jsx)(S,{createAddressDisabled:!0,padding:"$5"}),(0,A.jsxs)(c.Stack,{flex:1,justifyContent:"center",children:[(0,A.jsx)(c.Empty,{icon:"LinkSolid",title:"Selected network supports only 「Classic」"}),";"]})]}):g?R?(0,A.jsx)($e,{networkId:null!=(t=j?.id)?t:"",accountId:null!=(r=g?.id)?r:"",children:(0,A.jsx)(A.Fragment,{children:_()})}):(0,A.jsx)(A.Fragment,{children:_()}):(0,A.jsxs)(c.YStack,{height:"100%",children:[(0,A.jsx)(S,{padding:"$5"}),(0,A.jsx)(c.Stack,{flex:1,justifyContent:"center",children:(0,A.jsx)(d.TP,{name:w,chain:null!=(e=j?.name)?e:"",type:null!=(n=x?.labelKey?k.formatMessage({id:x?.labelKey}):x?.label)?n:""})})]});var e,n,t,r}),[F,L?.deviceType,g,R,_,w,j?.name,j?.id,x?.labelKey,x?.label,k]),B=(0,o.useCallback)((function(){if(!P)return null;var e=(0,A.jsx)(c.Stack,{h:"100%",justifyContent:"center",children:(0,A.jsx)(d.Bl,{})});return I&&(e=D()),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(f.i,{showHeaderRight:!0,sceneName:n}),(0,A.jsxs)(c.Page.Body,{children:[(0,A.jsx)(UpdateReminder,{}),(0,A.jsx)(b.a,{}),e]})]})}),[P,I,n,D]);return(0,o.useMemo)((function(){return(0,A.jsx)(c.Page,{children:B()})}),[B])}},478951:(e,n,t)=>{t.r(n),t.d(n,{UrlAccountLanding:()=>UrlAccountLanding,UrlAccountPageContainer:()=>UrlAccountPageContainer});var r=t(586330),o=(t(446108),t(514041)),i=t(490343),a=t(310955),s=t(325809),c=t(498356),l=t(326745),u=t(162616),d=t(181447),f=(t(663522),t(584186)),p=t(714191),h=t(506851),y=t(262424),A=t(728234),m=t(394764),v=t(826339);function UrlAccountAutoReplaceHistory({num:e}){var n=(0,A.jH)(),t=(0,o.useRef)(n);t.current=n;var{activeAccount:r}=(0,u.LH)({num:e}),{selectedAccount:i}=(0,u.wz)({num:e}),{sceneName:a}=(0,u.A6)(),s=r?.account?.address,c=r?.network?.id,l=r?.network?.code,d=`${i?.walletId||""}-${i?.indexedAccountId||""}-${i?.othersWalletAccountId||""}`,f=(0,m.Z)(d),h=(0,o.useRef)(!0);f!==d&&(h.current=!1);var y=(0,o.useRef)(),b=(0,o.useCallback)((function({delay:e}){a===p.Zs.homeUrlAccount&&t.current&&(y.current=setTimeout((function(){(0,v.n2)({networkId:c,networkCode:l,address:s})}),e))}),[s,c,l,a]);return(0,o.useEffect)((function(){b({delay:0}),h.current=!0}),[b]),(0,o.useEffect)((function(){var e;return n&&(h.current?b({delay:100}):e=setTimeout((function(){h.current=!0}),1e3)),function(){clearTimeout(e)}}),[n,b]),null}var b=t(831085),k=p.Zs.homeUrlAccount;function UrlAccountPage(){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.U,{sceneName:k},k),(0,b.jsx)(UrlAccountAutoReplaceHistory,{num:0})]})}function UrlAccountAutoCreate({redirectMode:e}){var n=(0,l.u)(),t=(0,c.A)(),s=n.params,p=(0,u.z$)(),[y,A]=(0,o.useState)();return(0,o.useEffect)((function(){setTimeout((0,r.A)((function*(){var n=s?.networkId,r=s?.networkId,o=s?.address,fixNetworkParams=function(e){e&&(n=e.id,r=e.code)};if(!o&&n){o=n,n=void 0,r=void 0;var c=yield a.A.serviceUniversalSearch.universalSearch({input:o,searchTypes:[h.j.Address]}),l=c?.[h.j.Address]?.items?.[0]?.payload;if(l){var{network:u}=l;fixNetworkParams(u)}}var y=!1,m=yield a.A.serviceNetwork.getNetworkSafe({code:r});(m||(m=yield a.A.serviceNetwork.getNetworkSafe({networkId:n})))&&fixNetworkParams(m),n&&o||(y=!0);var b=(0,v.go)();if(n&&o&&(o?.toLowerCase()!==b?.address?.toLowerCase()||n!==b?.networkId))try{var k=yield a.A.serviceAccount.addWatchingAccount({input:o,networkId:n,deriveType:void 0,isUrlAccount:!0});p.current.updateSelectedAccountForSingletonAccount({num:0,networkId:n,walletId:d.Hk,othersWalletAccountId:k.accounts[0].id})}catch(e){console.error("UrlAccountAutoCreate error: ",e),i.Toast.error({title:`Unsupported address or network: ${o}`}),y=!0}y?A("invalid"):(A("ok"),e&&(v.Jh.replaceHomePage(t),o&&(yield f.A.wait(1),v.Jh.pushUrlAccountPage(t,{address:o,networkId:r}))))})),0)}),[p,t,e,n.params,n.path,s,s?.address,s?.networkId]),"invalid"===y?(0,b.jsx)(i.Page,{children:(0,b.jsxs)(i.Stack,{p:"$6",children:[(0,b.jsx)(i.SizableText,{my:"$6",children:"Sorry, something went wrong!"}),null,(0,b.jsx)(i.Button,{onPress:function(){v.Jh.replaceHomePage(t)},children:"Back to Home"})]})}):"ok"!==y||e?(0,b.jsx)(i.Stack,{flex:1,alignContent:"center",justifyContent:"center",children:(0,b.jsx)(i.Spinner,{size:"small"})}):(0,b.jsx)(UrlAccountPage,{})}function UrlAccountPageContainer(){return(0,b.jsx)(s.b8,{config:{sceneName:k,sceneUrl:""},enabledNum:[0],children:(0,b.jsx)(UrlAccountAutoCreate,{})})}function UrlAccountLanding(){return(0,b.jsx)(s.b8,{config:{sceneName:k,sceneUrl:""},enabledNum:[0],children:(0,b.jsx)(UrlAccountAutoCreate,{redirectMode:!0})})}},639451:(e,n,t)=>{t.d(n,{Ed:()=>s,Xo:()=>a,xf:()=>useDownloadProgress});var r,o,i=t(586330),a=(r=(0,i.A)((function*(){})),function downloadPackage(){return r.apply(this,arguments)}),s=(o=(0,i.A)((function*(){})),function installPackage(){return o.apply(this,arguments)}),useDownloadProgress=function(){return 0}},259641:(e,n,t)=>{t.d(n,{G:()=>isAvailableAsync,w:()=>shareAsync});var r=t(586330),o=t(72631),i=t(324586);function ownKeys(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ownKeys(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const a={get name(){return"ExpoSharing"},isAvailableAsync:()=>(0,r.A)((function*(){return"undefined"!=typeof navigator&&!!navigator.share}))(),shareAsync:(e,n={})=>(0,r.A)((function*(){if(!navigator.share)throw new o.V("navigator","share");yield navigator.share(_objectSpread(_objectSpread({},n),{},{url:e}))}))()};function isAvailableAsync(){return _isAvailableAsync.apply(this,arguments)}function _isAvailableAsync(){return(_isAvailableAsync=(0,r.A)((function*(){return!!a&&(!a.isAvailableAsync||(yield a.isAvailableAsync()))}))).apply(this,arguments)}function shareAsync(e){return _shareAsync.apply(this,arguments)}function _shareAsync(){return(_shareAsync=(0,r.A)((function*(e,n={}){if(!a||!a.shareAsync)throw new o.V("Sharing","shareAsync");return yield a.shareAsync(e,n)}))).apply(this,arguments)}}}]);