(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4575],{940916:(e,t,r)=>{"use strict";r.d(t,{G:()=>g});var n=r(482451),i=r.n(n),s=r(324586),a=r(586330),o=r(230414),u=r(507140),c=r(606777),d=r(554902),p=r(180556),l=r(929296),f=r(195309),y=r(972715),h=r(901048).Buffer;function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,y.A)(e);if(t){var i=(0,y.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,f.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var v=function(e){(0,l.A)(ChainSigner,e);var t=_createSuper(ChainSigner);function ChainSigner(e,r,n){var i,s=(0,d.N)(n,{key:e,chainCode:h.alloc(32)},r).key.toString("hex");return(i=t.call(this,s,n)).encryptedPrivateKey=e,i.password=r,i.curve=n,i}var r,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,d.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(r=(0,a.A)((function*(){return c.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return r.apply(this,arguments)}),n.sign=function sign(e){var t=(0,d._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([t.slice(0,-1),t[t.length-1]]):Promise.resolve([t,0])},(0,o.A)(ChainSigner)}(function(){function Verifier(e,t){this.curve=t,this.compressedPublicKey=h.from(e,"hex"),this.uncompressedPublicKey=(0,d.sA)(t,this.compressedPublicKey)}var e,t=Verifier.prototype;return t.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},t.getPubkeyHex=(e=(0,a.A)((function*(e){return c.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(t){return e.apply(this,arguments)}),t.verify=function verify(){return Promise.resolve(h.from([]))},t.verifySignature=function verifySignature({publicKey:e,digest:t,signature:r}){var n=c.A.toBuffer(e),i=c.A.toBuffer(t),s=c.A.toBuffer(r),{curve:a}=this,o=(0,d.MX)(a,n,i,s);return Promise.resolve(o)},(0,o.A)(Verifier)}());function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,s.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(){function CoreChainApiBase(){}var e,t,r,n,s,l=CoreChainApiBase.prototype;return l.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return d.ev;case"secp256k1":return d.bI;case"nistp256":return d.OX;default:throw new u.He("Unsupported curve")}},l.baseCreateSigner=(e=(0,a.A)((function*({curve:e,privateKey:t,password:r}){if(void 0===r)throw new u.He("Software signing requires a password.");var n=c.A.toBuffer(t);return Promise.resolve(new v(n,r,e))})),function baseCreateSigner(t){return e.apply(this,arguments)}),l.baseGetSingleSigner=(t=(0,a.A)((function*({payload:e,curve:t}){var r=yield this.getPrivateKeys(e),n=e.account.path,i=r[n],s=e.account.relPaths?.[0];if(!i&&s&&(i=r[[n,s].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:t,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return t.apply(this,arguments)}),l.baseGetPrivateKeys=(r=(0,a.A)((function*({payload:e,curve:t}){var{credentials:r,account:n,password:i}=e,s={};if(r.hd&&r.imported)throw new u.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(r.hd){var{relPaths:a}=n;s=yield this.baseGetPrivateKeysHd({curve:t,account:n,hdCredential:r.hd,password:i,relPaths:a})}if(r.imported){var{privateKey:o}=(0,d.VV)({password:i,credential:r.imported}),p=c.A.bytesToHex((0,d.w)(i,o));s[n.path]=p,s[""]=p}if(!Object.keys(s).length)throw new Error("No private keys found");return s})),function baseGetPrivateKeys(e){return r.apply(this,arguments)}),l.baseGetPrivateKeysHd=(n=(0,a.A)((function*({curve:e,password:t,account:r,relPaths:n,hdCredential:i}){var{path:s}=r,a=s.split("/"),o=n||[a.pop()],p=a.join("/");if(0===o.length)throw new u.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,d.Wu)(e,i,t,p,o).reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},{[t.path]:c.A.bytesToHex(t.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),l.baseGetAddressesFromHd=(s=(0,a.A)((function*(e,t){var r=this,{curve:n,generateFrom:s}=t,{template:o,hdCredential:l,password:f,indexes:y}=e,{pathPrefix:h,pathSuffix:v}=(0,p.Ah)(o),g=y.map((function(e){return v.replace("{index}",e.toString())})),A="privateKey"===s,P=[],b=[];A?b=(0,d.Wu)(n,l,f,h,g):P=(0,d.W6)(n,l,f,h,g);var S=A?b:P;if(S.length!==y.length)throw new u.He("Unable to get publick key.");var C,x=yield Promise.all(S.map((C=(0,a.A)((function*(t){var n,s,{path:a,extendedKey:{key:o}}=t;if(A){var u=c.A.bytesToHex((0,d.Yc)(f,o));s=yield r.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:u,privateKeyInfo:t})}else n=o.toString("hex"),s=yield r.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:t});return i()({publicKey:n,path:a},s)})),function(e){return C.apply(this,arguments)})));return{addresses:x}})),function baseGetAddressesFromHd(e,t){return s.apply(this,arguments)}),(0,o.A)(CoreChainApiBase)}()},574182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(230414),i=r(929296),s=r(195309),a=r(972715);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,a.A)(e);if(t){var i=(0,a.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,s.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var o=function(e){(0,i.A)(CoreChainHd,e);var t=_createSuper(CoreChainHd);function CoreChainHd(){return t.apply(this,arguments)}return(0,n.A)(CoreChainHd)}(r(216435).A)},216435:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(586330),i=r(230414),s=r(929296),a=r(195309),o=r(972715),u=r(606777),c=r(940916),d=r(554902),p=r(180556),l=r(656298),f=r(590715);function _createSuper(e){var t=_isNativeReflectConstruct();return function _createSuperInternal(){var r,n=(0,o.A)(e);if(t){var i=(0,o.A)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a.A)(this,r)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var y="ed25519",h=function(e){(0,s.A)(CoreChainSoftware,e);var t=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return t.apply(this,arguments)}var r,a,o,c,h,v,g,A,P=CoreChainSoftware.prototype;return P.baseGetPrivateKeysHd=(r=(0,n.A)((function*({password:e,account:t,hdCredential:r}){var{path:n}=t,i=yield(0,l.o1)(e,r,n),s=(0,l.w7)(i),a=(0,d.w)(e,s);return{[n]:u.A.bytesToHex(a)}})),function baseGetPrivateKeysHd(e){return r.apply(this,arguments)}),P.getPrivateKeys=(a=(0,n.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:y})})),function getPrivateKeys(e){return a.apply(this,arguments)}),P.getAdaXprvInfo=(o=(0,n.A)((function*({account:e,signer:t}){var r=yield t.getPrvkey(),n=(0,l.zd)(r);return{xprv:yield(0,l.GN)(n.rootKey),accountIndex:(0,l.Cm)(e.path)}})),function getAdaXprvInfo(e){return o.apply(this,arguments)}),P.signTransaction=(c=(0,n.A)((function*(e){var{unsignedTx:t,account:r}=e,n=t.encodedTx,i=yield this.baseGetSingleSigner({payload:e,curve:y}),{xprv:s,accountIndex:a}=yield this.getAdaXprvInfo({signer:i,account:r}),o=yield l.xh.getCardanoApi(),{signedTx:u,txid:c}=yield o.signTransaction(n.tx.body,r.address,Number(a),n.inputs,s,!!n.signOnly,!1);return{encodedTx:t.encodedTx,rawTx:u,txid:c}})),function signTransaction(e){return c.apply(this,arguments)}),P.signMessage=(h=(0,n.A)((function*(e){var{account:t}=e,r=e.unsignedMsg,n=yield this.baseGetSingleSigner({payload:e,curve:y}),{xprv:i,accountIndex:s}=yield this.getAdaXprvInfo({signer:n,account:t}),a=yield l.xh.getCardanoApi(),{signature:o,key:u}=yield a.dAppSignData(r.payload.addr,r.payload.payload,i,Number(s));return JSON.stringify({signature:o,key:u})})),function signMessage(e){return h.apply(this,arguments)}),P.buildAdaAddressItem=function buildAdaAddressItem({baseAddress:e,stakingAddress:t}){var{address:r,path:n,xpub:i}=e;return{address:r,publicKey:"",path:(0,p.vN)({fullPath:n}),xpub:i,addresses:{"0/0":r,"2/0":t.address},relPath:"0/0"}},P.getAddressFromPrivate=(v=(0,n.A)((function*(e){var{privateKeyRaw:t}=e,r=u.A.toBuffer(t),n=(0,l.zd)(r),i=parseInt(n.index),s=(0,l.h$)(n.rootKey,[i],f.x.MAINNET),{baseAddress:a,stakingAddress:o}=s[0];return this.buildAdaAddressItem({baseAddress:a,stakingAddress:o})})),function getAddressFromPrivate(e){return v.apply(this,arguments)}),P.getAddressFromPublic=(g=(0,n.A)((function*(){throw new Error("Method not implemented. use getAddressFromPrivate instead.")})),function getAddressFromPublic(){return g.apply(this,arguments)}),P.getAddressesFromHd=(A=(0,n.A)((function*(e){var t=this,{hdCredential:r,password:n,indexes:i}=e;return{addresses:(yield(0,l.hA)(r,n,i,f.x.MAINNET)).map((function(e){var{baseAddress:r,stakingAddress:n}=e;return t.buildAdaAddressItem({baseAddress:r,stakingAddress:n})}))}})),function getAddressesFromHd(e){return A.apply(this,arguments)}),(0,i.A)(CoreChainSoftware)}(c.G)},656298:(e,t,r)=>{"use strict";r.d(t,{h$:()=>batchGetShelleyAddressByRootKey,hA:()=>l,w7:()=>decodePrivateKeyByXprv,zd:()=>encodePrivateKey,o1:()=>generateExportedCredential,Cm:()=>getPathIndex,GN:()=>getXprvString,xh:()=>n.A,J9:()=>validBootstrapAddress,$T:()=>validShelleyAddress});var n=r(14863),i=r(541199),s=r(590715),encodeAddress=function(e){var t=(0,i.getAddressType)(e);if(t===i.AddressTypes.BOOTSTRAP)return i.base58.encode(e);var r={[i.AddressTypes.BASE]:"addr",[i.AddressTypes.POINTER]:"addr",[i.AddressTypes.ENTERPRISE]:"addr",[i.AddressTypes.REWARD]:"stake"},n=(0,i.getShelleyAddressNetworkId)(e)===s.x.TESTNET_OR_PREPROD,a=`${r[t]}${n?"_test":""}`;return i.bech32.encode(a,e)},xpub2blake2b224Hash=function(e){return(0,i.getPubKeyBlake2b224Hash)(function(e){return e.slice(0,32)}(e))},stakingAddressFromXpub=function(e,t){var r=(0,i.packRewardAddress)(xpub2blake2b224Hash(e),t);return encodeAddress(r)},baseAddressFromXpub=function(e,t,r){var n=(0,i.packBaseAddress)(xpub2blake2b224Hash(e),xpub2blake2b224Hash(t),r);return encodeAddress(n)},validShelleyAddress=function(e){return(e.startsWith("addr1")||e.startsWith("addr_test1"))&&(0,i.isValidShelleyAddress)(e)},validBootstrapAddress=function(e){return(e.startsWith("Ae2")||e.startsWith("DdzFF"))&&(0,i.isValidBootstrapAddress)(e)},a=r(586330),o=r(554902),u=2147483648,c=2,d=r(901048).Buffer;function getPathIndex(e){return e.split("/").slice(3,4)[0].slice(0,-1)}function getRootKey(e,t){return _getRootKey.apply(this,arguments)}function _getRootKey(){return(_getRootKey=(0,a.A)((function*(e,t){var r=(0,o.s8)(t,e);return yield(0,i.mnemonicToRootKeypair)(r,c)}))).apply(this,arguments)}function getXprvString(e,t){return _getXprvString.apply(this,arguments)}function _getXprvString(){return(_getXprvString=(0,a.A)((function*(e,t){var r="string"==typeof e?yield getRootKey(e,t):e;return i.bech32.encode("xprv",d.concat([r.slice(0,64),r.slice(96)]))}))).apply(this,arguments)}function generateExportedCredential(e,t,r){return _generateExportedCredential.apply(this,arguments)}function _generateExportedCredential(){return(_generateExportedCredential=(0,a.A)((function*(e,t,r){var n=getPathIndex(r),s=yield getRootKey(e,t);return i.bech32.encode("xprv",d.concat([s.slice(0,64),s.slice(96,128),d.from(n,"utf8")]))}))).apply(this,arguments)}function decodePrivateKeyByXprv(e){var t=i.bech32.decode(e),r=t.data.slice(96),n=(0,i.toPublic)(t.data.slice(0,64));return d.concat([t.data.slice(0,64),n,t.data.slice(64,96),r])}function encodePrivateKey(e){return{rootKey:e.slice(0,128),index:d.from(e.slice(128)).toString("utf8")}}var shelleyStakeAccountPath=function(e){return[u+1852,u+1815,u+e,2,0]},derivePath=function(e,t){return e.reduce((function(e,t){return(0,i.derivePrivate)(e,t,c)}),t)},deriveXpub=function(e,t){var r=derivePath(e,t);return(0,i.toPublic)(r.slice(0,64))};function ShelleyStakingAccountProvider(e,t,r){var n=shelleyStakeAccountPath(e),i=deriveXpub(n,t);return{path:n,address:stakingAddressFromXpub(i,r)}}function ShelleyBaseAddressProvider(e,t,r){var n,i=[u+1852,u+1815,u+e,0,0],s=deriveXpub(i,t),a=shelleyStakeAccountPath(e),o=deriveXpub(a,t),c=function(e,t){return derivePath(e,t).slice(64).toString("hex")}(i.slice(0,3),t);return{path:(n=i,`m/${n.map((function(e){return e%u+(e>=u?"'":"")})).join("/")}`),address:baseAddressFromXpub(s,o,r),xpub:c}}var p,batchGetShelleyAddressByRootKey=function(e,t,r){return t.map((function(t){return{baseAddress:ShelleyBaseAddressProvider(t,e,r),stakingAddress:ShelleyStakingAccountProvider(t,e,r)}}))},l=(p=(0,a.A)((function*(e,t,r,n){var i=yield getRootKey(t,e);return batchGetShelleyAddressByRootKey(i,r,n)})),function batchGetShelleyAddresses(e,t,r,n){return p.apply(this,arguments)});r(11261)},14863:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n,i=r(586330);const s={getCardanoApi:(n=(0,i.A)((function*(){var e=yield Promise.all([r.e(68822),r.e(29853),r.e(50794),r.e(53887)]).then(r.bind(r,429853));return{composeTxPlan:e.onekeyUtils.composeTxPlan,signTransaction:e.onekeyUtils.signTransaction,hwSignTransaction:e.trezorUtils.signTransaction,txToOneKey:e.onekeyUtils.txToOneKey,dAppGetBalance:e.dAppUtils.getBalance,dAppGetAddresses:e.dAppUtils.getAddresses,dAppGetUtxos:e.dAppUtils.getUtxos,dAppConvertCborTxToEncodeTx:e.dAppUtils.convertCborTxToEncodeTx,dAppSignData:e.dAppUtils.signData}})),function getCardanoApi(){return n.apply(this,arguments)})};var{getCardanoApi:a}=s,o=function(){var e=(0,i.A)((function*(){return Promise.resolve(!0)}));return function ensureSDKReady(){return e.apply(this,arguments)}}();const u={getCardanoApi:a,ensureSDKReady:o}},11261:(e,t,r)=>{"use strict";r.d(t,{lo:()=>transformToOneKeyOutputs,mc:()=>transformToOneKeyInputs});var n=r(324586);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.BASE=0]="BASE",e[e.BASE_SCRIPT_KEY=1]="BASE_SCRIPT_KEY",e[e.BASE_KEY_SCRIPT=2]="BASE_KEY_SCRIPT",e[e.BASE_SCRIPT_SCRIPT=3]="BASE_SCRIPT_SCRIPT",e[e.POINTER=4]="POINTER",e[e.POINTER_SCRIPT=5]="POINTER_SCRIPT",e[e.ENTERPRISE=6]="ENTERPRISE",e[e.ENTERPRISE_SCRIPT=7]="ENTERPRISE_SCRIPT",e[e.BYRON=8]="BYRON",e[e.REWARD=14]="REWARD",e[e.REWARD_SCRIPT=15]="REWARD_SCRIPT"}({});var transformToOneKeyInputs=function(e,t){return e.map((function(e){var r=t.find((function(t){return t.tx_hash===e.txHash&&+t.output_index===e.outputIndex}));if(!r)throw Error(`Cannot transform utxo ${e.txHash}:${e.outputIndex}`);return{path:r.path,prev_hash:e.txHash,prev_index:e.outputIndex}}))},parseAsset=function(e){return{policyId:e.slice(0,56),assetNameInHex:e.slice(56)}},transformToTokenBundle=function(e){if(0!==e.length){var t=[];e.forEach((function(e){var{policyId:r}=parseAsset(e.unit);t.includes(r)||t.push(r)}));var r=[];return t.forEach((function(t){var n=[];e.forEach((function(e){var r=parseAsset(e.unit);r.policyId===t&&n.push({assetNameBytes:r.assetNameInHex,amount:e.quantity})})),r.push({policyId:t,tokenAmounts:n})})),r}},transformToOneKeyOutputs=function(e,t){return e.map((function(e){return _objectSpread(_objectSpread({},e.isChange?{addressParameters:t}:{address:e.address}),{},{amount:e.amount,tokenBundle:transformToTokenBundle(e.assets)})}))}},878044:()=>{}}]);