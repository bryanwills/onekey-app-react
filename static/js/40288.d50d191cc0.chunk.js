"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[40288],{540288:(e,n,t)=>{t.r(n),t.d(n,{FinalizeWalletSetup:()=>FinalizeWalletSetup,default:()=>g});var i,a=t(586330),r=t(514041),l=t(490343),s=t(318822),c=t(730223),o=t(714191),u=t(310955),d=t(325809),f=t(498356),p=t(162616),y=(i=(0,a.A)((function*({run:e,options:n}){try{return yield u.A.servicePassword.openPasswordSecuritySession(n),yield e()}finally{yield u.A.servicePassword.closePasswordSecuritySession()}})),function withPromptPasswordVerify(e){return i.apply(this,arguments)}),S=t(831085);function FinalizeWalletSetupPage({route:e}){var[n,t]=(0,r.useState)(s.Fn.CreatingWallet),[i,o]=(0,r.useState)(!1),d=(0,f.A)(),g=e?.params?.mnemonic,h=(0,p.z$)(),m={[s.Fn.CreatingWallet]:"Creating your wallet",[s.Fn.GeneratingAccounts]:"Generating your accounts",[s.Fn.EncryptingData]:"Encrypting your data",[s.Fn.Ready]:"Your wallet is now ready"},F=(0,r.useRef)(!1);(0,r.useEffect)((function(){(0,a.A)((function*(){try{g&&!F.current&&(yield y({run:(e=(0,a.A)((function*(){yield h.current.createHDWallet({mnemonic:g})})),function run(){return e.apply(this,arguments)})}),F.current=!0),o(!0)}catch(e){throw d.pop(),e}var e}))()}),[h,g,d]),(0,r.useEffect)((function(){var fn=function(e){t(e.step)};return s.iL.on(s.Tu.FinalizeWalletSetupStep,fn),function(){s.iL.off(s.Tu.FinalizeWalletSetupStep,fn)}}),[]);var x,w=(0,r.useRef)(!1),j=(x=(0,a.A)((function*(){var{isOnboardingDone:e}=yield u.A.serviceOnboarding.isOnboardingDone();w.current=!e})),function readIsFirstCreateWallet(){return x.apply(this,arguments)});return(0,r.useEffect)((function(){n===s.Fn.CreatingWallet&&j(),i&&n===s.Fn.Ready&&setTimeout((function(){d.navigate(c.WP.Main),w.current}),1e3)}),[n,d,i]),(0,S.jsxs)(l.Page,{children:[(0,S.jsx)(l.Page.Header,{disableClose:!0,title:"Finalize Wallet Setup"}),(0,S.jsxs)(l.Page.Body,{p:"$5",justifyContent:"center",alignItems:"center",children:[(0,S.jsx)(l.Stack,{w:"$16",h:"$16",justifyContent:"center",alignItems:"center",testID:"finalize-wallet-setup",children:(0,S.jsx)(l.AnimatePresence,{exitBeforeEnter:!0,children:n===s.Fn.Ready?(0,S.jsx)(l.Stack,{animation:"quick",enterStyle:{opacity:0,scale:0},children:(0,S.jsx)(l.Icon,{name:"CheckRadioSolid",color:"$iconSuccess",size:"$16"})},"CheckRadioSolid"):(0,S.jsx)(l.Spinner,{size:"large",animation:"quick",exitStyle:{opacity:0,scale:0}},"spinner")})}),(0,S.jsx)(l.AnimatePresence,{exitBeforeEnter:!0,children:(0,S.jsx)(l.Stack,{animation:"quick",enterStyle:{opacity:0,x:12},children:(0,S.jsx)(l.Heading,{mt:"$5",size:"$headingMd",children:m[n]})},n)})]})]})}function FinalizeWalletSetup({route:e,navigation:n}){return(0,S.jsx)(d.b8,{enabledNum:[0],config:{sceneName:o.Zs.home},children:(0,S.jsx)(FinalizeWalletSetupPage,{route:e,navigation:n})})}const g=FinalizeWalletSetup}}]);