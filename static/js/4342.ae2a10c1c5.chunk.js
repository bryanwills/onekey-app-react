"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[4342],{804342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>SettingCurrencyModal});var r=n(586330),i=n(514041),a=n(908867),s=n(490343),u=(n(793239),n(310955)),c=n(791088),o=n(911998),l=n(734809),d=n(831085),ListHeaderComponent=function({text:e,onChangeText:t}){var n=(0,a.A)();return(0,d.jsx)(s.Stack,{px:"$4",pt:"$4",children:(0,d.jsx)(s.SearchBar,{value:e,onChangeText:t,placeholder:n.formatMessage({id:"form__search"})})})},f=[],currencyFilterFn=function(e,t){var n=e.toLowerCase();return t.id.toLowerCase().includes(n)||t.name.toLowerCase().includes(n)},CurrencyItem=function({item:e}){var[t]=(0,l.useSettingsPersistAtom)(),n=(0,i.useCallback)((0,r.A)((function*(){yield u.A.serviceSetting.setCurrency({id:e.id,symbol:e.unit})})),[e]);return(0,d.jsx)(c.c,{title:`${e.id.toUpperCase()} - ${e.unit}`,subtitle:e.name,checkMark:t.currencyInfo.id===e.id,onPress:n})};function SettingCurrencyModal(){var[e,t]=(0,i.useState)(""),n=(0,o.yk)((0,r.A)((function*(){return yield u.A.serviceSetting.getCurrencyList()})),[],{watchLoading:!0}),a=(0,i.useMemo)((function(){if(!n.result)return[];for(var t={crypto:[],fiat:[],popular:[]},r=n.result?.filter((function(t){return currencyFilterFn(e,t)})),_loop=function(){var e=r[i];e.type.forEach((function(n){t[n]&&t[n].push(e)}))},i=0;i<r.length;i+=1)_loop();return[{title:"popular",data:t.popular},{title:"crypto",data:t.crypto},{title:"fiat",data:t.fiat}].filter((function(e){return e.data.length>0}))}),[n,e]),c=(0,i.useCallback)((function({item:e}){return(0,d.jsx)(CurrencyItem,{item:e})}),[]),l=(0,i.useCallback)((function({section:e}){return(0,d.jsx)(s.SectionList.SectionHeader,{title:e.title})}),[]);return(0,d.jsx)(s.Page,{children:n?.isLoading?(0,d.jsx)(s.Stack,{h:"$48",justifyContent:"center",alignItems:"center",children:(0,d.jsx)(s.Spinner,{})}):(0,d.jsx)(s.SectionList,{estimatedItemSize:"$6",ListHeaderComponent:(0,d.jsx)(ListHeaderComponent,{text:e,onChangeText:t}),sections:null!=a?a:f,renderItem:c,renderSectionHeader:l})})}}}]);