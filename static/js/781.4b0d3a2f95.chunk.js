"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[781],{940916:(e,r,t)=>{t.d(r,{G:()=>b});var n=t(482451),i=t.n(n),o=t(324586),a=t(586330),s=t(230414),c=t(507140),u=t(606777),f=t(554902),p=t(180556),l=t(929296),y=t(195309),d=t(972715),v=t(901048).Buffer;function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,d.A)(e);if(r){var i=(0,d.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,y.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var h=function(e){(0,l.A)(ChainSigner,e);var r=_createSuper(ChainSigner);function ChainSigner(e,t,n){var i,o=(0,f.N)(n,{key:e,chainCode:v.alloc(32)},t).key.toString("hex");return(i=r.call(this,o,n)).encryptedPrivateKey=e,i.password=t,i.curve=n,i}var t,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,f.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(t=(0,a.A)((function*(){return u.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return t.apply(this,arguments)}),n.sign=function sign(e){var r=(0,f._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([r.slice(0,-1),r[r.length-1]]):Promise.resolve([r,0])},(0,s.A)(ChainSigner)}(function(){function Verifier(e,r){this.curve=r,this.compressedPublicKey=v.from(e,"hex"),this.uncompressedPublicKey=(0,f.sA)(r,this.compressedPublicKey)}var e,r=Verifier.prototype;return r.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},r.getPubkeyHex=(e=(0,a.A)((function*(e){return u.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(r){return e.apply(this,arguments)}),r.verify=function verify(){return Promise.resolve(v.from([]))},r.verifySignature=function verifySignature({publicKey:e,digest:r,signature:t}){var n=u.A.toBuffer(e),i=u.A.toBuffer(r),o=u.A.toBuffer(t),{curve:a}=this,s=(0,f.MX)(a,n,i,o);return Promise.resolve(s)},(0,s.A)(Verifier)}());function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,o.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var b=function(){function CoreChainApiBase(){}var e,r,t,n,o,l=CoreChainApiBase.prototype;return l.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return f.ev;case"secp256k1":return f.bI;case"nistp256":return f.OX;default:throw new c.He("Unsupported curve")}},l.baseCreateSigner=(e=(0,a.A)((function*({curve:e,privateKey:r,password:t}){if(void 0===t)throw new c.He("Software signing requires a password.");var n=u.A.toBuffer(r);return Promise.resolve(new h(n,t,e))})),function baseCreateSigner(r){return e.apply(this,arguments)}),l.baseGetSingleSigner=(r=(0,a.A)((function*({payload:e,curve:r}){var t=yield this.getPrivateKeys(e),n=e.account.path,i=t[n],o=e.account.relPaths?.[0];if(!i&&o&&(i=t[[n,o].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:r,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return r.apply(this,arguments)}),l.baseGetPrivateKeys=(t=(0,a.A)((function*({payload:e,curve:r}){var{credentials:t,account:n,password:i}=e,o={};if(t.hd&&t.imported)throw new c.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(t.hd){var{relPaths:a}=n;o=yield this.baseGetPrivateKeysHd({curve:r,account:n,hdCredential:t.hd,password:i,relPaths:a})}if(t.imported){var{privateKey:s}=(0,f.VV)({password:i,credential:t.imported}),p=u.A.bytesToHex((0,f.w)(i,s));o[n.path]=p,o[""]=p}if(!Object.keys(o).length)throw new Error("No private keys found");return o})),function baseGetPrivateKeys(e){return t.apply(this,arguments)}),l.baseGetPrivateKeysHd=(n=(0,a.A)((function*({curve:e,password:r,account:t,relPaths:n,hdCredential:i}){var{path:o}=t,a=o.split("/"),s=n||[a.pop()],p=a.join("/");if(0===s.length)throw new c.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,f.Wu)(e,i,r,p,s).reduce((function(e,r){return _objectSpread(_objectSpread({},e),{},{[r.path]:u.A.bytesToHex(r.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),l.baseGetAddressesFromHd=(o=(0,a.A)((function*(e,r){var t=this,{curve:n,generateFrom:o}=r,{template:s,hdCredential:l,password:y,indexes:d}=e,{pathPrefix:v,pathSuffix:h}=(0,p.Ah)(s),b=d.map((function(e){return h.replace("{index}",e.toString())})),g="privateKey"===o,w=[],A=[];g?A=(0,f.Wu)(n,l,y,v,b):w=(0,f.W6)(n,l,y,v,b);var P=g?A:w;if(P.length!==d.length)throw new c.He("Unable to get publick key.");var S,C=yield Promise.all(P.map((S=(0,a.A)((function*(r){var n,o,{path:a,extendedKey:{key:s}}=r;if(g){var c=u.A.bytesToHex((0,f.Yc)(y,s));o=yield t.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:c,privateKeyInfo:r})}else n=s.toString("hex"),o=yield t.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:r});return i()({publicKey:n,path:a},o)})),function(e){return S.apply(this,arguments)})));return{addresses:C}})),function baseGetAddressesFromHd(e,r){return o.apply(this,arguments)}),(0,s.A)(CoreChainApiBase)}()},100781:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var n=t(230414),i=t(929296),o=t(195309),a=t(972715);function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,a.A)(e);if(r){var i=(0,a.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,o.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var s=function(e){(0,i.A)(CoreChainHd,e);var r=_createSuper(CoreChainHd);function CoreChainHd(){return r.apply(this,arguments)}return(0,n.A)(CoreChainHd)}(t(906851).A)},906851:(e,r,t)=>{t.d(r,{A:()=>C});var n=t(324586),i=t(230414),o=t(929296),a=t(195309),s=t(972715),c=t(586330),u=t(968135),f=t(457719),p=t.n(f),l=t(67239),y=t.n(l),d=t(507140),v=t(606777),h=t(940916),b=t(554902),g=(function(e){e.MAIN="314",e.CALIBRATION="314159"}({}),function(e){return e[e.ID=0]="ID",e[e.SECP256K1=1]="SECP256K1",e[e.ACTOR=2]="ACTOR",e[e.BLS=3]="BLS",e[e.DELEGATED=4]="DELEGATED",e}({})),w=t(901048).Buffer;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,n.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,s.A)(e);if(r){var i=(0,s.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,a.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var A="secp256k1",P=w.from([1,113,160,228,2,32]),S=32;function getDigest(e){var r=y().blake2bInit(32);return y().blake2bUpdate(r,function getCID(e){var r=y().blake2bInit(S);y().blake2bUpdate(r,e);var t=w.from(y().blake2bFinal(r));return w.concat([P,t])}(e)),w.from(y().blake2bFinal(r))}function _signTransaction(){return(_signTransaction=(0,c.A)((function*(e,r){var{AddressSecp256k1:n,NetworkPrefix:i,Transaction:o}=t(121019),a=e.encodedTx,s=w.concat;w.concat=function(e,r){return s(e.map((function(e){return w.from(e)})),r)},n.fromString=function(e){var r=e[0],t=e[1];if(!function(e){return Object.values(i).includes(e)}(r))throw new d.He("Invalid filecoin network.");if(parseInt(t)!==g.SECP256K1)throw new d.He("Invalid filecoin protocol indicator.");var o=w.from(p()(e.substring(2).toUpperCase(),"RFC4648")),a=o.subarray(0,-4),s=o.subarray(-4),c=new n(r,a);if(w.from(c.getChecksum()).toString("hex")!==w.from(s).toString("hex"))throw new d.He("Invalid filecoin checksum network.");return c};var c=o.fromJSON(a),u=getDigest(yield c.serialize()),[f,l]=yield r.sign(u),y=w.concat([w.from(f),w.from([l])]);return w.concat=s,Promise.resolve({txid:"",rawTx:JSON.stringify({Message:a,Signature:{Data:y.toString("base64"),Type:g.SECP256K1}})})}))).apply(this,arguments)}var C=function(e){(0,o.A)(CoreChainSoftware,e);var r=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return r.apply(this,arguments)}var t,n,a,s,f,p,l=CoreChainSoftware.prototype;return l.getPrivateKeys=(t=(0,c.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:A})})),function getPrivateKeys(e){return t.apply(this,arguments)}),l.signTransaction=(n=(0,c.A)((function*(e){var{unsignedTx:r}=e,t=yield this.baseGetSingleSigner({payload:e,curve:A}),n=yield function _signTransaction2(e,r){return _signTransaction.apply(this,arguments)}(r,t);return _objectSpread(_objectSpread({},n),{},{encodedTx:r.encodedTx})})),function signTransaction(e){return n.apply(this,arguments)}),l.signMessage=(a=(0,c.A)((function*(){throw new d.MS})),function signMessage(){return a.apply(this,arguments)}),l.getAddressFromPrivate=(s=(0,c.A)((function*(e){var{privateKeyRaw:r}=e,t=v.A.toBuffer(r),n=this.baseGetCurve(A).publicFromPrivate(t);return this.getAddressFromPublic({publicKey:v.A.bytesToHex(n),networkInfo:e.networkInfo})})),function getAddressFromPrivate(e){return s.apply(this,arguments)}),l.getAddressFromPublic=(f=(0,c.A)((function*(e){var{publicKey:r,networkInfo:t}=e,n=(0,b.sA)(A,v.A.toBuffer(r)),i=n.toString("hex"),o=t.isTestnet?u.CoinType.TEST:u.CoinType.MAIN,a=(0,u.newSecp256k1Address)(n,o).toString();return Promise.resolve({address:"",addresses:{[t.networkId]:a},publicKey:i})})),function getAddressFromPublic(e){return f.apply(this,arguments)}),l.getAddressesFromHd=(p=(0,c.A)((function*(e){return this.baseGetAddressesFromHd(e,{curve:A})})),function getAddressesFromHd(e){return p.apply(this,arguments)}),(0,i.A)(CoreChainSoftware)}(h.G)}}]);