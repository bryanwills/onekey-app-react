"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[26632],{940916:(e,r,t)=>{t.d(r,{G:()=>g});var n=t(482451),i=t.n(n),a=t(324586),s=t(586330),o=t(230414),u=t(507140),c=t(606777),l=t(554902),p=t(180556),d=t(929296),v=t(195309),f=t(972715),y=t(901048).Buffer;function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,f.A)(e);if(r){var i=(0,f.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,v.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var h=function(e){(0,d.A)(ChainSigner,e);var r=_createSuper(ChainSigner);function ChainSigner(e,t,n){var i,a=(0,l.N)(n,{key:e,chainCode:y.alloc(32)},t).key.toString("hex");return(i=r.call(this,a,n)).encryptedPrivateKey=e,i.password=t,i.curve=n,i}var t,n=ChainSigner.prototype;return n.getPrvkey=function getPrvkey(){return Promise.resolve((0,l.Yc)(this.password,this.encryptedPrivateKey))},n.getPrvkeyHex=(t=(0,s.A)((function*(){return c.A.bytesToHex(yield this.getPrvkey())})),function getPrvkeyHex(){return t.apply(this,arguments)}),n.sign=function sign(e){var r=(0,l._S)(this.curve,this.encryptedPrivateKey,e,this.password);return"secp256k1"===this.curve?Promise.resolve([r.slice(0,-1),r[r.length-1]]):Promise.resolve([r,0])},(0,o.A)(ChainSigner)}(function(){function Verifier(e,r){this.curve=r,this.compressedPublicKey=y.from(e,"hex"),this.uncompressedPublicKey=(0,l.sA)(r,this.compressedPublicKey)}var e,r=Verifier.prototype;return r.getPubkey=function getPubkey(e){return Promise.resolve(e?this.compressedPublicKey:this.uncompressedPublicKey)},r.getPubkeyHex=(e=(0,s.A)((function*(e){return c.A.bytesToHex(yield this.getPubkey(e))})),function getPubkeyHex(r){return e.apply(this,arguments)}),r.verify=function verify(){return Promise.resolve(y.from([]))},r.verifySignature=function verifySignature({publicKey:e,digest:r,signature:t}){var n=c.A.toBuffer(e),i=c.A.toBuffer(r),a=c.A.toBuffer(t),{curve:s}=this,o=(0,l.MX)(s,n,i,a);return Promise.resolve(o)},(0,o.A)(Verifier)}());function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,a.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var g=function(){function CoreChainApiBase(){}var e,r,t,n,a,d=CoreChainApiBase.prototype;return d.baseGetCurve=function baseGetCurve(e){switch(e){case"ed25519":return l.ev;case"secp256k1":return l.bI;case"nistp256":return l.OX;default:throw new u.He("Unsupported curve")}},d.baseCreateSigner=(e=(0,s.A)((function*({curve:e,privateKey:r,password:t}){if(void 0===t)throw new u.He("Software signing requires a password.");var n=c.A.toBuffer(r);return Promise.resolve(new h(n,t,e))})),function baseCreateSigner(r){return e.apply(this,arguments)}),d.baseGetSingleSigner=(r=(0,s.A)((function*({payload:e,curve:r}){var t=yield this.getPrivateKeys(e),n=e.account.path,i=t[n],a=e.account.relPaths?.[0];if(!i&&a&&(i=t[[n,a].join("/")]),!i)throw new Error(`No private key found: ${n}`);return this.baseCreateSigner({curve:r,privateKey:i,password:e.password})})),function baseGetSingleSigner(e){return r.apply(this,arguments)}),d.baseGetPrivateKeys=(t=(0,s.A)((function*({payload:e,curve:r}){var{credentials:t,account:n,password:i}=e,a={};if(t.hd&&t.imported)throw new u.He("getPrivateKeys ERROR: hd and imported credentials can NOT both set.");if(t.hd){var{relPaths:s}=n;a=yield this.baseGetPrivateKeysHd({curve:r,account:n,hdCredential:t.hd,password:i,relPaths:s})}if(t.imported){var{privateKey:o}=(0,l.VV)({password:i,credential:t.imported}),p=c.A.bytesToHex((0,l.w)(i,o));a[n.path]=p,a[""]=p}if(!Object.keys(a).length)throw new Error("No private keys found");return a})),function baseGetPrivateKeys(e){return t.apply(this,arguments)}),d.baseGetPrivateKeysHd=(n=(0,s.A)((function*({curve:e,password:r,account:t,relPaths:n,hdCredential:i}){var{path:a}=t,s=a.split("/"),o=n||[s.pop()],p=s.join("/");if(0===o.length)throw new u.He("getPrivateKeysHd ERROR: relPaths is empty.");return(0,l.Wu)(e,i,r,p,o).reduce((function(e,r){return _objectSpread(_objectSpread({},e),{},{[r.path]:c.A.bytesToHex(r.extendedKey.key)})}),{})})),function baseGetPrivateKeysHd(e){return n.apply(this,arguments)}),d.baseGetAddressesFromHd=(a=(0,s.A)((function*(e,r){var t=this,{curve:n,generateFrom:a}=r,{template:o,hdCredential:d,password:v,indexes:f}=e,{pathPrefix:y,pathSuffix:h}=(0,p.Ah)(o),g=f.map((function(e){return h.replace("{index}",e.toString())})),b="privateKey"===a,m=[],P=[];b?P=(0,l.Wu)(n,d,v,y,g):m=(0,l.W6)(n,d,v,y,g);var w=b?P:m;if(w.length!==f.length)throw new u.He("Unable to get publick key.");var A,S=yield Promise.all(w.map((A=(0,s.A)((function*(r){var n,a,{path:s,extendedKey:{key:o}}=r;if(b){var u=c.A.bytesToHex((0,l.Yc)(v,o));a=yield t.getAddressFromPrivate({networkInfo:e.networkInfo,privateKeyRaw:u,privateKeyInfo:r})}else n=o.toString("hex"),a=yield t.getAddressFromPublic({networkInfo:e.networkInfo,publicKey:n,publicKeyInfo:r});return i()({publicKey:n,path:s},a)})),function(e){return A.apply(this,arguments)})));return{addresses:S}})),function baseGetAddressesFromHd(e,r){return a.apply(this,arguments)}),(0,o.A)(CoreChainApiBase)}()},826632:(e,r,t)=>{t.r(r),t.d(r,{default:()=>o});var n=t(230414),i=t(929296),a=t(195309),s=t(972715);function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,s.A)(e);if(r){var i=(0,s.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,a.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var o=function(e){(0,i.A)(CoreChainImported,e);var r=_createSuper(CoreChainImported);function CoreChainImported(){return r.apply(this,arguments)}return(0,n.A)(CoreChainImported)}(t(554045).A)},554045:(e,r,t)=>{t.d(r,{A:()=>P});var n=t(808138),i=t.n(n),a=t(586330),s=t(230414),o=t(929296),u=t(195309),c=t(972715),l=t(705372),p=t(89729),d=t(903454),v=t(554902),f=t(606777),y=t(940916),h=t(889803),g=t(638731),b=t(901048).Buffer;function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,n=(0,c.A)(e);if(r){var i=(0,c.A)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,u.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}var m="secp256k1",P=function(e){(0,o.A)(CoreChainSoftware,e);var r=_createSuper(CoreChainSoftware);function CoreChainSoftware(){return r.apply(this,arguments)}var t,n,u,c,y,P,w=CoreChainSoftware.prototype;return w.getPrivateKeys=(t=(0,a.A)((function*(e){return this.baseGetPrivateKeys({payload:e,curve:m})})),function getPrivateKeys(e){return t.apply(this,arguments)}),w.signTransaction=(n=(0,a.A)((function*(e){var{unsignedTx:r}=e,t=yield this.baseGetSingleSigner({payload:e,curve:m}),{digest:n,tx:i}=(0,g.TE)(r),[a,s]=yield t.sign(b.from(n.slice(2),"hex")),[o,u]=[a.slice(0,32),a.slice(32)],{rawTx:c,txid:p}=(0,g.Pm)({tx:i,signature:{v:s,r:(0,l.bj)(`0x${o.toString("hex")}`,32),s:(0,l.bj)(`0x${u.toString("hex")}`,32)}});return{encodedTx:r.encodedTx,txid:p,rawTx:c}})),function signTransaction(e){return n.apply(this,arguments)}),w.signMessage=(u=(0,a.A)((function*(e){var r=e.unsignedMsg,t=yield this.baseGetSingleSigner({payload:e,curve:m}),n=r.message;if(i()(r.message))try{var a=JSON.parse(r.message);void 0!==a?.message?.value1&&void 0===a?.message?.value&&a?.message?(a.message.value=a?.message?.value1,n=JSON.stringify(a)):n=r.message}catch(e){n=r.message}var s=(0,h.A)({messageType:r.type,message:n}),[o,u]=yield t.sign(d.toBuffer(s));return d.addHexPrefix(b.concat([o,b.from([u+27])]).toString("hex"))})),function signMessage(e){return u.apply(this,arguments)}),w.getAddressFromPrivate=(c=(0,a.A)((function*(e){var{privateKeyRaw:r}=e,{publicKey:t}=yield(0,g.jI)({privateKeyRaw:r}),{address:n}=yield this.getAddressFromPublic({publicKey:t,networkInfo:e.networkInfo});return{address:n,publicKey:t}})),function getAddressFromPrivate(e){return c.apply(this,arguments)}),w.getAddressFromPublic=(y=(0,a.A)((function*(e){var{publicKey:r}=e,t=f.A.toBuffer(r),n=(0,v.sA)(m,t),i=`0x${(0,p.S)(n.slice(-64)).slice(-40)}`;return Promise.resolve({address:i,publicKey:r})})),function getAddressFromPublic(e){return y.apply(this,arguments)}),w.getAddressesFromHd=(P=(0,a.A)((function*(e){return this.baseGetAddressesFromHd(e,{curve:m})})),function getAddressesFromHd(e){return P.apply(this,arguments)}),(0,s.A)(CoreChainSoftware)}(y.G)},638731:(e,r,t)=>{t.d(r,{DL:()=>validateEvmAddress,Pm:()=>buildSignedTxFromSignatureEvm,TE:()=>packUnsignedTxForSignEvm,jI:()=>getPublicKeyFromPrivateKey});var n=t(586330),i=t(171277),a=t(705372),s=t(89729),o=t(757808),u=t(241440),c=t(554902),l=t(507140),p=t(825145),d=t(606777),v=t(424754),f=t(403144);function getPublicKeyFromPrivateKey(e){return _getPublicKeyFromPrivateKey.apply(this,arguments)}function _getPublicKeyFromPrivateKey(){return(_getPublicKeyFromPrivateKey=(0,n.A)((function*({privateKeyRaw:e}){if(!v.A.isHexString(e))throw new l.He("Invalid private key.");var r=d.A.toBuffer(e);if(32!==r.length)throw new l.He("Invalid private key.");var t=c.bI.publicFromPrivate(r).toString("hex");return Promise.resolve({publicKey:t})}))).apply(this,arguments)}function packUnsignedTxForSignEvm(e){var r=function packTransaction(e){var r,t={to:e.to||void 0,nonce:(0,f.Si)(new u.A((0,p.wT)(e.nonce))),gasLimit:(0,f.Si)(new u.A((0,p.wT)(null!=(r=e.gasLimit)?r:e.gas))),data:e?.data||"0x",value:e?.value||"0x0",chainId:new u.A((0,p.wT)(e.chainId)).toNumber()};return t.to||(console.error("may be EVM contract deploy, always set value to 0"),t.value="0x0"),e?.maxFeePerGas||e?.maxPriorityFeePerGas?Object.assign(t,{type:o.Eh.eip1559,maxFeePerGas:(0,f.Si)(new u.A((0,p.wT)(e?.maxFeePerGas))),maxPriorityFeePerGas:(0,f.Si)(new u.A((0,p.wT)(e?.maxPriorityFeePerGas)))}):Object.assign(t,{gasPrice:(0,f.Si)(new u.A((0,p.wT)(e.gasPrice)))}),t}(e.encodedTx),t=(0,o.lK)(r);return{digest:(0,s.S)(t),tx:r,serializedTx:t,serializedTxWithout0x:v.A.stripHexPrefix(t)}}function validateEvmAddress(e){var r=!1,t="";try{r=42===(t=(0,i.bv)(e)).length}catch{return Promise.resolve({isValid:!1,normalizedAddress:"",displayAddress:""})}return Promise.resolve({normalizedAddress:t.toLowerCase()||"",displayAddress:t||"",isValid:r})}function buildSignedTxFromSignatureEvm({tx:e,signature:r}){var{r:t,s:n,v:i}=r,u=(0,a.Pc)({v:Number(i),r:t,s:n}),c=(0,o.lK)(e,u);return{rawTx:c,txid:(0,s.S)(c)}}}}]);